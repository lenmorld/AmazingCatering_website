var fb_panel={idClassMap:[],inputFocused:"",isSelecting:false,background_type:"normal",init:function(){this.map("fb-input-box",fb_views.text_field);this.map("fb-textarea",fb_views.textarea);this.map("fb-input-date",fb_views.date);this.map("fb-input-number",fb_views.number);this.map("fb-header",fb_views.heading);this.map("fb-static-text",fb_views.plain_text);this.map("fb-button",fb_views.upload_file);this.map("fb-checkbox",fb_views.checkboxes);this.map("fb-radio",fb_views.radiobuttons);this.map("fb-dropdown",fb_views.dropdown);this.map("fb-listbox",fb_views.listbox);this.map("fb-sectionbreak",fb_views.sectionbreak);this.map("fb-button-special",fb_views.submit_button);this.map("fb-link-logo",fb_views.logo);this.map("fb-spacer",fb_views.spacer);this.map("fb-image",fb_views.image);this.map("fb-phone",fb_views.phone);this.map("fb-regex",fb_views.regex);fb_views.form();$(document).keydown(function(c){var a=c.metaKey;var b=c.shiftKey;if(a||(b&&c.keyCode!=9)){fb_panel.isSelecting=true}else{fb_panel.isSelecting=false}});$(document).keyup(function(a){fb_panel.isSelecting=false})},map:function(a,b){this.idClassMap[a]=b},show:function(c){fb_panel.inputFocused="";for(var a in this.idClassMap){var d=$(c).children();for(var b=0;b<d.length;b++){if($(d[b]).hasClass(a)){new this.idClassMap[a](c);break}}}if(fb_container.itemSelected){$(fb_container.itemSelected).removeClass("selected-object")}if(!$(c).hasClass("column")){fb_container.itemSelected=c;$(fb_container.itemSelected).addClass("selected-object")}appVar.bringToFront();if(appVar.platform()=="win"){appVar.resetFocus(fb_container.itemSelected[0]);appVar.rescale()}},add:function(a){$("#control_properties_set").append(a)},addToForm:function(a){$("#tb_form_properties").append(a)},addToFormProperties:function(a){$("#form_properties_controls").append(a)},addLegendToPanel:function(b){var a="<legend>"+b+"</legend>";this.add(a)},addPaddingLabels:function(){var a='<span id="fb-pp-span-item-padding-top">Top</span>							<span id="fb-pp-span-item-padding-right">Right</span>							<span id="fb-pp-span-item-padding-bottom">Bottom</span>							<span id="fb-pp-span-item-padding-left">Left</span>';this.add(a)},addSpecialLegendToPanelEnter:function(b){var a='<fieldset id="tool_group_basic" class="tool_group_special"><legend>'+b+"</legend></fieldset>";this.add(a)},clear:function(){$(document).trigger("mousedown");fb_editor.triggerActiveElementChange();var d=$("#fb-color").data("colorpickerId");var b=$("#fb-background-color-submit").data("colorpickerId");var c=$("#fb-font-color-submit").data("colorpickerId");var a=$("#fb-border-color-submit").data("colorpickerId");$("#"+d).remove();$("#"+b).remove();$("#"+c).remove();$("#"+a).remove();$("#control_properties_set").html("")},clearForm:function(){$(document).trigger("mousedown");fb_editor.triggerActiveElementChange();var a=$("#fb-color-form").data("colorpickerId");$("#"+a).remove();$("#control_properties_set").html("");$("#tb_form_properties").html("")},disableCheckOptions:function(){var b=document.getElementById("fb-pp-input-disabled");var a=document.getElementById("fb-pp-input-required");var d=document.getElementById("fb-pp-input-autocomplete");var c=document.getElementById("fb-pp-check-verification");if(b&&$("#fb-pp-input-disabled").attr("checked")){if(a){$("#fb-pp-input-required").attr("disabled","disabled");$(a.nextElementSibling).addClass("disabled_display")}if(d){$("#fb-pp-input-autocomplete").attr("disabled","disabled");$(d.nextElementSibling).addClass("disabled_display")}if(c){$("#fb-pp-check-verification").attr("disabled","disabled");$(c.nextElementSibling).addClass("disabled_display")}}else{if($("#fb-pp-input-required").attr("checked")||$("#fb-pp-input-autocomplete").attr("checked")||$("#fb-pp-check-verification").attr("checked")){if(b){$("#fb-pp-input-disabled").attr("disabled","disabled");$(b.nextElementSibling).addClass("disabled_display")}}}},disableFileOptions:function(d,e,b){var c=document.getElementById("fb-pp-input-disabled");var a=document.getElementById("fb-pp-input-required");var g=document.getElementById("fb-pp-input-autocomplete");var f=document.getElementById("fb-pp-check-verification");if(e=="readonly"){if(b){if(a){$("#fb-pp-input-required").attr("disabled","disabled");$(a.nextElementSibling).addClass("disabled_display")}if(g){$("#fb-pp-input-autocomplete").attr("disabled","disabled");$(g.nextElementSibling).addClass("disabled_display")}if(f){$("#fb-pp-check-verification").attr("disabled","disabled");$(f.nextElementSibling).addClass("disabled_display")}}else{if(a){$("#fb-pp-input-required").removeAttr("disabled");$(a.nextElementSibling).removeClass("disabled_display")}if(g){$("#fb-pp-input-autocomplete").removeAttr("disabled");$(g.nextElementSibling).removeClass("disabled_display")}if(f){$("#fb-pp-check-verification").removeAttr("disabled");$(f.nextElementSibling).removeClass("disabled_display")}}}else{if((a&&$("#fb-pp-input-required").attr("checked"))||(g&&$("#fb-pp-input-autocomplete").attr("checked"))||(f&&$("#fb-pp-check-verification").attr("checked"))){if(c){$("#fb-pp-input-disabled").attr("disabled","disabled");$(c.nextElementSibling).addClass("disabled_display")}}else{if(c){$("#fb-pp-input-disabled").removeAttr("disabled");$(c.nextElementSibling).removeClass("disabled_display")}}}},disableStoreInDatabase:function(){var a=$("input:file");for(var b=0;b<a.length;b++){var c=a[b].id;pValidationConfig.set_config_type(c,"database",false);var d=$(a[b].parentNode.parentNode).hasClass("selected-object");if(d){$("#fb-pp-input-store").attr("checked",false)}}return},disableAttachToMail:function(){var a=$("input:file");for(var b=0;b<a.length;b++){var c=a[b].id;pValidationConfig.set_config_type(c,"attach",false);var d=$(a[b].parentNode.parentNode).hasClass("selected-object");if(d){$("#fb-pp-input-attach").attr("checked",false)}}return},refreshEditor:function(){$("#docContainer .selected-object").trigger("mousedown");return},disableLogoOptions:function(){if($("#fb-bg-image-name").text()=="none"){$("#fb-pp-input-alt").attr("disabled","disabled").prev().css("color","rgb(128,128,128)");$("#fb-pp-input-image-link").attr("disabled","disabled").prev().css("color","rgb(128,128,128)");$("#fb-pp-input-target").attr("disabled","disabled").prev().css("color","rgb(128,128,128)");$("#fb-pp-input-submit-alignment").attr("disabled","disabled").prev().css("color","rgb(128,128,128)");$("#fb-pp-input-vertical-alignment").attr("disabled","disabled").prev().css("color","rgb(128,128,128)")}else{$("#fb-pp-input-alt").attr("disabled","").prev().css("color","rgb(0,0,0)");$("#fb-pp-input-image-link").attr("disabled","").prev().css("color","rgb(0,0,0)");$("#fb-pp-input-target").attr("disabled","").prev().css("color","rgb(0,0,0)");$("#fb-pp-input-submit-alignment").attr("disabled","").prev().css("color","rgb(0,0,0)");$("#fb-pp-input-vertical-alignment").attr("disabled","").prev().css("color","rgb(0,0,0)")}},applyPredefinedList:function(n,f){var l=$(document.getElementById(n)).children()[1];var g=l.firstChild.id;if(l.firstChild.tagName.toLowerCase()=="label"){g=l.firstChild.firstChild.id}var m=fb_undo.getItemParams(l);m.validation_object_id=g;m.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(g));var k=JSON||{};var e=f;var h={};h=k.parse(e);var b=h.list;if(b.length>0){for(var a=0;a<b.length;a++){if($(l).hasClass("fb-checkbox")){if(!fb_utils.existsCheckRadioName(b[a],l)){fb_panel.addCheck(l,b[a])}}else{if($(l).hasClass("fb-radio")){if(!fb_utils.existsCheckRadioName(b[a],l)){fb_panel.addRadio(l,b[a])}}else{if(($(l).hasClass("fb-dropdown"))||($(l).hasClass("fb-listbox"))){if(!fb_utils.existsDropListBoxName(b[a],l)){fb_panel.addDropList(l,b[a])}}else{nativeApp.displayAlert_("Not defined object type")}}}}if($(l).hasClass("fb-checkbox")){var d=document.getElementById("chekboxes_wrapper_div_id");fb_utils.setScrollAtBottom("chekboxes_wrapper_div_id","checkbox_row");$("#fb-pp-input-requirednumber").attr("max",d.childNodes.length)}else{if($(l).hasClass("fb-radio")){fb_utils.setScrollAtBottom("radio_wrapper_div_id","radio_row")}else{if(($(l).hasClass("fb-dropdown"))||($(l).hasClass("fb-listbox"))){fb_utils.setScrollAtBottom("droplist_wrapper_div_id","droplist_row")}}}fb_toolbox.generateIds($(l).parent()[0]);m.markupredo=fb_utils.getouterHtml($(l).parent()[0]);m.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(g));var c=fb_editor.JSONParser.stringify(m);appVar.pushUndo_(c)}},applySubmitButtonBackGroundImage:function(b,e){var d="";var a={};d=document.getElementById("fb-submit-button-div");a=fb_undo.getSubmitParams(d);if(fb_panel.background_type=="hover"){a.validation_object_id=b;a.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b));pValidationConfig.set_config_subtype(b,"hover","background-image","url(common/images/"+e+")");a.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b));a.markupredo=fb_utils.getouterHtml(d);var c=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(c);$("#objectproperties").trigger("click");fb_panel.applyBackgroundHover(b);return}else{$("#"+b).css("background-image","url(common/images/"+e+")")}$("<img>").bind("load readystatechange",function(g){if(this.complete||(this.readyState=="complete"&&g.type=="readystatechange")){$("#"+b).css("width",this.width);$("#"+b).css("height",this.height);$("#fb-submit-button-div").css("min-height",$("#"+b).css("height"));$("#fb-submit-button-div").resize();$("#"+b).css("border","none");a.markupredo=fb_utils.getouterHtml(d);var f=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(f);$("#objectproperties").trigger("click")}}).attr("src","common/images/"+e);fb_panel.applyBackgroundHover(b)},applyLogoBackGroundImage:function(b,d){var c="";var a={};c=document.getElementById("fb-form-header1");a=fb_undo.getLogoAndHeaderParams(c);$("#"+b).attr("src","common/images/"+d);$("#"+b).css("display","inline");$("<img>").bind("load readystatechange",function(g){if(this.complete||(this.readyState=="complete"&&g.type=="readystatechange")){$("#"+b).css("width",this.width);$("#"+b).css("height",this.height);$("#fb-form-header1").css("min-height",$("#"+b).css("height"));$("#fb-form-header1").resize();a.markupredo=fb_utils.getouterHtml(c);var f=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(f);$("#objectproperties").trigger("click")}}).attr("src","common/images/"+d);fb_panel.disableLogoOptions()},applyImageElementSrc:function(b,c){var a={};item_edited=document.getElementById(b);a=fb_undo.getItemParams($(item_edited).parent()[0]);$("#"+b).attr("src","common/images/"+c);$("<img>").bind("load readystatechange",function(f){if(this.complete||(this.readyState=="complete"&&f.type=="readystatechange")){$("#"+b).parent().parent().css("width",this.width);$("#"+b).parent().parent().css("height",this.height);a.markupredo=fb_utils.getouterHtml($("#"+b).parent().parent()[0]);var d=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(d)}$("#objectproperties").trigger("click")}).attr("src","common/images/"+c)},applyGenerealBackGroundImage:function(b,e){var d="";var a={};if(b=="docContainer"){d=document.getElementById("docContainer");a=fb_undo.getFormParams(d)}if(b=="fb-submit-button-div"){d=document.getElementById("fb-submit-button-div");a=fb_undo.getSubmitParams(d)}if(b=="fb-form-header1"){d=document.getElementById("fb-form-header1");a=fb_undo.getLogoAndHeaderParams(d)}$("#"+b).css("background-image","url(common/images/"+e+")");$("#"+b).css("top","0");a.markupredo=fb_utils.getouterHtml(d);var c=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(c);if(b=="docContainer"){$("#formproperties").trigger("click")}else{$("#objectproperties").trigger("click")}},managerSelector:function(b,t,h,r){fb_panel.isSelecting=true;if(appVar.platform()=="win"){$("input",t).change().blur()}else{$("input",".selected_row").change().blur()}var q=b.metaKey;var d=b.shiftKey;if(!q&&!d){$("."+h).removeClass("selected_row");$(t).addClass("selected_row")}if(q&&!d){if($(t).hasClass("selected_row")){$(t).removeClass("selected_row")}else{$(t).addClass("selected_row")}}if(d){var s=document.getElementById(r);var n=s.childNodes;var a=jQuery.inArray(t,n);if(a!=-1){$(t).addClass("selected_row")}var g=-1;for(var p=0;p<n.length;p++){if(n[p]==t){a=p;$(n[p]).addClass("selected_row");break}}for(var o=a-1;o>=0;o--){if($(n[o]).hasClass("selected_row")){g=o}}if(g>=0){$("."+h).removeClass("selected_row");for(var f=g;f<=a;f++){$(n[f]).addClass("selected_row")}}else{for(var e=a+1;e<n.length;e++){if($(n[e]).hasClass("selected_row")){g=e}}if(g>=0){$("."+h).removeClass("selected_row");for(var c=a;c<=g;c++){$(n[c]).addClass("selected_row")}}}}if(fb_panel.inputFocused){fb_panel.inputFocused.blur()}return false},initFileExtensionRow:function(b){var a=document.getElementById("allowed_files_wrapper_div_id");$(a.lastChild.childNodes[0]).change(function(){var n=fb_undo.getItemParams($(b).parent()[0]);n.validation_object_id=b.id;n.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var d=this.parentNode.parentNode.childNodes;var m=0;for(var f=0;f<d.length;f++){if(d[f]==this.parentNode){m=f;break}}var e=pValidationConfig.get_config_value(b.id,"accept");var o=e.split("|");var p=true;this.value=fb_utils.clearFileNameNotValidChars(this.value);this.title=fb_utils.clearFileNameNotValidChars(this.value);for(var l in o){if((this.value=="")||(this.value==o[l])){var c="";if(this.value==""){c="An empty file type is not allowed."}else{if(this.value!=o[m]){c='The allowed file of type "'+this.value+'" already exists.'}}this.value=o[m];this.title=o[m];if(c){appVar.displayAlert_(c)}p=false}}if(p){var h="";for(var g=0;g<d.length;g++){h+=fb_utils.htmlEncode(d[g].childNodes[0].value);if(g!=d.length-1){h+="|"}}pValidationConfig.set_config_type(b.id,"accept",h);n.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);n.validation_object_redo=pValidationConfig.get_config_id(b.id);appVar.pushUndo_(fb_editor.JSONParser.stringify(n))}});$(a.lastChild.childNodes[0]).keydown(function(d){var c=d.shiftKey;if(d.keyCode=="9"&&!c){$(this.parentNode).removeClass("selected_row");if($(this.parentNode).next().hasClass("allowed_row")){$(this.parentNode).next().addClass("selected_row")}}if(d.keyCode=="9"&&c){$(this.parentNode).removeClass("selected_row");if($(this.parentNode).prev().hasClass("allowed_row")){$(this.parentNode).prev().addClass("selected_row")}}});$(a.lastChild).mousedown(function(c){if($(this.childNodes[0]).hasClass("focus")){return}return fb_panel.managerSelector(c,this,"allowed_row","allowed_files_wrapper_div_id")});$(a.lastChild.childNodes[0]).focus(function(){if(fb_panel.isSelecting){$(this).blur();return false}$(this).addClass("focus");fb_panel.inputFocused=this;fb_panel.isSelecting=false;$(this).select()});$(a.lastChild.childNodes[0]).dblclick(function(c){fb_panel.isSelecting=false;$(this).focus()});$(a.lastChild.childNodes[0]).blur(function(){$(this).removeClass("focus");fb_panel.inputFocused=""});$(a.lastChild.childNodes[0]).keyup(function(f){var c=this.parentNode;var d=this.parentNode.parentNode;if(f.keyCode=="9"&&((c==d.firstChild)||(c==d.lastChild))){$(".allowed_row").removeClass("selected_row");$(c).addClass("selected_row")}})},updateChecksRequired:function(d){var c="";c=fb_utils.clearNotNumericChars($("#fb-pp-input-requirednumber").attr("value"));$("#fb-pp-input-requirednumber").attr("value",c);var b=0;var a=0;b=parseInt($("#fb-pp-input-requirednumber").attr("value"));a=parseInt($("#fb-pp-input-requirednumber").attr("max"));if(b>=0){if(b<a){pValidationConfig.set_config_type(d.id,"minlength",b)}else{$("#fb-pp-input-requirednumber").attr("value",a);pValidationConfig.set_config_type(d.id,"minlength",a)}if(b>0){pValidationConfig.set_config_type(d.id,"required",true)}else{pValidationConfig.set_config_type(d.id,"required",false)}}else{pValidationConfig.set_config_type(d.id,"minlength",a);$("#fb-pp-input-requirednumber").attr("value",a)}},initCheckRow:function(b){var a=document.getElementById("chekboxes_wrapper_div_id");var c=a.childNodes;$(a.lastChild.childNodes[0]).click(function(){var d=fb_undo.getItemParams(b.parentNode,true);if($(this).attr("checked")){$(b.childNodes[0]).attr("checked","true");b.childNodes[0].setAttribute("checked",true)}else{$(b.childNodes[0]).removeAttr("checked");b.childNodes[0].removeAttribute("checked")}d.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0],true);var e=fb_editor.JSONParser.stringify(d);appVar.pushUndo_(e)});$(a.lastChild.childNodes[1]).change(function(){var f=-1;for(var h=0;h<c.length;h++){if(c[h]==this.parentNode){f=h;break}}var l=b.parentNode.firstChild.firstChild.id;var n=jQuery.trim(fb_utils.htmlEncode(this.value));this.value=fb_utils.htmlDecode(n);this.title=fb_utils.htmlDecode(n);if(n==b.childNodes[1].innerText||n==b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText)){if(pPaymentsConfig.get_config_value(l,"type")!="none"){if(n==b.childNodes[1].innerText){this.value=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText);this.title=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText);appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.")}}return}else{if(n==""){this.value=b.childNodes[1].innerText;this.title=b.childNodes[1].innerText;appVar.displayAlert_("An empty check box label is not allowed.");if(fb_container.itemSelected){fb_container.itemSelected.trigger("mousedown")}return}else{if((!fb_utils.existsCheckRadioName(this.value,b.parentNode,f))){var e=b.childNodes[0].getAttribute("name");e=e.substr(0,e.length-2);var d="["+e+"="+b.childNodes[0].getAttribute("value")+"],["+e+"="+n+"]";var p=fb_undo.getItemParams(b.parentNode);p.validation_object_id=l;p.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(l));if(pPaymentsConfig.get_config_value(l,"type")!="none"){var m=n.split(":");if(m.length==2){b.childNodes[1].innerHTML=jQuery.trim(m[0]);if(jQuery.trim(m[1])!=""){if(pPaymentsConfig.get_config_value(l,"type")=="amount"){m[1]=parseFloat(m[1]).toFixed(2)}else{m[1]=parseInt(m[1])}if(isNaN(m[1])){m[1]=(pPaymentsConfig.get_config_value(l,"type")=="amount"?"0.01":"1")}else{if(m[1]<0){b.childNodes[0].setAttribute("value",m[0]);this.value=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);this.title=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);appVar.displayAlert_("You must provide a positive price for this value.");return}}pPaymentsConfig.set_payment_option(l,b.childNodes[0].getAttribute("value"),m[0],m[1]);b.childNodes[0].setAttribute("value",jQuery.trim(m[0]));this.value=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+m[1];this.title=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+m[1]}else{b.childNodes[0].setAttribute("value",m[0]);this.value=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);this.title=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.")}}else{var o=(pPaymentsConfig.get_config_value(l,"type")=="amount"?"0.01":"1");pPaymentsConfig.set_payment_option(l,b.childNodes[1].innerHTML,n,o);b.childNodes[1].innerHTML=n;b.childNodes[0].setAttribute("value",n);this.value=jQuery.trim(fb_utils.htmlDecode(n))+":"+o;this.title=jQuery.trim(fb_utils.htmlDecode(n))+":"+o;appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.\nA default value has been placed in each improperly formatted option value.")}}else{b.childNodes[1].innerHTML=n;b.childNodes[0].setAttribute("value",n)}p.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);p.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(l));var k=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(k);appVar.updateNameInSettings_(d)}else{if(this.value!=b.childNodes[1].innerText){if(pPaymentsConfig.get_config_value(l,"type")!="none"){var g=n;var m=n.split(":");if(m.length==2){g=m[0]}appVar.displayAlert_('A check box with label  "'+g+'" already exists.');this.value=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText);this.title=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText)}else{appVar.displayAlert_('A check box with label "'+this.value+'" already exists.');this.value=b.childNodes[1].innerText;this.title=b.childNodes[1].innerText;return}}}}}});$(a.lastChild).mousedown(function(d){if($(this.childNodes[1]).hasClass("focus")){return}return fb_panel.managerSelector(d,this,"checkbox_row","chekboxes_wrapper_div_id")});$(a.lastChild.childNodes[1]).dblclick(function(d){fb_panel.isSelecting=false;$(this).focus()});$(a.lastChild.childNodes[0]).focus(function(){if(!fb_panel.isSelecting){$("#chekboxes_wrapper_div_id div").removeClass("selected_row")}$(this.parentNode).addClass("selected_row");return});$(a.lastChild.childNodes[1]).focus(function(d){if(fb_panel.isSelecting){$(this).blur();return false}$("#chekboxes_wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");$(this).addClass("focus");fb_panel.inputFocused=this;fb_panel.isSelecting=false;$(this).select();return});$(a.lastChild.childNodes[0]).blur(function(){if($(this).parent().get(0)==$(this).parent().first().get(0)&&!fb_panel.isSelecting){$("#chekboxes_wrapper_div_id div").removeClass("selected_row")}return});$(a.lastChild.childNodes[1]).blur(function(){if($(this).parent().get(0)==$(this).parent().last().get(0)&&!fb_panel.isSelecting){$("#chekboxes_wrapper_div_id div").removeClass("selected_row")}$(this).removeClass("focus");if(!fb_panel.isSelecting){fb_panel.resetCursorPosition(this)}fb_panel.inputFocused="";return})},makeManagerElementVisible:function(f,a){if($(f+" .selected_row").length<=0){return}var d=$(f).scrollTop();var c=$(f).height();var e=$(f+" .selected_row").outerHeight();var b=0;if(a){b=$(f+" .selected_row").first().offset().top-$(f).offset().top}else{b=$(f+" .selected_row").last().offset().top-$(f).offset().top}if(b<0){$(f).scrollTop(d+b)}else{if(b>c-e){$(f).scrollTop(d+b-c+e)}}},addCheck:function(f,d){var c=f.firstChild.firstChild.id;var a=d;if(pPaymentsConfig.get_config_value(c,"type")!="none"){var b=a.split(":");if(b.length==2){b[0]=jQuery.trim(b[0]);b[1]=jQuery.trim(b[1]);if(b[1]!=""){if(pPaymentsConfig.get_config_value(c,"type")=="amount"){b[1]=parseFloat(b[1]).toFixed(2)}else{b[1]=parseInt(b[1])}if(isNaN(b[1])||b[1]<0){b[1]=(pPaymentsConfig.get_config_value(c,"type")=="amount"?"0.01":"1")}}var g=pPaymentsConfig.add_payment_option(c,b[0]);pPaymentsConfig.set_payment_option(c,b[0],b[0],b[1]);a=b[0]+":"+b[1];d=b[0]}else{var g=pPaymentsConfig.add_payment_option(c,d);a=d+":"+g}}$(f).append('<label><input type="checkbox" value= "'+d+'" name="'+f.lastChild.firstChild.name+'"><span class="fb-fieldlabel">'+d+"</span></label>");$("#chekboxes_wrapper_div_id").append('<div class="checkbox_row"><input type="checkbox" class="checkbox_attr_checked"><input  class="checkbox_attr_label" type=text title="'+a+'" value="'+a+'"></div>');fb_panel.initCheckRow(f.lastChild);var e=document.getElementById("chekboxes_wrapper_div_id");$(e.lastChild.childNodes[1]).trigger("dblclick")},initRadioRow:function(b){var c=document.getElementById("radio_wrapper_div_id");var a=c.childNodes;$(c.lastChild.childNodes[0]).click(function(){var e=fb_undo.getItemParams(b.parentNode,true);var k=-1;for(var f=0;f<a.length;f++){if(a[f]==this.parentNode){k=f;break}}var h=$(b.parentNode).children();$(".radio_attr_selected").removeAttr("checked");$(this).attr("checked",true);for(var d=0;d<h.length;d++){if(d!=k){$(h[d].childNodes[0]).removeAttr("checked");h[d].childNodes[0].removeAttribute("checked")}}$(h[k].childNodes[0]).attr("checked","true");h[k].childNodes[0].setAttribute("checked",true);e.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0],true);var g=fb_editor.JSONParser.stringify(e);appVar.pushUndo_(g)});$(c.lastChild.childNodes[1]).change(function(){var f=-1;for(var h=0;h<a.length;h++){if(a[h]==this.parentNode){f=h;break}}var l=b.parentNode.firstChild.firstChild.id;var n=jQuery.trim(fb_utils.htmlEncode(this.value));this.value=fb_utils.htmlDecode(n);this.title=fb_utils.htmlDecode(n);if(n==b.childNodes[1].innerText||n==b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText)){if(pPaymentsConfig.get_config_value(l,"type")!="none"){if(n==b.childNodes[1].innerText){this.value=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText);this.title=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText);appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.")}}return}else{if(n==""){appVar.displayAlert_("An empty radio button label is not allowed.");this.value=fb_utils.htmlDecode(b.childNodes[1].innerText);this.title=fb_utils.htmlDecode(b.childNodes[1].innerText);if(fb_container.itemSelected){fb_container.itemSelected.trigger("mousedown")}return}else{if((!fb_utils.existsCheckRadioName(this.value,b.parentNode,f))){var e=b.childNodes[0].getAttribute("name");var d="["+e+"="+b.childNodes[0].getAttribute("value")+"],["+e+"="+n+"]";var p=fb_undo.getItemParams(b.parentNode);p.validation_object_id=l;p.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(l));if(pPaymentsConfig.get_config_value(l,"type")!="none"){var m=n.split(":");if(m.length==2){b.childNodes[1].innerHTML=jQuery.trim(m[0]);if(jQuery.trim(m[1])!=""){if(pPaymentsConfig.get_config_value(l,"type")=="amount"){m[1]=parseFloat(m[1]).toFixed(2)}else{m[1]=parseInt(m[1])}if(isNaN(m[1])){m[1]=(pPaymentsConfig.get_config_value(l,"type")=="amount"?"0.01":"1")}else{if(m[1]<0){b.childNodes[0].setAttribute("value",m[0]);this.value=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);this.title=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);appVar.displayAlert_("You must provide a positive price for this value.");return}}pPaymentsConfig.set_payment_option(l,b.childNodes[0].getAttribute("value"),m[0],m[1]);b.childNodes[0].setAttribute("value",jQuery.trim(m[0]));this.value=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+m[1];this.title=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+m[1]}else{b.childNodes[0].setAttribute("value",m[0]);this.value=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);this.title=jQuery.trim(fb_utils.htmlDecode(m[0]))+":"+pPaymentsConfig.get_payment_option(l,m[0]);appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.")}}else{var o=(pPaymentsConfig.get_config_value(l,"type")=="amount"?"0.01":"1");pPaymentsConfig.set_payment_option(l,b.childNodes[1].innerHTML,n,o);b.childNodes[1].innerHTML=n;b.childNodes[0].setAttribute("value",n);this.value=jQuery.trim(fb_utils.htmlDecode(n))+":"+o;this.title=jQuery.trim(fb_utils.htmlDecode(n))+":"+o;appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.\nA default value has been placed in each improperly formatted option value.")}}else{b.childNodes[1].innerHTML=n;b.childNodes[0].setAttribute("value",n)}p.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);p.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(l));var k=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(k);appVar.updateNameInSettings_(d)}else{if(this.value!=b.childNodes[1].innerText){if(pPaymentsConfig.get_config_value(l,"type")!="none"){var g=n;var m=n.split(":");if(m.length==2){g=m[0]}appVar.displayAlert_('A radio button with label  "'+g+'" already exists.');this.value=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText);this.title=b.childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(l,b.childNodes[1].innerText)}else{appVar.displayAlert_('A radio button with label "'+this.value+'" already exists.');this.value=b.childNodes[1].innerText;this.title=b.childNodes[1].innerText;return}}}}}});$(c.lastChild).mousedown(function(d){if($(this.childNodes[1]).hasClass("focus")){return}return fb_panel.managerSelector(d,this,"radio_row","radio_wrapper_div_id")});$(c.lastChild.childNodes[1]).dblclick(function(){fb_panel.isSelecting=false;$(this).focus()});$(c.lastChild.childNodes[0]).focus(function(){if(!fb_panel.isSelecting){$("#radio_wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");fb_panel.isSelecting=false}return});$(c.lastChild.childNodes[1]).focus(function(){if(fb_panel.isSelecting){$(this).blur();return false}$("#radio_wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");$(this).addClass("focus");fb_panel.inputFocused=this;fb_panel.isSelecting=false;$(this).select();return});$(c.lastChild.childNodes[0]).blur(function(){if($(this).parent().get(0)==$(this).parent().first().get(0)&&!fb_panel.isSelecting){$("#radio_wrapper_div_id div").removeClass("selected_row")}return});$(c.lastChild.childNodes[1]).blur(function(){if($(this).parent().get(0)==$(this).parent().last().get(0)&&!fb_panel.isSelecting){$("#radio_wrapper_div_id div").removeClass("selected_row")}$(this).removeClass("focus");if(!fb_panel.isSelecting){fb_panel.resetCursorPosition(this)}fb_panel.inputFocused="";return})},addRadio:function(l,e){var n=l.firstChild.firstChild.id;var k=e;if(pPaymentsConfig.get_config_value(n,"type")!="none"){var f=k.split(":");if(f.length==2){f[0]=jQuery.trim(f[0]);f[1]=jQuery.trim(f[1]);if(f[1]!=""){if(pPaymentsConfig.get_config_value(n,"type")=="amount"){f[1]=parseFloat(f[1]).toFixed(2)}else{f[1]=parseInt(f[1])}if(isNaN(f[1])||f[1]<0){f[1]=(pPaymentsConfig.get_config_value(n,"type")=="amount"?"0.01":"1")}}var g=pPaymentsConfig.add_payment_option(n,f[0]);pPaymentsConfig.set_payment_option(n,f[0],f[0],f[1]);k=f[0]+":"+f[1];e=f[0]}else{var g=pPaymentsConfig.add_payment_option(n,e);k=e+":"+g}}var m="";if($(l).hasClass("fb-radio")){var h=l.lastChild.firstChild.name;m='<label><input type="radio" value="'+e+'" name="'+h+'"><span class="fb-fieldlabel">'+e+"</span></label>"}$(l).append(m);var d="";var b=pValidationConfig.get_config_value($(l).children()[0].childNodes[0].id,"required");var a=b?" disabled ":"";d='<div class="radio_row"><input type="checkbox" '+a+' name="radio_manager" class="radio_attr_selected"><input  class="radio_attr_label" type="text" title="'+fb_utils.htmlEncode(k)+'" value="'+fb_utils.htmlEncode(k)+'"></div>';$("#radio_wrapper_div_id").append(d);fb_panel.initRadioRow(l.lastChild);var c=document.getElementById("radio_wrapper_div_id");$(c.lastChild.childNodes[1]).trigger("dblclick")},initDropRow:function(c){var b=document.getElementById("droplist_wrapper_div_id");var d=b.childNodes;var a=$(c.parentNode.parentNode).hasClass("fb-dropdown")?"fb-dropdown":"fb-listbox";$(b.lastChild.childNodes[0]).click(function(){if($(c.parentNode).attr("required")&&a=="fb-dropdown"){if($(c).val()!=""){$(this).removeAttr("checked")}else{$(this).attr("checked",true)}appVar.displayAlert_("Because the drop-down menu is configured to be a required element, you cannot select a default option.");return}var l=-1;var f=fb_undo.getItemParams(c.parentNode.parentNode);for(var h=0;h<d.length;h++){if(d[h]==this.parentNode){l=h;break}}var g=c.parentNode;if(a=="fb-dropdown"){$(".droplist_attr_selected").removeAttr("checked");$(this).attr("checked",true);$(c).attr("selected",true);c.setAttribute("selected",true);for(var e=0;e<g.childNodes.length;e++){if(e!=l){g.childNodes[e].removeAttribute("selected")}}}if(a=="fb-listbox"){$(c).attr("selected",$(this).attr("checked"));if($(this).attr("checked")){c.setAttribute("selected",true)}else{c.removeAttribute("selected")}}f.markupredo=fb_utils.getouterHtml($(c).parent().parent().parent()[0]);var k=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(k)});$(b.lastChild.childNodes[1]).change(function(){var k=-1;for(var m=0;m<d.length;m++){if(d[m]==this.parentNode){k=m;break}}var f=c.parentNode.childNodes[0];var q=jQuery.trim(fb_utils.htmlEncode(this.value));this.value=fb_utils.htmlDecode(q);this.title=fb_utils.htmlDecode(q);var t=pValidationConfig.get_config_value(c.parentNode.id,"contactList");var e=pPaymentsConfig.get_config_value(c.parentNode.id,"type")!="none";if(q==c.innerText&&!t&&!e){return}if(q==(c.innerText+":"+c.value)&&t){if($(c).val()!=""&&q==c.innerText){this.value=q+":Name<you@domain.com>";this.title=q+":Name<you@domain.com>";appVar.displayAlert_("Contact List options must contain both a label and an email address separated by a colon.\nA default value has been placed in each improperly formatted option value.")}return}if(q==(c.innerText+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,c.innerText))&&e){if($(c).val()!=""&&q==c.innerText){this.value=c.innerText+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,c.innerText);this.title=c.innerText+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,c.innerText);appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.")}return}if(this.value==""){this.value=c.innerText;this.title=c.innerText;appVar.displayAlert_("An empty option label is not allowed.");if(fb_container.itemSelected){fb_container.itemSelected.trigger("mousedown")}}else{if(!fb_utils.existsDropListBoxName(this.value,c.parentNode.parentNode,k)){var h=c.parentNode.getAttribute("name");if($(c.parentNode).attr("multiple")){h=h.substr(0,h.length-2)}var g="["+h+"="+c.getAttribute("value")+"],["+h+"="+q+"]";var s=fb_undo.getItemParams(c.parentNode.parentNode);s.validation_object_id=c.parentNode.id;s.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(c.parentNode.id));if(t&&$(c).val()!=""){var o=q.split(":");if(o.length==2){c.innerHTML=jQuery.trim(o[0]);if(jQuery.trim(o[1])!=""){c.setAttribute("value",fb_utils.htmlDecode(jQuery.trim(o[1])));this.value=jQuery.trim(fb_utils.htmlDecode(o[0]))+":"+jQuery.trim(fb_utils.htmlDecode(o[1]));this.title=jQuery.trim(fb_utils.htmlDecode(o[0]))+":"+jQuery.trim(fb_utils.htmlDecode(o[1]))}else{c.setAttribute("value","Name<you@domain.com>");this.value=jQuery.trim(fb_utils.htmlDecode(o[0]))+":Name<you@domain.com>";this.title=jQuery.trim(fb_utils.htmlDecode(o[0]))+":Name<you@domain.com>";appVar.displayAlert_("Contact List options must contain both a label and an email address separated by a colon.\nA default value has been placed in each improperly formatted option value.")}}else{c.innerHTML=q;c.setAttribute("value","Name<you@domain.com>");this.value=fb_utils.htmlDecode(q)+":Name<you@domain.com>";this.title=fb_utils.htmlDecode(q)+":Name<you@domain.com>";appVar.displayAlert_("Contact List options must contain both a label and an email address separated by a colon.\nA default value has been placed in each improperly formatted option value.")}}else{if(e&&$(c).val()!=""){var p=q.split(":");if(p.length==2){c.innerHTML=jQuery.trim(p[0]);if(jQuery.trim(p[1])!=""){if(pPaymentsConfig.get_config_value(c.parentNode.id,"type")=="amount"){p[1]=parseFloat(p[1]).toFixed(2)}else{p[1]=parseInt(p[1])}if(isNaN(p[1])){p[1]=(pPaymentsConfig.get_config_value(c.parentNode.id,"type")=="amount"?"0.01":"1")}else{if(p[1]<0){c.setAttribute("value",p[0]);this.value=jQuery.trim(fb_utils.htmlDecode(p[0]))+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,p[0]);this.title=jQuery.trim(fb_utils.htmlDecode(p[0]))+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,p[0]);appVar.displayAlert_("You must provide a positive price for this value.");return}}pPaymentsConfig.set_payment_option(c.parentNode.id,c.getAttribute("value"),p[0],p[1]);c.setAttribute("value",jQuery.trim(p[0]));this.value=jQuery.trim(fb_utils.htmlDecode(p[0]))+":"+p[1];this.title=jQuery.trim(fb_utils.htmlDecode(p[0]))+":"+p[1]}else{c.setAttribute("value",p[0]);this.value=jQuery.trim(fb_utils.htmlDecode(p[0]))+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,p[0]);this.title=jQuery.trim(fb_utils.htmlDecode(p[0]))+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,p[0]);appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.")}}else{var r=(pPaymentsConfig.get_config_value(c.parentNode.id,"type")=="amount"?"0.01":"1");pPaymentsConfig.set_payment_option(c.parentNode.id,c.getAttribute("value"),q,r);c.innerHTML=q;c.setAttribute("value",q);this.value=jQuery.trim(fb_utils.htmlDecode(q))+":"+r;this.title=jQuery.trim(fb_utils.htmlDecode(q))+":"+r;appVar.displayAlert_("Payment options must contain both a label and a value separated by a colon.\nA default value has been placed in each improperly formatted option value.")}}else{c.innerHTML=q;if(!$(c.parentNode).attr("required")||$(c).val()!=""){c.setAttribute("value",q)}}}s.markupredo=fb_utils.getouterHtml($(c).parent().parent().parent()[0]);s.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(c.parentNode.id));var n=fb_editor.JSONParser.stringify(s);appVar.pushUndo_(n);appVar.updateNameInSettings_(g)}else{if(this.value!=c.innerText){if(t&&($(c).val()!="")){var l=q;var o=q.split(":");if(o.length==2){l=o[0]}appVar.displayAlert_('A list option with label "'+l+'" already exists.');this.value=c.innerText+":"+c.value;this.title=c.innerText+":"+c.value}else{if(e&&($(c).val()!="")){var l=q;var p=q.split(":");if(p.length==2){l=p[0]}appVar.displayAlert_('A list option with label "'+l+'" already exists.');this.value=c.innerText+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,c.innerText);this.title=c.innerText+":"+pPaymentsConfig.get_payment_option(c.parentNode.id,c.innerText)}else{appVar.displayAlert_('A list option with label "'+q+'" already exists.');this.value=c.innerText;this.title=c.innerText}}}}}});$(b.lastChild).mousedown(function(e){if($(this.childNodes[1]).hasClass("focus")){return}return fb_panel.managerSelector(e,this,"droplist_row","droplist_wrapper_div_id")});$(b.lastChild.childNodes[1]).dblclick(function(){fb_panel.isSelecting=false;$(this).focus()});$(b.lastChild.childNodes[0]).focus(function(){if(fb_panel.isSelecting){return false}$("#droplist_wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");return});$(b.lastChild.childNodes[1]).focus(function(){if(fb_panel.isSelecting){$(this).blur();return false}$("#droplist_wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");$(this).addClass("focus");fb_panel.inputFocused=this;$(this).select();return});$(b.lastChild.childNodes[0]).blur(function(){if($(this).parent().get(0)==$(this).parent().first().get(0)&&!fb_panel.isSelecting){$("#droplist_wrapper_div_id div").removeClass("selected_row")}return});$(b.lastChild.childNodes[1]).blur(function(){if($(this).parent().get(0)==$(this).parent().last().get(0)&&!fb_panel.isSelecting){$("#droplist_wrapper_div_id div").removeClass("selected_row")}$(this).removeClass("focus");if(!fb_panel.isSelecting){fb_panel.resetCursorPosition(this)}fb_panel.inputFocused="";return})},addDropList:function(h,b){var k="";var l=h.childNodes[0].id;var f=b;var e=b;if(pValidationConfig.get_config_value(l,"contactList")){var c=e.split(":");if(c.length==2){c[0]=jQuery.trim(c[0]);c[1]=jQuery.trim(c[1]);if(c[1]==""){c[1]="Name<you@domain.com>"}b=c[0];f=c[1];e=c[0]+":"+c[1]}else{f="Name<you@domain.com>";e=b+":Name<you@domain.com>"}}else{if(pPaymentsConfig.get_config_value(l,"type")!="none"){var c=e.split(":");if(c.length==2){c[0]=jQuery.trim(c[0]);c[1]=jQuery.trim(c[1]);if(c[1]!=""){if(pPaymentsConfig.get_config_value(l,"type")=="amount"){c[1]=parseFloat(c[1]).toFixed(2)}else{c[1]=parseInt(c[1])}if(isNaN(c[1])||c[1]<0){c[1]=(pPaymentsConfig.get_config_value(l,"type")=="amount"?"0.01":"1")}}var d=pPaymentsConfig.add_payment_option(l,c[0]);pPaymentsConfig.set_payment_option(l,c[0],c[0],c[1]);e=c[0]+":"+c[1];b=c[0];f=c[0]}else{var d=pPaymentsConfig.add_payment_option(l,b);e=b+":"+d}}}k='<option value="'+f+'" >'+b+"</option>";$(h.childNodes[0]).append(k);var a='<div class="droplist_row"><input type="checkbox" class="droplist_attr_selected "><input  class="droplist_attr_label" type=text title="'+fb_utils.htmlEncode(e)+'" value="'+fb_utils.htmlEncode(e)+'"></div>';$("#droplist_wrapper_div_id").append(a);fb_panel.initDropRow(h.lastChild.lastChild);var g=document.getElementById("droplist_wrapper_div_id");$(g.lastChild.childNodes[1]).trigger("dblclick")},initHiddenRow:function(){var a=document.getElementById("wrapper_div_id");$(a.lastChild.childNodes[0]).change(function(){var m=document.getElementById("docContainer");var o=fb_undo.getFormParams(m);var n=fb_utils.htmlEncode(fb_utils.clearNameNotValidChars(this.value));this.value=n;this.title=n;var p=document.getElementById("wrapper_div_id");var g=p.childNodes;var h=-1;for(var k=0;k<g.length;k++){if(g[k]==this.parentNode){h=k;break}}if(h>=0){var e=$("input[type=hidden]");var d=fb_utils.getElementsByNameInsensitive(n);var q=fb_utils.getElementsByNameInsensitive(n+"[]");if((this.value=="")||(d.length>0)||(q.length>0)){var c="";if(this.value==""){c="An empty hidden input name is not allowed."}else{if(this.value!=e[h].getAttribute("name")){c='An element with name "'+this.value+'" already exists.'}}this.value=e[h].getAttribute("name");this.title=e[h].getAttribute("name");if(c){appVar.displayAlert_(c)}}else{var b=e[h].getAttribute("name");var f="["+b+"],";var r=$(e[h]).clone().attr("name",this.value);$(e[h]).replaceWith(fb_utils.getouterHtml(r.get(0)));f+="["+this.value+"]";o.markupredo=fb_utils.getouterHtml(m);var l=fb_editor.JSONParser.stringify(o);appVar.pushUndo_(l);appVar.updateNameInSettings_(f)}}});$(a.lastChild.childNodes[1]).change(function(){var h=document.getElementById("docContainer");var l=fb_undo.getFormParams(h);var k=fb_utils.replaceString(this.value,'"',"");this.value=k;this.title=k;this.setAttribute("value",this.value);var m=document.getElementById("wrapper_div_id");var d=m.childNodes;var e=-1;for(var f=0;f<d.length;f++){if(d[f]==this.parentNode){e=f;break}}if(e>=0){var c=$("input[type=hidden]");if(this.value==""||this.value==c[e].getAttribute("value")){var b="";if(this.value==""){b="An empty hidden input value is not allowed."}this.value=c[e].getAttribute("value");this.title=c[e].getAttribute("value");if(b){appVar.displayAlert_(b)}}else{var c=$("input[type=hidden]");c[f].setAttribute("value",k);l.markupredo=fb_utils.getouterHtml(h);var g=fb_editor.JSONParser.stringify(l);appVar.pushUndo_(g)}}});$(a.lastChild).mousedown(function(b){if($(this.childNodes[0]).hasClass("focus")||$(this.childNodes[1]).hasClass("focus")){return}return fb_panel.managerSelector(b,this,"hidden_row","wrapper_div_id")});$(a.lastChild.childNodes[0]).dblclick(function(){fb_panel.isSelecting=false;$(this).focus()});$(a.lastChild.childNodes[1]).dblclick(function(){fb_panel.isSelecting=false;$(this).focus()});$(a.lastChild.childNodes[0]).focus(function(){if(fb_panel.isSelecting){$(this).blur();return false}$("#wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");$(this).addClass("focus");fb_panel.inputFocused=a.lastChild.childNodes[0];$(this).select()});$(a.lastChild.childNodes[0]).blur(function(){if($(this).parent().get(0)==$(this).parent().first().get(0)&&!fb_panel.isSelecting){$("#wrapper_div_id div").removeClass("selected_row")}$(this).removeClass("focus");if(!fb_panel.isSelecting){fb_panel.resetCursorPosition(this)}fb_panel.inputFocused="";return});$(a.lastChild.childNodes[1]).focus(function(){if(fb_panel.isSelecting){$(this).blur();return false}$("#wrapper_div_id div").removeClass("selected_row");$(this.parentNode).addClass("selected_row");$(this).addClass("focus");fb_panel.inputFocused=a.lastChild.childNodes[1];$(this).select()});$(a.lastChild.childNodes[1]).blur(function(){if($(this).parent().get(0)==$(this).parent().last().get(0)&&!fb_panel.isSelecting){$("#wrapper_div_id div").removeClass("selected_row")}$(this).removeClass("focus");if(!fb_panel.isSelecting){fb_panel.resetCursorPosition(this)}fb_panel.inputFocused="";return})},refreshAutofocus:function(){var h=document.forms[0].getElementsByTagName("INPUT");var d=document.forms[0].getElementsByTagName("TEXTAREA");var f=document.getElementById("fb-pp-input-autofocus");var b="";var g;g=new Option("Off","Off");f.add(g);var c=/_verification/;for(var e=0;e<h.length;e++){if((h[e].getAttribute("type")!="checkbox")&&(h[e].getAttribute("type")!="radio")&&(h[e].getAttribute("type")!="file")&&(h[e].getAttribute("type")!="hidden")&&(!c.test(h[e].name))){if(h[e].name){g=new Option(h[e].name,h[e].name);g.title=h[e].name;var a;if(appVar.platform()=="win"){a=(h[e].autofocus!=undefined)}else{a=h[e].autofocus}if(a){b=h[e].name}f.add(g)}}}for(var e=0;e<d.length;e++){if(d[e].name){g=new Option(d[e].name,d[e].name);g.title=d[e].name;var a;if(appVar.platform()=="win"){a=(d[e].autofocus!=undefined)}else{a=d[e].autofocus}if(a){b=d[e].name}f.add(g)}}if(b){fb_utils.setValueToSelected(b,f)}},updateProperties:function(){var b="#000000";var f=$("#fb-submit-button").css("font-family").replace(/\x22/g,"");var c=document.getElementById("fb-pp-input-font-submit");fb_utils.setValueToSelected(f,c);$("#fb-submit-button").css("font-family",f);var e=$("#fb-submit-button").css("font-size");e=e.substr(0,e.length-2);$("#fb-pp-input-submit-fontsize").attr("value",e);var d=$("#fb-submit-button").css("padding-top");if(d!=""){d=d.substr(0,d.length-2)}else{d="0"}$("#fb-pp-input-submit-padding").attr("value",d);$("#fb-font-color-submit div").css("background-color",$("#fb-submit-button").css("color"));if(appVar.platform()=="win"){b=$("#fb-submit-button").css("color")}else{b=fb_utils.getHexFromRGB($("#fb-submit-button").css("color"))}$("#fb-font-color-submit").ColorPickerSetColor(fb_utils.getHexFromShortHex(b));c=document.getElementById("fb-pp-input-border-style");fb_utils.setValueToSelected($("#fb-submit-button").css("border-top-style"),c);var a=$("#fb-submit-button").css("border-top-width");a=a.substr(0,a.length-2);$("#fb-pp-input-submit-bordersize").attr("value",a);$("#fb-submit-button").css("border-width",a+"px");$("#fb-border-color-submit div").css("background-color",$("#fb-submit-button").css("border-top-color"));if(appVar.platform()=="win"){b=$("#fb-submit-button").css("border-top-color")}else{b=fb_utils.getHexFromRGB($("#fb-submit-button").css("border-top-color"))}$("#fb-border-color-submit").ColorPickerSetColor(fb_utils.getHexFromShortHex(b));$("#fb-background-color-submit div").css("background-color",$("#fb-submit-button").css("background-color"));if(appVar.platform()=="win"){b=$("#fb-submit-button").css("background-color")}else{b=fb_utils.getHexFromRGB($("#fb-submit-button").css("background-color"))}$("#fb-background-color-submit").ColorPickerSetColor(fb_utils.getHexFromShortHex(b))},updateAutofocus:function(){if($("#formproperties").hasClass("current")){var c=document.getElementById("fb-pp-input-autofocus");var a=c.options.length;for(var b=a-1;b>=0;b--){c.options.remove(b)}fb_panel.refreshAutofocus()}},updateVerifyAttrs:function(b,c){if(b.childNodes[1]&&b.childNodes[1].firstChild.getAttribute("type")){var a=b.childNodes[1].firstChild.getAttribute("type");if((a=="password")||(a=="email")||(a=="url")){if(b.childNodes[3]){pValidationConfig.remove_config_id(b.childNodes[3].firstChild.id);b.childNodes[3].firstChild.id=b.childNodes[1].firstChild.id+"_verification";b.childNodes[3].firstChild.name=b.childNodes[1].firstChild.name+"_verification";pValidationConfig.set_config_id(b.childNodes[1].firstChild.id,c.validation_object);pValidationConfig.set_config_type(b.childNodes[1].firstChild.id,"equalTo",b.childNodes[3].firstChild.id);return}}}},resetCursorPosition:function(b,c){if(appVar.platform()!="win"){return}var d=c?c:1;var a=b.value;b.value="";setTimeout(function(){b.value=a},c)},applyBackgroundHover:function(a){window.setTimeout(function(){var b=$("#"+a).css("background-image");var c=pValidationConfig.get_config_subtype(a,"hover","background-image");if(c!="none"&&c!=""){var e=c.substr(c.indexOf("(")+1,c.indexOf(")")-c.indexOf("(")-1);var d=b.substr(b.indexOf("(")+1,b.indexOf(")")-b.indexOf("(")-1);$("<img/>").attr("src",e);$("<img/>").attr("src",d)}$("#"+a).hover(function(){if(c!="none"&&c!=""){$(this).css("background-image",c)}else{if(c=="none"){$(this).css("background-image",b)}else{$(this).css("background-image","")}}},function(){$(this).css("background-image",b)})},1000)},addLegendDivider:function(){fb_panel.add('<hr class="tool_group_divider">')},updateRequiredRadio:function(a){if(!pValidationConfig.get_config_value($(a).children()[1].childNodes[0].childNodes[0].id,"required")){return}$.each($("input",a),function(c,b){$(b).removeAttr("required");$(b).removeAttr("checked")});$($(a).children()[1].childNodes[0].childNodes[0]).attr("required","required")}};var fb_views={heading:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Title/Heading");fb_edits.label(a[0].firstChild.childNodes[0]);fb_edits.alignment(a[0].firstChild);fb_edits.fontFamily(a[0].firstChild.firstChild);fb_edits.fontSize(a[0].firstChild.firstChild);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.itemReset(a);fb_edits.deleteButton(a)},plain_text:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Plain Text");fb_edits.statictext(a[0].firstChild.childNodes[0]);fb_edits.alignment(a[0].firstChild);fb_edits.fontFamily(a[0].firstChild.firstChild);fb_edits.fontSize(a[0].firstChild.firstChild);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.itemReset(a);fb_edits.deleteButton(a)},text_field:function(a){fb_panel.clear();switch(a[0].childNodes[1].firstChild.getAttribute("type")){case"text":fb_panel.addLegendToPanel("Text Field");break;case"email":fb_panel.addLegendToPanel("Email Address");break;case"url":fb_panel.addLegendToPanel("Web Address");break;case"password":fb_panel.addLegendToPanel("Password");break}fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.placeholder(a[0].childNodes[1].firstChild);fb_edits.minLength(a[0].childNodes[1].childNodes[0]);fb_edits.maxLength(a[0].childNodes[1].childNodes[0]);fb_edits.required(a[0].childNodes[1].childNodes[0]);fb_edits.readonly(a[0].childNodes[1].childNodes[0]);fb_edits.autocomplete(a[0].childNodes[1].firstChild);fb_edits.verification(a[0].childNodes[1].firstChild);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a);fb_panel.disableCheckOptions()},textarea:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Text Area");fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.placeholder(a[0].childNodes[1].firstChild);fb_edits.maxLength(a[0].childNodes[1].childNodes[0]);fb_edits.textareawidth(a[0].childNodes[1].firstChild);fb_edits.textareaheight(a[0].childNodes[1].firstChild);fb_edits.required(a[0].childNodes[1].childNodes[0]);fb_edits.readonly(a[0].childNodes[1].childNodes[0]);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a);fb_panel.disableCheckOptions()},number:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Number");fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.decimals(a[0].childNodes[1].firstChild);fb_edits.minValue(a[0].childNodes[1].firstChild);fb_edits.maxValue(a[0].childNodes[1].firstChild);fb_edits.step(a[0].childNodes[1].firstChild);fb_edits.required(a[0].childNodes[1].childNodes[0]);fb_edits.autocomplete(a[0].childNodes[1].firstChild);fb_edits.fieldPayments(a[0].childNodes[1].childNodes[0]);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a);fb_panel.disableCheckOptions()},upload_file:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Upload File");fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.maxupload(a[0].childNodes[1].childNodes[0]);fb_edits.fileExtensions(a[0].childNodes[1].childNodes[0]);fb_edits.addFileExtension(a[0].childNodes[1].childNodes[0]);fb_edits.removeFileExtension(a[0].childNodes[1].childNodes[0]);fb_edits.server(a[0].childNodes[1].childNodes[0]);fb_edits.database(a[0].childNodes[1].childNodes[0]);fb_edits.mail(a[0].childNodes[1].childNodes[0]);fb_edits.required(a[0].childNodes[1].childNodes[0],true);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a)},date:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Date");fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.rangeDate(a[0].childNodes[1].childNodes[0]);fb_edits.formatDate(a[0].childNodes[1].childNodes[0]);fb_edits.required(a[0].childNodes[1].childNodes[0],true);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a)},checkboxes:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Checkboxes");fb_edits.label(a,a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.nameGroup($(a).children()[1]);fb_edits.alignmentCheckRadio(a);fb_edits.checkboxes($(a).children()[1]);fb_edits.addCheckbox($(a).children()[1]);fb_edits.removeCheckbox($(a).children()[1]);fb_edits.moveUpCheckbox($(a).children()[1]);fb_edits.moveDownCheckbox($(a).children()[1]);fb_edits.predefinedList("properties_object_panel",$(a).children()[1]);fb_edits.requiredChecks(a[0].childNodes[1].childNodes[0].firstChild);fb_edits.fieldPayments(a[0].childNodes[1].childNodes[0]);fb_edits.fontFamily(a[0].childNodes[1]);fb_edits.fontSize(a[0].childNodes[1]);fb_edits.checkradiofont(a[0].childNodes[1]);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hintRadioCheck(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a)},radiobuttons:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Radio Buttons");fb_edits.label(a,a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.nameGroup($(a).children()[1]);fb_edits.alignmentCheckRadio(a);fb_edits.radiobuttons($(a).children()[1]);fb_edits.addRadio($(a).children()[1]);fb_edits.removeRadio($(a).children()[1]);fb_edits.moveUpRadio($(a).children()[1]);fb_edits.moveDownRadio($(a).children()[1]);fb_edits.requireRadio($(a).children()[1]);fb_edits.predefinedList("properties_object_panel",$(a).children()[1]);fb_edits.fieldPayments(a[0].childNodes[1].childNodes[0]);fb_edits.fontFamily(a[0].childNodes[1]);fb_edits.fontSize(a[0].childNodes[1]);fb_edits.checkradiofont(a[0].childNodes[1]);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hintRadioCheck(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a)},dropdown:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Drop Down");fb_edits.label(a,a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.dropDownListBox($(a).children()[1]);fb_edits.addDropList($(a).children()[1]);fb_edits.removeDropList($(a).children()[1]);fb_edits.moveUpDropList($(a).children()[1]);fb_edits.moveDownDropList($(a).children()[1]);fb_edits.predefinedList("properties_object_panel",$(a).children()[1]);fb_edits.requiredDrop(a[0].childNodes[1].childNodes[0]);fb_edits.contactList(a[0].childNodes[1].childNodes[0]);fb_edits.fieldPayments(a[0].childNodes[1].childNodes[0]);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hintDropList(a[0].childNodes[1].firstChild);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a)},listbox:function(a){fb_panel.clear();fb_panel.addLegendToPanel("List Box");fb_edits.label(a,a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.dropDownListBox($(a).children()[1]);fb_edits.addDropList($(a).children()[1]);fb_edits.removeDropList($(a).children()[1]);fb_edits.moveUpDropList($(a).children()[1]);fb_edits.moveDownDropList($(a).children()[1]);fb_edits.predefinedList("properties_object_panel",$(a).children()[1]);fb_edits.required(a[0].childNodes[1].childNodes[0],true);fb_edits.fieldPayments(a[0].childNodes[1].childNodes[0]);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hintDropList(a[0].childNodes[1].firstChild);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a)},sectionbreak:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Section Break");fb_edits.height_border(a[0].firstChild.childNodes[0]);fb_edits.width(a[0].firstChild.childNodes[0]);fb_edits.borderstyle(a[0].firstChild.childNodes[0]);fb_edits.bordercolor(a[0].firstChild.childNodes[0]);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.itemReset(a);fb_edits.deleteButton(a)},spacer:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Spacer");fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.height(a);fb_edits.itemReset(a);fb_edits.deleteButton(a)},image:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Image");fb_edits.loadImageElementElementSrc(a[0].firstChild.firstChild);fb_edits.imageLink(a);fb_edits.alt(a);fb_edits.target(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.itemReset(a);fb_edits.deleteButton(a)},phone:function(a){fb_panel.clear();fb_panel.addLegendToPanel("Phone Number");fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.placeholder(a[0].childNodes[1].firstChild);fb_edits.phone(a[0].childNodes[1].firstChild);fb_edits.required(a[0].childNodes[1].childNodes[0]);fb_edits.readonly(a[0].childNodes[1].childNodes[0]);fb_edits.autocomplete(a[0].childNodes[1].firstChild);fb_edits.verification(a[0].childNodes[1].firstChild);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a);fb_panel.disableCheckOptions()},regex:function(a){fb_panel.clear();fb_edits.label($(a).children(),a[0].firstChild.childNodes[0]);fb_edits.fontColor(a[0].firstChild.childNodes[0]);fb_edits.fontWeight(a[0].firstChild.firstChild);fb_edits.fontItalic(a[0].firstChild.firstChild);fb_edits.name(a[0].childNodes[1].childNodes[0]);fb_edits.placeholder(a[0].childNodes[1].firstChild);fb_edits.maxLength(a[0].childNodes[1].childNodes[0]);fb_edits.regex(a[0].childNodes[1].firstChild);fb_edits.required(a[0].childNodes[1].childNodes[0]);fb_edits.autocomplete(a[0].childNodes[1].firstChild);fb_edits.verification(a[0].childNodes[1].firstChild);fb_edits.itemWidth(a);fb_edits.paddingTop(a);fb_edits.paddingRight(a);fb_edits.paddingBottom(a);fb_edits.paddingLeft(a);fb_panel.addPaddingLabels();fb_edits.hint(a[0].childNodes[1]);fb_edits.error(a[0].childNodes[1].childNodes[0]);fb_edits.itemReset(a);fb_edits.deleteButton(a);fb_panel.disableCheckOptions()},submit_button:function(){fb_panel.clear();fb_panel.addLegendToPanel("Footer Properties");fb_edits.backGroundColor($("#fb-submit-button-div"));fb_edits.loadGeneralBackGroundImageForElement($("#fb-submit-button-div"));fb_edits.backGroundHorizontalPostion($("#fb-submit-button-div"));fb_edits.backGroundVerticalPostion($("#fb-submit-button-div"));fb_edits.backGroundRepeat($("#fb-submit-button-div"));fb_edits.height($("#fb-submit-button-div"));fb_edits.paddingTop($("#fb-submit-button-div"));fb_edits.paddingRight($("#fb-submit-button-div"));fb_edits.paddingBottom($("#fb-submit-button-div"));fb_edits.paddingLeft($("#fb-submit-button-div"));fb_panel.addPaddingLabels();fb_edits.footerReset();fb_panel.addSpecialLegendToPanelEnter("Submit Button");fb_edits.submitValue();fb_edits.imagesAlign($("#fb-submit-button-div"));fb_edits.imagesVerticalAlign($("#fb-submit-button-div"));fb_edits.submitFontFamily();fb_edits.submitFontSize();fb_edits.submitFontColor();fb_edits.loadBackGroundImageForElement($("#fb-submit-button"));fb_edits.loadHoverBackGroundImageForElement($("#fb-submit-button"));fb_edits.submitPaddingTop();fb_edits.submitPaddingRight();fb_edits.submitPaddingBottom();fb_edits.submitPaddingLeft();fb_panel.addPaddingLabels();fb_edits.submitBackgroundColor();fb_edits.submitReset();fb_edits.submitStandard()},logo:function(){fb_panel.clear();fb_panel.addLegendToPanel("Header Properties");fb_edits.backGroundColor($("#fb-form-header1"));fb_edits.loadGeneralBackGroundImageForElement($("#fb-form-header1"));fb_edits.backGroundHorizontalPostion($("#fb-form-header1"));fb_edits.backGroundVerticalPostion($("#fb-form-header1"));fb_edits.backGroundRepeat($("#fb-form-header1"));fb_edits.height($("#fb-form-header1"));fb_edits.paddingTop($("#fb-form-header1"));fb_edits.paddingRight($("#fb-form-header1"));fb_edits.paddingBottom($("#fb-form-header1"));fb_edits.paddingLeft($("#fb-form-header1"));fb_panel.addPaddingLabels();fb_edits.headerReset();fb_panel.addSpecialLegendToPanelEnter("Logo Properties");fb_edits.loadBackGroundImageForElement($("#fb-logo1"));fb_edits.alt($("#fb-form-header1"));fb_edits.imageLink($("#fb-form-header1"));fb_edits.target($("#fb-form-header1"));fb_edits.imagesAlign($("#fb-form-header1"));fb_edits.imagesVerticalAlign($("#fb-form-header1"));fb_panel.disableLogoOptions()},form:function(){fb_panel.clearForm();fb_panel.addToForm('<fieldset id="form_properties_controls"></fieldset>');fb_panel.addToFormProperties(" <legend>Form Properties</legend>");fb_edits.backGroundColor($("#docContainer"));fb_edits.loadGeneralBackGroundImageForElement($("#docContainer"));fb_edits.backGroundHorizontalPostion($("#docContainer"));fb_edits.backGroundVerticalPostion($("#docContainer"));fb_edits.backGroundRepeat($("#docContainer"));fb_edits.formBorderStyle();fb_edits.formBorderSize();fb_edits.formBorderColor();fb_edits.formFontFamily();fb_edits.formFontSize();fb_edits.formFontColor();fb_edits.labelAlignment();fb_edits.itemFormWidth();fb_edits.formWidth();fb_edits.formMargins();fb_edits.autofocus();fb_edits.maxNumErrors();fb_edits.captcha();fb_edits.showHints();fb_edits.hiddenFields();fb_edits.addHidden();fb_edits.removeHidden();fb_edits.formReset()}};var fb_utils={setValueToSelected:function(c,b){if(b){for(var a=0;a<b.options.length;a++){if(c.toLowerCase()==b.options[a].value.toLowerCase()){b.options[a].selected=true;break}}}},hasNotNumericChars:function(a){for(var b=0;b<a.length;b++){if(isNaN(a.charAt(b))){return true}}return false},getHexFromRGB:function(d){d=fb_utils.replaceString(d,"rgba","rgb");var g=d.substring(4,d.length-1);var c=g.split(",");var b="#";if(c.length==4){c[0]=((1-c[3])*255)+(c[3]*c[0]);c[1]=((1-c[3])*255)+(c[3]*c[1]);c[2]=((1-c[3])*255)+(c[3]*c[2])}for(var f=0;f<c.length&&f<3;f++){var a=parseInt(c[f]);if(a==0){b+="00"}else{var e=a.toString(16);if(e.length==1){e="0"+e}b+=e}}return b},getHexFromShortHex:function(b){if(b.length==4){var a="";a=b.substr(0,1)+b.substr(1,1)+b.substr(1,1)+b.substr(2,1)+b.substr(2,1)+b.substr(3,1)+b.substr(3,1);b=a}return b},setScrollAtBottom:function(b,c){var d=document.getElementById(b);$("."+c).removeClass("selected_row");$(d.lastChild).addClass("selected_row");var a=0;a=$("#"+b).children().last().outerHeight();a*=$("#"+b).children().length;$(d).scrollTop(a)},setNonStandardClass:function(){if(!$("#fb-submit-button").hasClass("non-standard")){$("#fb-submit-button").addClass("non-standard")}},clearNameNotValidChars:function(b){var a="";var d=0;if(b){for(j=0;j<b.length;j++){d=b.charCodeAt(j);if((d>=65&&d<=90)||(d>=97&&d<=122)){a+=b.charAt(j);break}}for(var c=j+1;c<b.length;c++){if((b.charAt(c)=="&")||(b.charAt(c)=='"')||(b.charAt(c)=="<")||(b.charAt(c)==">")){continue}else{d=b.charCodeAt(c);if((d>=48&&d<=57)||(d>=97&&d<=122)||(d>=65&&d<=90)||(d==45)||(d==95)||(d==58)){a+=b.charAt(c)}}}}return a},clearNotNumericChars:function(b){var a="";for(var c=0;c<b.length;c++){if(!isNaN(b.charAt(c))){a+=b.charAt(c)}}return parseInt(a)},clearFileNameNotValidChars:function(b){var a="";var d=false;if(b){for(var c=0;c<b.length;c++){if((b.charAt(c)=="&")||(b.charAt(c)=="|")||(b.charAt(c)=="<")||(b.charAt(c)==">"||(b.charAt(c)=='"'))||(b.charAt(c)=="\\")||(b.charAt(c)=="/")||(b.charAt(c)==":")||(b.charAt(c)=="*")||(b.charAt(c)=="?")){d=true;continue}else{if(b.charAt(c)!=" "){a+=b.charAt(c)}}}}if(d){appVar.displayAlert_('The following characters are not valid:  & < > | " \\ / : * ? ')}return a},existsFileTypeName:function(e,c){var a=pValidationConfig.get_config_value(c.id,"accept");var d=a.split("|");for(var b=0;b<d.length;b++){if(d[b]==e){return true}}return false},existsCheckRadioName:function(g,f,d){var c=f.firstChild.firstChild.id;var h=f.childNodes;if(pPaymentsConfig.get_config_value(c,"type")!="none"){var a=g.split(":");var b=g;if(a.length==2){g=jQuery.trim(a[0]);b=jQuery.trim(a[1])}for(var e=0;e<h.length;e++){if(h[e].childNodes[1].innerText==g){if(typeof d=="undefined"){return true}else{if(d==e){continue}else{return true}}}}return false}else{for(var e=0;e<h.length;e++){if(h[e].childNodes[1].innerText==g){return true}}return false}},existsDropListBoxName:function(h,g,d){var c=g.firstChild.id;var f=g.childNodes[0].childNodes;if(pValidationConfig.get_config_value(c,"contactList")||pPaymentsConfig.get_config_value(c,"type")!="none"){var a=h.split(":");var b=h;if(a.length==2){h=jQuery.trim(a[0]);b=jQuery.trim(a[1])}for(var e=0;e<f.length;e++){if(f[e].text==h){if(typeof d=="undefined"){return true}else{if(d==e){continue}else{return true}}}}return false}else{for(var e=0;e<f.length;e++){if(f[e].text==h){return true}}return false}},existsHiddenFieldName:function(c){var b=$("input:hidden").get();for(var a=0;a<b.length;a++){if(b[a].name==c){return true}}return false},createDiv:function(e,d,b,c){var a="<div ";if(e){a+='id="'+e+'" '}if(d){a+='class="'+d+'"'}if(b){a+='style="'+b+'"'}a+=">";if(c){a+=c}a+="</div>";return a},createImg:function(e,d,b,c){var a="<img ";if(e){a+='id="'+e+'" '}if(d){a+='class="'+d+'"'}if(b){a+='style="'+b+'"'}if(c){a+='src="'+c+'"'}a+="/>";return a},cloneObject:function(c){if(c==null||typeof(c)!="object"){return c}var a={};for(var b in c){a[b]=fb_utils.cloneObject(c[b])}return a},replaceString:function(a,g,e){if(a==null||typeof a=="undefined"){return""}if(g==null||e==null||typeof g=="undefined"||typeof e=="undefined"){return a}a=a.toString();g=g.toString();e=e.toString();var c=a.length;var f=g.length;if((c==0)||(f==0)){return a}var b=a.indexOf(g);if((b==null)&&(g!=a.substring(0,f))){return a}if(b==-1){return a}var d=a.substring(0,b)+e;if(b+f<c){d+=fb_utils.replaceString(a.substring(b+f,c),g,e)}return d},htmlEncode:function(a){Encoder.EncodeType="entity";return Encoder.htmlEncode(a)},htmlDecode:function(a){Encoder.EncodeType="entity";a=fb_utils.replaceString(a,"\n","__FB_MARKER_CR__");a=Encoder.htmlDecode(a);a=fb_utils.replaceString(a,"__FB_MARKER_CR__","\n");return a},htmlEncodeOuter:function(a,b){if(b){return fb_utils.htmlEncode(a)}else{return $("<div/>").text(a).html().replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},htmlDecodeOuter:function(a,b){if(b){return fb_utils.htmlDecode(a)}else{return $("<div/>").html(a).text()}},getouterHtml:function(b,a,d){if(b){var c=b;if(a){c=$(b).clone()[0]}return fb_utils.getouterHtmlLoop(c,"",d)}},getouterHtmlLoop:function(b,q,t){var d=$(b);var r=b.attributes;var e=b.tagName.toLowerCase();var g=b.type;var h=b.id;var c=false;var n=false;var m=false;var k=false;var x=appVar.projectName();var p=x!=""?x+"/common":"common";var w=x!=""?x+"/theme":"theme";q+="<"+e;for(var u=0;u<r.length;u++){if(r[u].specified&&r[u].name.indexOf("jQuery")==-1){var z=r[u].name.toLowerCase();var v=d.attr(r[u].name);if(z=="sizset"||z=="sizcache"||z=="size"){continue}else{if(z=="type"){c=true}else{if(z=="enctype"){v="multipart/form-data"}else{if(z=="value"){n=true;continue}else{if(z=="name"){m=true}else{if(z=="placeholder"){q+=" "+z+'="'+fb_utils.htmlEncodeOuter(fb_utils.htmlDecodeOuter(v),true)+'"';continue}else{if(z=="data-hint"){q+=" "+z+'="'+fb_utils.htmlEncodeOuter(fb_utils.htmlDecodeOuter(v),true)+'"';continue}else{if(z=="style"||((z=="src")&&(appVar.platform()=="win"))){var y=v.search(/file/i);var f=v.search(p);if(f==-1){f=v.search("common");if(f==-1){f=v.search(w)}if(f==-1){f=v.search("theme")}}if(y>=0){var l=v.substr(y,f-y);v=v.replace(l,"")}if(z=="style"&&v.search(/background-repeat/i)){if(v.search("no-repeat no-repeat")!=-1){v=v.replace("no-repeat no-repeat","no-repeat")}else{if(v.search("repeat no-repeat")!=-1){v=v.replace("repeat no-repeat","repeat-x")}else{if(v.search("no-repeat repeat")!=-1){v=v.replace("no-repeat repeat","repeat-y")}}}}if(z=="style"&&v.search(/font-family/i)){if(v.search("auto")!=-1){v=v.replace("auto","")}}}}}}}}}}if(e=="input"||e=="select"||e=="textarea"||e=="option"){if(z=="selected"){q+=" selected";k=true;continue}else{if(z=="multiple"){q+=" multiple";continue}else{if(z=="checked"){q+=" checked";continue}else{if(z=="required"){q+=" required";continue}else{if(z=="disabled"){q+=" disabled";continue}else{if(z=="autofocus"){q+=" autofocus";continue}}}}}}}q+=" "+z+'="'+v+'"'}}if(!m&&(e=="input"||e=="textarea"||e=="option"||e=="select")&&d.attr("name")){q+=' name="'+d.attr("name")+'"'}if(!c&&e=="input"&&h.length&&g!="hidden"){if(h.search("number")!=-1){q+=' type="number"'}else{if(h.search("email")!=-1){q+=' type="email"'}else{if(h.search("url")!=-1){q+=' type="url"'}else{if(h.search("tel")!=-1){q+=' type="tel"'}else{if(h.search("date")!=-1){q+=' type="date"'}else{if(h.search("text")!=-1||h.search("regex")!=-1){q+=' type="text"'}}}}}}}if((g=="hidden"||g=="submit"||g=="checkbox"||g=="radio"||e=="option")&&(n||d.attr("value"))){q+=' value="'+jQuery.trim(fb_utils.htmlEncodeOuter(fb_utils.htmlDecodeOuter(d.attr("value"),true),t))+'" '}if(e=="option"&&!k&&d.attr("selected")){q+=" selected"}if(e=="input"){q+="/>";return q}else{if(e=="img"){q+="/>";return q}else{if(e=="hr"){q+=">";return q}else{if(e=="textarea"){q+="></textarea>";return q}else{if(e=="p"||e=="h2"||d.hasClass("fb-hint")){var o=d.html();o=fb_utils.replaceString(o,"<BR>","__FB_MARKER_CR__");o=fb_utils.replaceString(o,"<br>","__FB_MARKER_CR__");o=fb_utils.replaceString(o,"&","__FB_MARKER_AMP__");o=fb_utils.htmlEncodeOuter(o,t);o=fb_utils.replaceString(o,"__FB_MARKER_CR__","<BR>");o=fb_utils.replaceString(o,"__FB_MARKER_AMP__","&");q+=">"+o+"</"+e+">";return q}else{q+=">"}}}}}var a=d.children();if((a.length==0&&d.text()=="")){q+="</"+e+">";return q}if(a.length||d.text()!=""){for(u=0;u<a.length;u++){q+=fb_utils.getouterHtmlLoop(a[u],"",t)}if(a.length==0&&e!="script"&&e!="noscript"){q+=fb_utils.htmlEncodeOuter(d.text(),t)}else{if(e=="script"||e=="noscript"){q+=d.text()}}q+="</"+e+">"}return q},getAllImages:function(){var e=new Array();var k=appVar.platform()=="win"?2:1;$.each($("#docContainer, #docContainer *"),function(l,m){var o;if(m.tagName.toLowerCase()==="img"){o=$(m).attr("src")}else{var n=$(m).css("background-image");if(n.substring(0,3)==="url"){o=n.substr(0,n.length-k)}}if(o){o=o.split("/").pop();if($.inArray(o,e)==-1){e.push(o)}}});var f=null;for(var d=0;d<document.styleSheets.length;d++){if(document.styleSheets[d].href==$("#theme").get(0).href){f=document.styleSheets[d];var h=f.cssRules?f.cssRules:f.rules;if(h){var b="#fb-submit-button:hover";for(var c=h.length-1;c>=0;c--){if((jQuery.trim(h[c].selectorText.toLowerCase())==b)&&h[c].style.backgroundImage.length){var a=h[c].style.backgroundImage;a=a.split("/").pop();a=a.substr(0,a.length-k);e.push(a);break}}}}}var g=pValidationConfig.get_config_subtype("fb-submit-button","hover","background-image");if(g){e.push(g.substr(0,g.length-1).split("/").pop())}return e},updateDecimals:function(e,c){var a=parseFloat(parseFloat($("#fb-pp-input-min").attr("value")).toFixed(6));var b=parseFloat(parseFloat($("#fb-pp-input-max").attr("value")).toFixed(6));var d=parseFloat(parseFloat($("#fb-pp-input-step").attr("value")).toFixed(6));if(((Math.log(d)/Math.LN10)).toFixed(6)%1==0){d=(1/Math.pow(10,c));$("#fb-pp-input-step").attr("value",d);var f=[a,b,d];pValidationConfig.set_config_type(e.id,"range",f);$(e).attr("step",d)}},getElementsByNameInsensitive:function(b){var a=[];$.each($("#docContainer input, #docContainer select, #docContainer textarea"),function(d,c){if(c.name&&b.toLowerCase()==c.name.toLowerCase()){a.push(c)}});return a}};var fb_edits={deleteButton:function(d){var b='<div class="element_property_actions">			<hr class="tool_group_divider">			<div id="fb-bt-delete" class="action_tool" title="Delete the selected element">Delete</div>			</div>';var c='<div id="fb-bt-delete" class="action_tool" title="Delete the selected element">Delete</div>';fb_panel.add(c);if($("#fb-bt-delete").prev().hasClass("element_property_actions")){var a=$("#fb-bt-delete").prev();$("#fb-bt-delete").remove();a.append(c)}else{$("#fb-bt-delete").remove();fb_panel.add(b)}$("#fb-bt-delete").click(function(){var e="";var m="";var n=null;var g={};var f="";g.type_operation="delete";g.markup=fb_utils.getouterHtml(d[0]);var h=$(d).parent()[0];g.id_father=h.id;g.id_element=$(d).attr("id");if($(d).prev()[0]){e=$($(d).prev()[0]).attr("id")}g.id_previous_brother=e;if(d[0].childNodes[1]){if($(d[0].childNodes[1]).hasClass("fb-radio")||$(d[0].childNodes[1]).hasClass("fb-checkbox")){m=d[0].childNodes[1].firstChild.firstChild.id;f=d[0].childNodes[1].firstChild.firstChild.name}else{m=d[0].childNodes[1].firstChild.id;f=d[0].childNodes[1].firstChild.name}}if(f){if(f.substr(f.length-2,f.length)=="[]"){f=f.substr(0,f.length-2)}var l="["+f+"]";appVar.updateNameInSettings_(l)}g.validation_object_id=m;g.validation_object=pValidationConfig.get_config_id(m);g.payments_object=pPaymentsConfig.get_config_id(m);var k=fb_editor.JSONParser.stringify(g);if(d[0].nextSibling){n=d[0].nextSibling}else{if(d[0].previousSibling){n=d[0].previousSibling}}$(d).remove();pValidationConfig.remove_config_id(m);pPaymentsConfig.remove_config_id(m);fb_panel.clear();fb_container.itemSelected="";fb_editor.nextSelectedItem(n);appVar.pushUndo_(k)})},backGroundColor:function(h){var e=fb_utils.getHexFromShortHex($(h).removeClass("selected-object").css("background-color"));$(h).addClass("selected-object");var c=e=="rgba(0, 0, 0, 0)"||e=="transparent"?'checked="true"':"";this.markup='<div class="label_color">							<span class="primary_left">Color:</span>							<div class="color_right fb-color-control" id="fb-form-elements-bg-color"><div></div></div>							<label class="color_side">								<input id="fb-pp-input-color-transparent" type="checkbox" '+c+' maxlength="125" />								Transparent							</label>						</div>';var k=h[0].id;if(k=="docContainer"){fb_panel.addToFormProperties(this.markup)}else{fb_panel.add(this.markup)}var g=$(h).css("background-color");$("#fb-form-elements-bg-color div").css("background-color",g);var b=g;var d=g;if(/rgb/.test(d)){d=fb_utils.getHexFromRGB(g)}if($("#fb-pp-input-color-transparent").attr("checked")){$("#fb-form-elements-bg-color div").css("background-image","url('editordata/images/color_transparent_30.png')")}var a="";var f={};$("#fb-form-elements-bg-color").ColorPicker({color:d,onShow:function(l){if(k=="docContainer"){a=document.getElementById("docContainer");f=fb_undo.getFormParams(a)}if(k=="fb-submit-button-div"){a=document.getElementById("fb-submit-button-div");f=fb_undo.getSubmitParams(a)}if(k=="fb-form-header1"){a=document.getElementById("fb-form-header1");f=fb_undo.getLogoAndHeaderParams(a)}$(l).fadeIn(0);$(l).find("input").focus(function(){fb_panel.inputFocused=this});$(l).find("input").blur(function(){fb_panel.inputFocused=""})},onHide:function(m){$(m).fadeOut(0);if(b!=$("#fb-form-elements-bg-color div").css("background-color")){f.markupredo=fb_utils.getouterHtml(a);b=$("#fb-form-elements-bg-color div").css("background-color");var l=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(l)}},onChange:function(l,n,m){$("#fb-form-elements-bg-color div").css("background-image","none");$("#fb-pp-input-color-transparent").attr("checked","");$("#fb-form-elements-bg-color div").css("background-color","#"+n);$(h).css("background-color","#"+n)}});$("#fb-pp-input-color-transparent").change(function(){var l=$("#fb-pp-input-color-transparent");if(k=="docContainer"){a=document.getElementById("docContainer");f=fb_undo.getFormParams(a)}if(k=="fb-submit-button-div"){a=document.getElementById("fb-submit-button-div");f=fb_undo.getSubmitParams(a)}if(k=="fb-form-header1"){a=document.getElementById("fb-form-header1");f=fb_undo.getLogoAndHeaderParams(a)}if(l.attr("checked")){$(h).css("background-color","transparent");$("#fb-form-elements-bg-color div").css("background-image","url('editordata/images/color_transparent_30.png')")}else{$("#fb-form-elements-bg-color div").css("background-image","url('none')");if(b=="transparent"||b=="rgba(0, 0, 0, 0)"){b="#D3D3D3"}$(h).css("background-color",b);$("#fb-form-elements-bg-color").css("display","inline");$("#fb-form-elements-bg-color").ColorPickerSetColor(fb_utils.getHexFromShortHex(b));$("#fb-form-elements-bg-color div").css("background-color",b)}if(b!=$(h).css("background-color")){f.markupredo=fb_utils.getouterHtml(a);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}})},backGroundRepeat:function(c){var e=$(c).css("background-repeat");var d="";var b={};var a=c[0].id;this.markup='<label class="label_combo">							<select id="fb-pp-input-bg-repeat" class="combo_right element_property_actions" >								<option title="Repeat" value = "repeat">Repeat</option>								<option title="Repeat Vertical" value = "repeat-y">Repeat Vertical</option>								<option title="Repeat Horizontal" value = "repeat-x">Repeat Horizontal</option>								<option title="No Repeat" value = "no-repeat">No Repeat</option>							 </select>						</label>';if(a=="docContainer"){fb_panel.addToFormProperties(this.markup)}else{fb_panel.add(this.markup)}var f=document.getElementById("fb-pp-input-bg-repeat");fb_utils.setValueToSelected(e,f);if($("#fb-bg-image-name-general").html()=="none"){$("#fb-pp-input-bg-repeat").attr("disabled",true)}else{$("#fb-pp-input-bg-repeat").removeAttr("disabled")}$("#fb-pp-input-bg-repeat").change(function(){fb_editor.backgroundActive();if(a=="docContainer"){d=document.getElementById("docContainer");b=fb_undo.getFormParams(d)}if(a=="fb-submit-button-div"){d=document.getElementById("fb-submit-button-div");b=fb_undo.getSubmitParams(d)}if(a=="fb-form-header1"){d=document.getElementById("fb-form-header1");b=fb_undo.getLogoAndHeaderParams(d)}var g=$("#fb-pp-input-bg-repeat").attr("value");$("#"+a).css("background-repeat","");$("#"+a).css("background-repeat",g);b.markupredo=fb_utils.getouterHtml(d);appVar.pushUndo_(fb_editor.JSONParser.stringify(b))})},backGroundHorizontalPostion:function(h){var f=$(h).css("background-position-x");var d="";var g={};var k=h[0].id;var e=(f.search("px")!=-1)?f=f.substr(0,f.length-2):0;var b=f;this.markup='<label class="label_grouped_main">							<select id="fb-pp-input-bg-horizontal-position" class="combo_right element_property_actions" >								<option value = "0%">Left</option>								<option value = "50%">Center</option>								<option value = "100%">Right</option>							 </select>						</label>						<label class="label_grouped">							<input id="fb-pp-input-bg-horizontal-position-pixels" class="input_right" type="text" value="'+e+'"min="0" >							<span>pixels</span>						</label>';if(k=="docContainer"){fb_panel.addToFormProperties(this.markup)}else{fb_panel.add(this.markup)}var c=document.getElementById("fb-pp-input-bg-horizontal-position");fb_utils.setValueToSelected(f,c);if($("#fb-bg-image-name-general").html()=="none"){$("#fb-pp-input-bg-horizontal-position").attr("disabled",true);$("#fb-pp-input-bg-horizontal-position-pixels").attr("disabled",true)}else{$("#fb-pp-input-bg-horizontal-position").removeAttr("disabled");$("#fb-pp-input-bg-horizontal-position-pixels").removeAttr("disabled")}$("#fb-pp-input-bg-horizontal-position").change(function(){fb_editor.backgroundActive();if(k=="docContainer"){d=document.getElementById("docContainer");g=fb_undo.getFormParams(d)}if(k=="fb-submit-button-div"){d=document.getElementById("fb-submit-button-div");g=fb_undo.getSubmitParams(d)}if(k=="fb-form-header1"){d=document.getElementById("fb-form-header1");g=fb_undo.getLogoAndHeaderParams(d)}var l=$("#fb-pp-input-bg-horizontal-position").attr("value");$("#"+k).css("background-position-x",l);$("#fb-pp-input-bg-horizontal-position-pixels").attr("value",0);g.markupredo=fb_utils.getouterHtml(d);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))});function a(){if((newvalue+"px")!=$(h).css("background-position-x")){if(k=="docContainer"){d=document.getElementById("docContainer");g=fb_undo.getFormParams(d)}if(k=="fb-submit-button-div"){d=document.getElementById("fb-submit-button-div");g=fb_undo.getSubmitParams(d)}if(k=="fb-form-header1"){d=document.getElementById("fb-form-header1");g=fb_undo.getLogoAndHeaderParams(d)}b=newvalue;$(h).css("background-position-x",newvalue+"px");g.markupredo=fb_utils.getouterHtml(d);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))}else{$("#fb-pp-input-bg-horizontal-position-pixels").attr("value",b);$(h).css("background-position-x",b)}}$("#fb-pp-input-bg-horizontal-position-pixels").change(function(){var l="";var m=$("#fb-pp-input-bg-horizontal-position-pixels").attr("value");for(var n=0;n<m.length;n++){if(!isNaN(m.charAt(n))||m.charAt(n)=="-"){l+=m.charAt(n)}}newvalue=parseInt(l);if(isNaN(newvalue)){appVar.displayAlert_("You must provide a number for this value.");$("#fb-pp-input-bg-horizontal-position-pixels").val(parseInt(b));return}$("#fb-pp-input-bg-horizontal-position-pixels").attr("value",newvalue);var o=$("#fb-pp-input-bg-horizontal-position-pixels").attr("value");if(o+"px"!=$(h).css("background-position-x")){a()}});$("#fb-pp-input-bg-horizontal-position-pixels").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-bg-horizontal-position-pixels");return});$("#fb-pp-input-bg-horizontal-position-pixels").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return})},backGroundVerticalPostion:function(h){var f=$(h).css("background-position-y");var c="";var g={};var k=h[0].id;var e=(f.search("px")!=-1)?f=f.substr(0,f.length-2):0;var a=f;this.markup='<label class="label_grouped_main">							<select id="fb-pp-input-bg-vertical-position" class="combo_right element_property_actions" >								<option value = "0%">Top</option>								<option value = "50%">Center</option>								<option value = "100%">Bottom</option>							 </select>						</label>						<label class="label_grouped">							<input id="fb-pp-input-bg-vertical-position-pixels" class="input_right" type="text" value="'+e+'"min="0" >							<span>pixels</span>						</label>';if(k=="docContainer"){fb_panel.addToFormProperties(this.markup)}else{fb_panel.add(this.markup)}var b=document.getElementById("fb-pp-input-bg-vertical-position");fb_utils.setValueToSelected(f,b);if($("#fb-bg-image-name-general").html()=="none"){$("#fb-pp-input-bg-vertical-position").attr("disabled",true);$("#fb-pp-input-bg-vertical-position-pixels").attr("disabled",true)}else{$("#fb-pp-input-bg-vertical-position").removeAttr("disabled");$("#fb-pp-input-bg-vertical-position-pixels").removeAttr("disabled")}$("#fb-pp-input-bg-vertical-position").change(function(){fb_editor.backgroundActive();if(k=="docContainer"){c=document.getElementById("docContainer");g=fb_undo.getFormParams(c)}if(k=="fb-submit-button-div"){c=document.getElementById("fb-submit-button-div");g=fb_undo.getSubmitParams(c)}if(k=="fb-form-header1"){c=document.getElementById("fb-form-header1");g=fb_undo.getLogoAndHeaderParams(c)}var l=$("#fb-pp-input-bg-vertical-position").attr("value");$("#"+k).css("background-position-y",l);$("#fb-pp-input-bg-vertical-position-pixels").attr("value",0);g.markupredo=fb_utils.getouterHtml(c);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))});function d(){if((newvalue+"px")!=$(h).css("background-position-y")){if(k=="docContainer"){c=document.getElementById("docContainer");g=fb_undo.getFormParams(c)}if(k=="fb-submit-button-div"){c=document.getElementById("fb-submit-button-div");g=fb_undo.getSubmitParams(c)}if(k=="fb-form-header1"){c=document.getElementById("fb-form-header1");g=fb_undo.getLogoAndHeaderParams(c)}a=newvalue;$(h).css("background-position-y",newvalue+"px");g.markupredo=fb_utils.getouterHtml(c);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))}else{$("#fb-pp-input-bg-vertical-position-pixels").attr("value",a);$(h).css("background-position-y",a)}}$("#fb-pp-input-bg-vertical-position-pixels").change(function(){var l="";var m=$("#fb-pp-input-bg-vertical-position-pixels").attr("value");for(var n=0;n<m.length;n++){if(!isNaN(m.charAt(n))||m.charAt(n)=="-"){l+=m.charAt(n)}}newvalue=parseInt(l);if(isNaN(newvalue)){appVar.displayAlert_("You must provide a number for this value.");$("#fb-pp-input-bg-vertical-position-pixels").val(parseInt(a));return}$("#fb-pp-input-bg-vertical-position-pixels").attr("value",newvalue);var o=$("#fb-pp-input-bg-vertical-position-pixels").attr("value");if(o+"px"!=$(h).css("background-position-y")){d()}});$("#fb-pp-input-bg-vertical-position-pixels").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-bg-vertical-position-pixels");return});$("#fb-pp-input-bg-vertical-position-pixels").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return})},loadGeneralBackGroundImageForElement:function(d){this.markup='<label class="label_input">						<span class="primary_left">Background:</span>						<span id="fb-bg-image-name-general">none</span>						<div class="images_set" id="bg-bt-image-set">							<span class="object_control_button" id="fb-bt-bg-image-general">+</span>							<span class="object_control_button" id="fb-bt-bg-image-remove-general">-</span>						</div>					</label>';var b=d[0].id;if(b=="docContainer"){fb_panel.addToFormProperties(this.markup)}else{fb_panel.add(this.markup)}var a=$("#"+b).css("background-image").split("/").pop();if(a.toLowerCase()!="none"){a=appVar.platform()=="win"?a.substr(0,a.length-2):a=a.substr(0,a.length-1)}a=decodeURIComponent(a);var c=a.length>17?a.substr(0,14)+"...":a;$("#fb-bg-image-name-general").html(c);$("#fb-bt-bg-image-general").click(function(){fb_panel.background_type="normal";appVar.getBackGroundImage_(b)});$("#fb-bt-bg-image-remove-general").click(function(){if($("#"+b).css("background-image")!="none"){var g="";var e={};if(b=="docContainer"){g=document.getElementById("docContainer");e=fb_undo.getFormParams(g)}if(b=="fb-submit-button-div"){g=document.getElementById("fb-submit-button-div");e=fb_undo.getSubmitParams(g)}if(b=="fb-form-header1"){g=document.getElementById("fb-form-header1");e=fb_undo.getLogoAndHeaderParams(g)}$("#"+b).css("background-image","none");$("#"+b).css("top","0");$("#fb-bg-image-name-general").html("none");$("#fb-pp-input-bg-repeat").attr("disabled",true);$("#fb-pp-input-bg-horizontal-position").attr("disabled",true);$("#fb-pp-input-bg-horizontal-position-pixels").attr("disabled",true);$("#fb-pp-input-bg-vertical-position").attr("disabled",true);$("#fb-pp-input-bg-vertical-position-pixels").attr("disabled",true);e.markupredo=fb_utils.getouterHtml(g);var f=fb_editor.JSONParser.stringify(e);appVar.pushUndo_(f)}})},loadImageElementElementSrc:function(d){this.markup='<label class="label_input">									<span class="primary_left">Image:</span>									<span id="fb-bg-image-name">None</span>									<div class="images_set" id="hidden_object_controls">										<span class="object_control_button" id="fb-bt-bg-image">+</span>									</div>								</label>';fb_panel.add(this.markup);var b=d.id;var a="";a=$("#"+b).attr("src").split("/").pop();a=decodeURIComponent(a);var c=a.length>17?a.substr(0,14)+"...":a;$("#fb-bg-image-name").html(c);$("#fb-bt-bg-image").click(function(){fb_panel.background_type="normal";appVar.getBackGroundImage_(b)})},loadBackGroundImageForElement:function(d){var b=d[0].id;label_value=(b=="fb-submit-button")?"Regular":"Image";this.markup='<label class="label_input">									<span class="primary_left">'+label_value+':</span>									<span id="fb-bg-image-name">None</span>									<div class="images_set" id="hidden_object_controls">										<span class="object_control_button" id="fb-bt-bg-image">+</span>										<span class="object_control_button" id="fb-bt-bg-image-remove">-</span>									</div>								</label>';fb_panel.add(this.markup);var a="";if(b=="fb-logo1"){a=$("#"+b).attr("src").split("/").pop()}else{a=$("#"+b).css("background-image").split("/").pop();if(a.toLowerCase()!="none"){a=appVar.platform()=="win"?a.substr(0,a.length-2):a=a.substr(0,a.length-1)}}if(!a.length||a=="image_default.png"){a="none"}a=decodeURIComponent(a);var c=a.length>17?a.substr(0,14)+"...":a;$("#fb-bg-image-name").html(c);$("#fb-bt-bg-image").click(function(){fb_panel.background_type="normal";appVar.getBackGroundImage_(b)});$("#fb-bt-bg-image-remove").click(function(){var g="";var e={};var h=false;if(b=="fb-submit-button"){if($("#"+b).css("background-image")!="none"){g=document.getElementById("fb-submit-button-div");e=fb_undo.getSubmitParams(g);$("#"+b).css("background-image","none");$("#"+b).css("border","");$("#fb-submit-button-div").css("min-height","");fb_panel.applyBackgroundHover(b);h=true}}else{if(b=="fb-logo1"){if($("#"+b).css("display")!="none"){g=document.getElementById("fb-form-header1");e=fb_undo.getLogoAndHeaderParams(g);$("#"+b).css("display","none");$("#"+b).attr("src","common/images/image_default.png");$("#fb-form-header1").css("min-height","");h=true;$("#objectproperties").trigger("click");fb_panel.disableLogoOptions()}}}if(h){$("#"+b).css("width","");$("#"+b).css("height","");e.markupredo=fb_utils.getouterHtml(g);var f=fb_editor.JSONParser.stringify(e);appVar.pushUndo_(f)}$("#fb-bg-image-name").html("none")})},loadHoverBackGroundImageForElement:function(h){var k=h[0].id;if(k!="fb-submit-button"){return}this.markup='<label class="label_input">							<span class="primary_left">Hover:</span>							<span id="fb-bg-image-name-hover">None</span>							<div class="images_set" id="hidden_object_controls">								<span class="object_control_button" id="fb-bt-bg-image-hover">+</span>								<span class="object_control_button" id="fb-bt-bg-image-remove-hover">-</span>							</div>						</label>';fb_panel.add(this.markup);var a=pValidationConfig.get_config_subtype(k,"hover","background-image");if(!a||a.length==0){a=$("#"+k).css("background-image").split("/").pop();a=a.split(".")[0]+"_hov."+a.split(".")[1];var f=null;for(var d=0;d<document.styleSheets.length;d++){if(document.styleSheets[d].href==$("#theme").get(0).href){f=document.styleSheets[d]}}if(f){var g=f.cssRules?f.cssRules:f.rules;if(g){var c="#fb-submit-button:hover";var b=false;for(var d=g.length-1;d>=0;d--){if((jQuery.trim(g[d].selectorText.toLowerCase())==c)&&g[d].style.backgroundImage.length){a=g[d].style.backgroundImage;a=a.split("/").pop();a=a.substr(0,a.length-1);b=true;break}}}}}else{a=a.split("/").pop();if(a.toLowerCase()!="none"){a=a.substr(0,a.length-1)}}a=decodeURIComponent(a);var e=a.length>17?a.substr(0,14)+"...":a;$("#fb-bg-image-name-hover").html(e);$("#fb-bt-bg-image-hover").click(function(){fb_panel.background_type="hover";appVar.getBackGroundImage_(k)});$("#fb-bt-bg-image-remove-hover").click(function(){var n="";var l={};n=document.getElementById("fb-submit-button-div");l=fb_undo.getSubmitParams(n);l.validation_object_id=k;l.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(k));pValidationConfig.set_config_subtype(k,"hover","background-image","none");l.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(k));l.markupredo=fb_utils.getouterHtml(n);var m=fb_editor.JSONParser.stringify(l);appVar.pushUndo_(m);fb_panel.applyBackgroundHover(k);$("#objectproperties").trigger("click")})},imageLink:function(b){var a=fb_utils.htmlEncode($(b[0].firstChild).attr("href"));var c=a;this.markup='<label class="label_input">							<span class="primary_left">Link:</span>							<input id="fb-pp-input-image-link" class="input_right" type="text" value="'+a+'" maxlength="125">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-image-link").change(function(){var e=fb_utils.htmlEncode($("#fb-pp-input-image-link").attr("value"));if(c!=e){var d=fb_undo.getItemParams(b[0].firstChild);if(e==""){$(b[0].firstChild).removeAttr("href")}else{$(b[0].firstChild).attr("href",e)}c=e;d.markupredo=fb_utils.getouterHtml(b[0]);var f=fb_editor.JSONParser.stringify(d);appVar.pushUndo_(f)}});$("#fb-pp-input-image-link").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-image-link")});$("#fb-pp-input-image-link").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},alt:function(b){var a=fb_utils.htmlEncode($(b[0].firstChild.firstChild).attr("alt"));var c=a;this.markup='<label class="label_input">							<span class="primary_left">Alt:</span>							<input id="fb-pp-input-alt" class="input_right" type="text" value="'+a+'" maxlength="125">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-alt").change(function(){var e=fb_utils.htmlEncode($("#fb-pp-input-alt").attr("value"));if(c!=e){var d=fb_undo.getItemParams(b[0].firstChild);$(b[0].firstChild.firstChild).attr("alt",e);$(b[0].firstChild.firstChild).attr("title",e);c=e;d.markupredo=fb_utils.getouterHtml(b[0]);var f=fb_editor.JSONParser.stringify(d);appVar.pushUndo_(f)}});$("#fb-pp-input-alt").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-alt")});$("#fb-pp-input-alt").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},target:function(a){var b=$(a[0].firstChild).attr("target");this.markup='<label class="label_combo">						<span class="primary_left">Target:</span>							<select id="fb-pp-input-target" class="combo_right" >								<option value = "_blank">New Page</option>								<option value = "_top">Same Page</option>								<option value = "_self">Inside iFrame</option>							 </select>						</label>';fb_panel.add(this.markup);var c=document.getElementById("fb-pp-input-target");fb_utils.setValueToSelected(b,c);$("#fb-pp-input-target").change(function(){var e="";var d={};var d=fb_undo.getItemParams(a[0].firstChild);var f=$("#fb-pp-input-target").attr("value");$(a[0].firstChild).attr("target",f);d.markupredo=fb_utils.getouterHtml(a[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},label:function(c,a){var e=(a)?$(a).text():$(c).text();this.markup='<label class="label_input">							<span class="primary_left">Label:</span>							<input id="fb-pp-input-label" class="input_right" type="text" value="'+fb_utils.htmlEncode(e)+'" maxlength="125">						</label>';fb_panel.add(this.markup);var b=false;if(a){if($(a.parentNode).next().hasClass("fb-checkbox")||$(a.parentNode).next().hasClass("fb-radio")){b=true}}var d=(a)?fb_utils.getouterHtml($(a).parent().parent()[0],b):fb_utils.getouterHtml($(c).parent().parent()[0]);$("#fb-pp-input-label").change(function(){var h=fb_utils.htmlEncode($("#fb-pp-input-label").attr("value"));if(a){if(d==fb_utils.getouterHtml($(a).parent().parent()[0],b)){return}var f=fb_undo.getItemParams($(a).parent()[0],b);f.markup=d;f.validation_object_id=$(a).parent().parent().children()[1].children[0].id;f.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id($(a).parent().parent().children()[1].children[0].id));$(a).html(h);if(h==""){$(a).css("display","none")}else{$(a).css("display","inline")}if($(a).parent().parent().children(1).hasClass("fb-radio")||$(a).parent().parent().children(1).hasClass("fb-checkbox")){pValidationConfig.set_config_type($(a).parent().parent().children()[1].children[0].children[0].id,"label",h)}else{pValidationConfig.set_config_type($(a).parent().parent().children()[1].children[0].id,"label",h)}d=fb_utils.getouterHtml($(a).parent().parent()[0],b);f.markupredo=fb_utils.getouterHtml($(a).parent().parent()[0],b);f.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id($(a).parent().parent().children()[1].children[0].id));var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)}else{if(c){if(d==fb_utils.getouterHtml($(c).parent().parent()[0])){return}var f=fb_undo.getItemParams($(c).parent()[0]);f.markup=d;$(c).html(h);if(h==""){$(c).css("display","none")}else{$(c).css("display","inline")}d=fb_utils.getouterHtml($(c).parent().parent()[0]);f.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)}}});$("#fb-pp-input-label").keyup(function(g){if(g.keyCode=="9"){return}var f=fb_utils.htmlEncode($("#fb-pp-input-label").attr("value"));if(a){$(a).html(f);if($(a).parent().parent().children(1).hasClass("fb-radio")||$(a).parent().parent().children(1).hasClass("fb-checkbox")){pValidationConfig.set_config_type($(a).parent().parent().children()[1].children[0].children[0].id,"label",f)}else{pValidationConfig.set_config_type($(a).parent().parent().children()[1].children[0].id,"label",f)}}else{if(c){$(c).html(f)}}});$("#fb-pp-input-label").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-label");d=a?fb_utils.getouterHtml($(a).parent().parent()[0],b):fb_utils.getouterHtml($(c).parent().parent()[0]);return});$("#fb-pp-input-label").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},name:function(c){var d=$(c).attr("name");var b=false;if($(c).attr("multiple")){d=d.substr(0,d.length-2)}var a=d;this.markup='<label class="label_input">							<span class="primary_left">Name:</span>							<input id="fb-pp-input-name" class="input_right" type="text" value="'+d+'" maxlength="125">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-name").change(function(){var m=$("#fb-pp-input-name");var l=fb_utils.htmlEncode(fb_utils.clearNameNotValidChars(m.attr("value")));m.attr("value",l);if(l==""){m.attr("value",a);var e="The name property must begin with an uppercase or lowercase letter, and may contain digits, hyphens, underscores, and colons as well.";appVar.displayAlert_(e);return}var g=fb_utils.getElementsByNameInsensitive(l);var p=fb_utils.getElementsByNameInsensitive(l+"[]");var n=(g.length>0&&g[0].id!=c.id);var f=(p.length>0&&p[0].id!=c.id);if(n||f){appVar.displayAlert_("The name "+fb_utils.htmlDecode(l)+" already exists");m.attr("value",a);b=true;return}if(l!=a){if($(c).attr("multiple")){l+="[]"}var h="["+a+"],";var o=fb_undo.getItemParams($(c).parent()[0]);var k=$(c).parent().parent()[0];var q=$(c).clone().attr("name",l);$(c).replaceWith(fb_utils.getouterHtml(q.get(0)));a=m.attr("value");h+="["+a+"]";o.markupredo=fb_utils.getouterHtml(k);appVar.pushUndo_(fb_editor.JSONParser.stringify(o));appVar.updateNameInSettings_(h);$(k).trigger("mousedown")}});$("#fb-pp-input-name").keydown(function(g){if(g.keyCode==13){if(b){b=false;$("#fb-pp-input-name").trigger("change")}var f=document.getElementById("fb-pp-input-name");f.focus();fb_panel.resetCursorPosition(f,100);return false}else{if(g.keyCode==9&&g.shiftKey){if(b){b=false;$("#fb-pp-input-name").trigger("change")}setTimeout(function(){var e=document.getElementById("fb-pp-input-name");var h=$(":input");for(i=0;i<h.length;i++){if(h[i]==e){h[i-1].focus();break}}return false},0)}else{if(g.keyCode==9){if(b){b=false;$("#fb-pp-input-name").trigger("change")}setTimeout(function(){var e=document.getElementById("fb-pp-input-name");var h=$(":input");for(i=0;i<h.length;i++){if(h[i]==e){h[i+1].focus();break}}return false},0)}}}});$("#fb-pp-input-name").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-name")});$("#fb-pp-input-name").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},nameGroup:function(n){var l=n.childNodes[0].firstChild.name;if(n.childNodes[0].firstChild.getAttribute("type")=="checkbox"){l=l.substr(0,l.length-2)}var a=l;var g=false;this.markup='<label class="label_input">							<span class="primary_left">Group Name:</span>							<input class="input_right" id="fb-pp-input-radiogroup" type="text" value="'+l+'" maxlength="125">						</label>';fb_panel.add(this.markup);var f=document.getElementById("fb-pp-input-groups");var d=n.className;var c=$("."+d);var b=false;if($(n).children()[0].firstChild.getAttribute("type")=="checkbox"){b=true}for(var m=0;m<c.length;m++){var e=$(c[m]).children()[0].firstChild;var k=$(e).attr("name");if(b){k=k.substr(0,k.length-2)}if(k){h(k,f)}}fb_utils.setValueToSelected(l,f);function h(s,p){var q=0;if(p){for(var o=0;o<p.options.length;o++){if(s==(p.options[o].value)){q=1;break}}if(!q){var r=new Option(s,s);r.title=s;p.add(r)}}}$("#fb-pp-input-radiogroup").change(function(){var r="";r=fb_utils.htmlEncode(fb_utils.clearNameNotValidChars($("#fb-pp-input-radiogroup").attr("value")));$("#fb-pp-input-radiogroup").attr("value",r);var y=fb_undo.getItemParams(n,true);if(r==""){appVar.displayAlert_("The group name can not be empty");$("#fb-pp-input-radiogroup").attr("value",a);return}var p=fb_utils.getElementsByNameInsensitive(r);var z=fb_utils.getElementsByNameInsensitive(r+"[]");var x=(p.length>0&&p[0].id!=n.childNodes[0].firstChild.id);var o=(z.length>0&&z[0].id!=n.childNodes[0].firstChild.id);if(x||o){appVar.displayAlert_("The group name "+fb_utils.htmlEncode(r)+" already exists");$("#fb-pp-input-radiogroup").attr("value",a);var t=true;return}if($(n).children()[0].firstChild.getAttribute("type")=="checkbox"){r+="[]"}if($("#fb-pp-input-radiogroup").attr("value")!=a){var q="["+a+"],";var w=$(n).children();for(var s=0;s<w.length;s++){var v=$(w[s].firstChild).attr("checked");var A=$(w[s].firstChild).clone().attr("name",r);$(w[s].firstChild).replaceWith(fb_utils.getouterHtml(A.get(0)));if(v){$(w[s].firstChild).attr("checked",true)}}h($("#fb-pp-input-radiogroup").attr("value"),f);fb_utils.setValueToSelected($("#fb-pp-input-radiogroup").attr("value"),f);y.markupredo=fb_utils.getouterHtml($(n).parent()[0],true);var u=fb_editor.JSONParser.stringify(y);a=$("#fb-pp-input-radiogroup").attr("value");q+="["+a+"]";appVar.pushUndo_(u);appVar.updateNameInSettings_(q);$(n).parent().trigger("mousedown")}});$("#fb-pp-input-radiogroup").keydown(function(p){if(p.keyCode==13){if(g){g=false;$("#fb-pp-input-radiogroup").trigger("change")}var o=document.getElementById("fb-pp-input-radiogroup");o.focus();fb_panel.resetCursorPosition(o,100);return false}else{if(p.keyCode==9&&p.shiftKey){if(g){g=false;$("#fb-pp-input-radiogroup").trigger("change")}setTimeout(function(){var q=document.getElementById("fb-pp-input-radiogroup");var r=$(":input");for(i=0;i<r.length;i++){if(r[i]==q){r[i-1].focus();break}}return false},0)}else{if(p.keyCode==9){if(g){g=false;$("#fb-pp-input-radiogroup").trigger("change")}setTimeout(function(){var q=document.getElementById("fb-pp-input-radiogroup");var r=$(":input");for(i=0;i<r.length;i++){if(r[i]==q){if(appVar.platform()=="win"){r[i+1].focus()}else{r[i+2].focus()}break}}return false},0)}}}});$("#fb-pp-input-radiogroup").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-radiogroup")});$("#fb-pp-input-radiogroup").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});$("#fb-pp-input-groups").change(function(){var p=fb_undo.getItemParams(n);var r=$(n).children();var o=$("#fb-pp-input-groups").attr("value");if(r[0].firstChild.getAttribute("type")=="checkbox"){o+="[]"}for(var q=0;q<r.length;q++){r[q].firstChild.name=o}$("#fb-pp-input-radiogroup").attr("value",$("#fb-pp-input-groups").attr("value"));p.markupredo=fb_utils.getouterHtml($(n).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))})},statictext:function(b){var d=b.innerHTML;d=fb_utils.replaceString(d,"<br>","\n");d=fb_utils.replaceString(d,"<BR>","\n");this.markup='<label class="label_input">							<span class="primary_left">Text:</span>							<textarea id="fb-pp-input-textarea" class="textarea_right"  value="'+d+'" >'+d+"</textarea>						</label>";fb_panel.add(this.markup);var c=fb_utils.getouterHtml($(b).parent().parent()[0]);var a=false;$("#fb-pp-input-textarea").change(function(){if(a&&(c!=fb_utils.getouterHtml($(b).parent().parent()[0]))){var f=fb_utils.htmlEncode($("#fb-pp-input-textarea").attr("value"));f=fb_utils.replaceString(f,"\n","<br>");var e=fb_undo.getItemParams($(b).parent()[0]);e.markup=c;$(b).html(f);e.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(e));c=fb_utils.getouterHtml($(b).parent().parent()[0]);a=false}});$("#fb-pp-input-textarea").keyup(function(f){if(f.keyCode=="9"){return}a=true;if(f.keyCode!="13"){var g=fb_utils.htmlEncode($("#fb-pp-input-textarea").attr("value"));g=fb_utils.replaceString(g,"\n","<br>");$(b).html(g)}else{$("#fb-pp-input-textarea").trigger("change")}});$("#fb-pp-input-textarea").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-textarea");c=fb_utils.getouterHtml($(b).parent().parent()[0])});$("#fb-pp-input-textarea").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},maxLength:function(d){var a;if(d.tagName.toLowerCase()=="textarea"){a=fb_defaults.get_default_configuration("textarea")}else{a=fb_defaults.get_default_configuration(d.getAttribute("type"))}var c=a.maxlength;var e=$(d).attr("maxlength")>0?$(d).attr("maxlength"):0;var b=e;this.markup='<label class="label_input">							<span class="primary_left">Max. Length:</span>							<input id="fb-pp-input-maxlength" class="input_right" type="text" value="'+e+'" min="1" max="'+c+'">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-maxlength").change(function(){var g=$("#fb-pp-input-maxlength");var l="";l=fb_utils.clearNotNumericChars(g.attr("value"));if(isNaN(l)){appVar.displayAlert_("You must provide a positive number for this value.");g.val(b);return}g.attr("value",l);if(b!=g.attr("value")){var h=fb_undo.getItemParams($(d).parent()[0]);var k=parseInt(g.attr("value"));var f=1;if($(d).attr("type")=="url"){f=4}else{if($(d).attr("type")=="email"){f=6}}h.validation_object_id=d.id;h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));$(d).attr("maxlength",g.attr("value"));pValidationConfig.set_config_type(d.id,"maxlength",g.attr("value"));if($("#fb-pp-input-minlength").attr("value")){f=parseInt($("#fb-pp-input-minlength").attr("value"))}if((k>c)||(k<f)){var n="";if(k>c||d.tagName.toLowerCase()=="textarea"){if(($("#fb-pp-input-maxlength").attr("value")=="")||(($("#fb-pp-input-maxlength").attr("value")=="0"))){n="You must provide a positive number for this value."}else{n="Please enter a value equal to or less than "+c+"."}}else{if($(d).attr("type")=="password"){n="Please enter a value that is equal to or greater than the chosen minimum value of "+f+"."}else{n="Please enter a value equal to or greater than "+f+"."}}appVar.displayAlert_(n);g.attr("value",c);g.attr("max",c);$(d).attr("maxlength",g.attr("value"));pValidationConfig.set_config_type(d.id,"maxlength",g.attr("value"));k=c}var m=$(d).attr("value");if(k<(m.length)){if(k!=0){m=m.substr(0,k);$(d).attr("value",m)}else{if(k<=0){$(d).attr("value","")}}}if(b!=g.attr("value")){h.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(h));b=k}}});$("#fb-pp-input-maxlength").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-maxlength")});$("#fb-pp-input-maxlength").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},minLength:function(c){if($(c).attr("type")!="password"){return}var f=c.id;var e=pValidationConfig.get_config_value(f,"minlength")>0?pValidationConfig.get_config_value(f,"minlength"):1;var a=fb_defaults.get_default_configuration($(c).attr("type"));var d=a.validation["minlength"];var b=e;this.markup='<label class="label_input">							<span class="primary_left">Min. Length:</span>							<input id="fb-pp-input-minlength" class="input_right" type="text" value="'+e+'" min="1" max="125">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-minlength").change(function(){var h=$("#fb-pp-input-minlength");var l="";l=fb_utils.clearNotNumericChars(h.attr("value"));h.attr("value",l);if(isNaN(l)){appVar.displayAlert_("You must provide a positive number for this value.");h.val(b);return}if(b!=h.attr("value")){var k=fb_undo.getItemParams($(c).parent()[0]);var m=h.attr("value");var g=$(c).attr("maxlength");k.validation_object_id=f;k.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(f));pValidationConfig.set_config_type(f,"minlength",m);if((m<d)||(m>g)){var n=(m<d)?n="Please enter a value equal to or greater than "+d+".":n="Please enter a value that is less than the chosen maximum value of "+g+".";appVar.displayAlert_(n);h.attr("value",d);h.attr("max",d);pValidationConfig.set_config_type(c.id,"minlength",h.attr("value"));m=d}if(b!=h.attr("value")){k.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);k.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(k));b=m}}});$("#fb-pp-input-minlength").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-minlength")});$("#fb-pp-input-minlength").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},required:function(c,a){var e=false;var f="";var b=$(c).attr("required");if(appVar.platform()=="win"&&b!=undefined){e=true}else{e=b}var d=e?'checked="true"':"";this.markup=a?"":'<span class="label_checkgroup">Field Options:</span>';this.markup+='<label class="label_checkbox">							<input id="fb-pp-input-required" class="check_left" type="checkbox" '+d+' " maxlength="125">							<span class="primary_right">Required</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-required").change(function(){var g=$("#fb-pp-input-required");var h=fb_undo.getItemParams($(c).parent()[0]);h.validation_object_id=c.id;h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));if($("#fb-pp-input-required").attr("checked")){$(c).attr("required","required")}else{$(c).removeAttr("required")}fb_panel.disableFileOptions(c,"required",g.attr("checked"));pValidationConfig.set_config_type(c.id,"required",g.attr("checked"));h.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(h))})},requiredDrop:function(b){var d=false;var e="";var a=$(b).attr("required");if(appVar.platform()=="win"&&a!=undefined){d=true}else{d=a}var c=d?'checked="true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-required" class="check_left" type="checkbox" '+c+' " maxlength="125">							<span class="primary_right">Required</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-required").change(function(){var f=$("#fb-pp-input-required");var g=fb_undo.getItemParams($(b).parent()[0]);g.validation_object_id=b.id;g.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));if($("#fb-pp-input-required").attr("checked")){$(b).attr("required","required");var k='<option value="" >Choose one</option>';$(b).prepend(k).attr("selectedIndex",0)}else{$(b).removeAttr("required");for(var h=0;h<b.childNodes.length;h++){if($(b.childNodes[h]).attr("selected")){$(b.childNodes[h]).remove();break}}}fb_panel.disableFileOptions(b,"required",f.attr("checked"));pValidationConfig.set_config_type(b.id,"required",f.attr("checked"));g.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);g.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(g));$(b.parentNode).trigger("mousedown")})},requireRadio:function(b){var d=false;var e="";var a=$(b.childNodes[0].childNodes[0]).attr("required");if(appVar.platform()=="win"&&a!=undefined){d=true}else{d=a}var c=d?'checked="true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-required" class="check_left" type="checkbox" '+c+' " maxlength="125">							<span class="primary_right">Required</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-required").change(function(){var f=$("#fb-pp-input-required");var g=fb_undo.getItemParams(b);g.validation_object_id=$(b).children()[0].childNodes[0].id;g.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id($(b).children()[0].childNodes[0].id));if($("#fb-pp-input-required").attr("checked")){$($(b).children()[0].childNodes[0]).attr("required","required");$("#radio_wrapper_div_id input[type=checkbox]").attr("disabled","disabled");$("#radio_wrapper_div_id input[type=checkbox]").removeAttr("checked");$("input",$(b)).removeAttr("checked")}else{$($(b).children()[0].childNodes[0]).removeAttr("required");$("#radio_wrapper_div_id input[type=checkbox]").removeAttr("disabled");$($(b).children()[0].childNodes[0]).attr("checked","checked")}pValidationConfig.set_config_type($(b).children()[0].childNodes[0].id,"required",f.attr("checked"));g.markupredo=fb_utils.getouterHtml($(b).parent()[0]);g.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id($(b).children()[0].childNodes[0].id));appVar.pushUndo_(fb_editor.JSONParser.stringify(g));$(b).parent().trigger("mousedown")})},contactList:function(b){var c=false;c=pValidationConfig.get_config_value(b.id,"contactList");var a=c?'checked="true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-contactList" class="check_left" type="checkbox" '+a+' " maxlength="125">							<span class="primary_right">Use as Contact List</span>							<span class="object_control_button" id="fb-help-contactlist">?</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-contactList").change(function(){if($("#fb-pp-input-contactList").attr("checked")){var e=pPaymentsConfig.get_config_value(b.id,"type");if(!e){e="none"}if(e!="none"){appVar.displayAlert_("You need to disable Payments in this control in order to use this functionality.");$("#fb-pp-input-contactList").attr("checked","");return false}}var m=$("#fb-pp-input-contactList");var n=fb_undo.getItemParams($(b).parent()[0]);n.validation_object_id=b.id;n.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));if($("#fb-pp-input-contactList").attr("checked")){pValidationConfig.set_config_type(b.id,"contactList",true);var l=$(b).children();for(var h=0;h<l.length;h++){var k=$(l[h]).text().split(":");if(k.length==2){$(l[h]).text(k[0]);if(k[1]!=""){$(l[h]).val(k[1])}else{$(l[h]).val("Name<you@domain.com>")}}else{if($(l[h]).val()!=""){$(l[h]).val("Name<you@domain.com>")}}}}else{pValidationConfig.set_config_type(b.id,"contactList",false);var l=$(b).children();for(var h=0;h<l.length;h++){var f=$(l[h]).val();var g=$(l[h]).text();if(f.length){if(f=="Name<you@domain.com>"){$(l[h]).text(g);$(l[h]).val(g)}else{var d=g+":"+f;$(l[h]).text(d);$(l[h]).val(d)}}}}n.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);n.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(n));$(b.parentNode).trigger("mousedown")});$("#fb-help-contactlist").click(function(d){appVar.displayAlert_('"Contact List" associates drop-down options with email addresses that will receive form results. Place the visible label on the left and email address on the right, separated by a colon.\n\nFor example:\nSales:sales@coffeecup.com|#|http://www.coffeecup.com/help/articles/935/');d.preventDefault();d.stopPropagation();return false})},readonly:function(c){var a=pValidationConfig.get_config_value(c.id,"fieldtype");if(a!="text"&&a!="email"&&a!="textarea"&&a!="tel"){return}var d=$(c).attr("disabled");var b=d!=""?'checked="true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-disabled" type="checkbox" '+b+' maxlength="125" />							<span class="primary_right">Read only</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-disabled").change(function(){var e=$("#fb-pp-input-disabled");var f=fb_undo.getItemParams($(c).parent()[0]);if(e.attr("checked")){$(c).attr("disabled","disabled")}else{$(c).removeAttr("disabled")}fb_panel.disableFileOptions($(c).parent().get(0),"readonly",e.attr("checked"));f.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},autocomplete:function(a){if(a.getAttribute("type")=="password"){return}var b=a.getAttribute("autocomplete");var c=a.getAttribute("autocomplete")=="on"?'checked = "true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-autocomplete" type="checkbox"'+c+'>							<span class="primary_right">Auto-complete</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-autocomplete").change(function(){var d=fb_undo.getItemParams($(a).parent()[0]);if($("#fb-pp-input-autocomplete").attr("checked")){a.setAttribute("autocomplete","on")}else{a.setAttribute("autocomplete","off")}fb_panel.disableFileOptions(a,"autocomplete",$("#fb-pp-input-autocomplete").attr("checked"));d.markupredo=fb_utils.getouterHtml($(a).parent().parent()[0]);var e=fb_editor.JSONParser.stringify(d);appVar.pushUndo_(e)})},verification:function(d){var a=d.getAttribute("type");if((a!="password")&&(a!="email")&&(a!="url")){return}var b=$(d).parent().parent().get(0).childNodes[2];var g=b?true:false;var f=b?$(d.parentNode.parentNode.childNodes[2]).text():"";var c=g?' checked = "true" ':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-check-verification" class="check_left" type="checkbox"'+c+'>							<span class="primary_right">Verify</span>						</label>						<label class="label_input_right">							<span class="primary_right">Label:</span>							<input id="fb-pp-input-verify-text" class="input_small" type="text" value="'+fb_utils.htmlEncode(f)+'" maxlength="254">						</label>';fb_panel.add(this.markup);g?$("#fb-pp-input-verify-text").prev().css("color","rgb(0,0,0)"):$("#fb-pp-input-verify-text").attr("disabled","disabled").prev().css("color","rgb(128,128,128)");var e=fb_utils.getouterHtml($(d).parent()[0]);$("#fb-pp-check-verification").change(function(){var h=fb_undo.getItemParams($(d).parent()[0]);h.validation_object_id=d.id;h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));if($("#fb-pp-check-verification").attr("checked")){$(d).parent().after(fb_utils.getouterHtml(d.parentNode));$(d).parent().after('<div class="fb-grouplabel"><label>Confirm</label></div>');$($(d).parent()[0].nextSibling.firstChild).attr("style",$(d.parentNode.parentNode.childNodes[0].firstChild).attr("style"));$(d.parentNode.parentNode.childNodes[3].firstChild).attr("value","");$(d.parentNode.parentNode.childNodes[3].firstChild).attr("id",d.parentNode.parentNode.childNodes[1].firstChild.id+"_verification");$(d.parentNode.parentNode.childNodes[3].firstChild).attr("placeholder","");$(d.parentNode.parentNode.childNodes[3].firstChild).attr("data-hint","");if($(d).attr("required")){$(d.parentNode.parentNode.childNodes[3].firstChild).removeAttr("required")}if(d.parentNode.parentNode.childNodes[3].childNodes[1]){$(d.parentNode.parentNode.childNodes[3].childNodes[1]).remove()}pValidationConfig.set_config_type(d.id,"equalTo",d.parentNode.parentNode.childNodes[1].firstChild.id+"_verification");pValidationConfig.set_config_type(d.id,"label_equal","Confirm");$("#fb-pp-input-verify-text").attr("value","Confirm").removeAttr("disabled").prev().css("color","rgb(0,0,0)");var k=$(d.parentNode.parentNode.childNodes[3].firstChild).clone().attr("name",d.parentNode.parentNode.childNodes[1].firstChild.name+"_verification");$(d.parentNode.parentNode.childNodes[3].firstChild).replaceWith(fb_utils.getouterHtml(k.get(0)));e=fb_utils.getouterHtml(k.parent()[0])}else{if(d.parentNode.nextSibling){$(d.parentNode.nextSibling).remove();$(d.parentNode.nextSibling).remove();pValidationConfig.set_config_type(d.id,"equalTo","");pValidationConfig.set_config_type(d.id,"label_equal","");$("#fb-pp-input-verify-text").attr("disabled","disabled").attr("value","").prev().css("color","rgb(128,128,128)")}}fb_panel.disableFileOptions(d,"verify",$("#fb-pp-check-verification").attr("checked"));h.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(h))});$("#fb-pp-input-verify-text").change(function(){if(e==fb_utils.getouterHtml($(d).parent().parent()[0])){return}var h=fb_undo.getItemParams($(d).parent()[0]);h.markup=e;h.validation_object_id=d.id;h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));d.parentNode.parentNode.childNodes[2].firstChild.innerHTML=$("#fb-pp-input-verify-text").attr("value");pValidationConfig.set_config_type(d.id,"label_equal",fb_utils.htmlEncode($("#fb-pp-input-verify-text").attr("value")));e=fb_utils.getouterHtml($(d).parent().parent()[0]);h.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(h))});$("#fb-pp-input-verify-text").keyup(function(h){if(h.keyCode=="9"){return}d.parentNode.parentNode.childNodes[2].firstChild.innerHTML=$("#fb-pp-input-verify-text").attr("value");pValidationConfig.set_config_type(d.id,"label_equal",fb_utils.htmlEncode($("#fb-pp-input-verify-text").attr("value")))});$("#fb-pp-input-verify-text").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-verify-text");e=fb_utils.getouterHtml($(d).parent().parent()[0])});$("#fb-pp-input-verify-text").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},placeholder:function(d){if(appVar.platform=="win"&&$(d).attr("type")=="password"){return}var f=$(d).attr("placeholder");if(f){var c="placeholder" in document.createElement("input")&&$(d).get(0).tagName.toLowerCase()=="input";if(!c&&!$(d).hasClass("placeholder")){$(d).val("");$(d).placeholder()}var b="placeholder" in document.createElement("textarea")&&$(d).get(0).tagName.toLowerCase()=="textarea";if(!b&&!$(d).hasClass("placeholder")){$(d).val("");$(d).placeholder()}}var e=fb_utils.getouterHtml($(d).parent().parent()[0]);var c="placeholder" in document.createElement("input")&&$(d).get(0).tagName.toLowerCase()=="input";var a="placeholder" in document.createElement("textarea")&&$(d).get(0).tagName.toLowerCase()=="textarea";this.markup='<label class="label_input">							<span class="primary_left">Placeholder:</span>							<input id="fb-pp-input-starting-text" class="input_right" type="text" value="'+fb_utils.htmlEncode(f)+'" maxlength="8000">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-starting-text").change(function(){if(e!=fb_utils.getouterHtml($(d).parent().parent()[0])){var g=fb_undo.getItemParams($(d).parent());g.markup=e;var h=fb_utils.replaceString($("#fb-pp-input-starting-text").attr("value"),'"',"");$("#fb-pp-input-starting-text").attr("value",h);$(d).attr("placeholder",h);if(!c){$(d).val("");$(d).placeholder()}if(!a){$(d).val("");$(d).placeholder()}e=fb_utils.getouterHtml($(d).parent().parent()[0]);g.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))}});$("#fb-pp-input-starting-text").keyup(function(g){if(g.keyCode=="9"||g.keyCode=="192"){return}$(d).attr("placeholder",$("#fb-pp-input-starting-text").attr("value"))});$("#fb-pp-input-starting-text").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-starting-text");e=fb_utils.getouterHtml($(d).parent().parent()[0])});$("#fb-pp-input-starting-text").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},decimals:function(b){var c=pValidationConfig.get_config_value(b.id,"decimals");this.markup='<label class="label_input">								<span class="primary_left">Decimals:</span>								<input id="fb-pp-input-decimals" class="input_right" type="text" value="'+c+'" maxlength="125">							</label>';fb_panel.add(this.markup);var a=c;$("#fb-pp-input-decimals").change(function(){var d=fb_undo.getItemParams($(b).parent()[0]);d.validation_object_id=b.id;d.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var e=parseInt($("#fb-pp-input-decimals").attr("value"));if(isNaN(e)||e<0){appVar.displayAlert_("You must provide a positive integer for this value.");$("#fb-pp-input-decimals").attr("value",a);return}if(e>6){appVar.displayAlert_("Number fields cannot accept values with more than 6 decimals.");$("#fb-pp-input-decimals").attr("value",a);return}$("#fb-pp-input-decimals").attr("value",e);if(a!=$("#fb-pp-input-decimals").attr("value")){a=e;pValidationConfig.set_config_type(b.id,"decimals",e);fb_utils.updateDecimals(b,e);d.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);d.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(d))}});$("#fb-pp-input-decimals").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-decimals")});$("#fb-pp-input-decimals").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},maxValue:function(b){var c=$(b).attr("max");var a=c;this.markup='<label class="label_input">							<span class="primary_left">Max. Value:</span>							<input id="fb-pp-input-max" class="input_right" type="text" value="'+c+'"min="0">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-max").change(function(){$("#fb-pp-input-max").attr("value",parseFloat(parseFloat($("#fb-pp-input-max").attr("value")).toFixed(6)));var f=fb_undo.getItemParams($(b).parent()[0]);f.validation_object_id=b.id;f.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var g=parseFloat(parseFloat($("#fb-pp-input-max").attr("value")).toFixed(6));var e=parseFloat(parseFloat($("#fb-pp-input-min").attr("value")).toFixed(6));var m=parseFloat(parseFloat($("#fb-pp-input-step").attr("value")).toFixed(6));var k=[e,g,m];var d=fb_defaults.get_default_configuration("number");var h=d.max;if((g>e)&&(g>0)&&(g<=h)&&(g>m)&&(a!=g)){$(b).attr("max",g);k[1]=g;a=g;pValidationConfig.set_config_type(b.id,"range",k);f.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);f.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{if(a==g){return}var l="";if(g>h){l="Please enter a value equal to or less than "+h+"."}else{if(g<=m){l="Please enter a value that is greater than the step value of "+m+"."}else{if(g<=e){l="Please enter a value that is greater than the chosen minimum value of "+e+"."}else{l="You must provide a positive number for this value."}}}appVar.displayAlert_(l);$("#fb-pp-input-max").attr("value",a)}});$("#fb-pp-input-max").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-max")});$("#fb-pp-input-max").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},minValue:function(b){var c=$(b).attr("min");var a=c;this.markup='<label class="label_input">							<span class="primary_left" >Min. Value:</span>							<input id="fb-pp-input-min" class="input_right" type="text" value="'+c+'"min="0">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-min").change(function(){$("#fb-pp-input-min").attr("value",parseFloat(parseFloat($("#fb-pp-input-min").attr("value")).toFixed(6)));var f=fb_undo.getItemParams($(b).parent()[0]);f.validation_object_id=b.id;f.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var e=parseFloat(parseFloat($("#fb-pp-input-min").attr("value")).toFixed(6));var d=parseFloat(parseFloat($("#fb-pp-input-max").attr("value")).toFixed(6));var g=parseFloat(parseFloat($("#fb-pp-input-step").attr("value")).toFixed(6));var h=[e,d,g];if((e<d)&&(e>=0)&&(a!=e)){$(b).attr("min",e);a=e;h[0]=e;pValidationConfig.set_config_type(b.id,"range",h);f.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);f.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{if(a==e){return}appVar.displayAlert_("Please enter a value that is less than the chosen maximum value of "+d+".");$("#fb-pp-input-min").attr("value",a)}});$("#fb-pp-input-min").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-min")});$("#fb-pp-input-min").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return})},step:function(b){var c=$(b).attr("step");var a=c;this.markup='<label class="label_contextual_stepper_number">							<span class="contextual_left">Force steps of </span>							<input id="fb-pp-input-step" type="text" value="'+c+'"min="1">							<span class="contextual_right">at a time</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-step").change(function(){$("#fb-pp-input-step").attr("value",parseFloat(parseFloat($("#fb-pp-input-step").attr("value")).toFixed(6)));var f=fb_undo.getItemParams($(b).parent()[0]);f.validation_object_id=b.id;f.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var d=parseFloat(parseFloat($("#fb-pp-input-min").attr("value")).toFixed(6));var h=parseFloat(parseFloat($("#fb-pp-input-step").attr("value")).toFixed(6));var e=parseFloat(parseFloat($("#fb-pp-input-max").attr("value")).toFixed(6));var k=[d,e,h];var g=((e-d)*Math.pow(10,6))%(h*Math.pow(10,6)).toFixed(6);if((h<=0)||(h>e)||(a==h)||g!=0){if(a==h){return}var l="";if(h<=0){l="You must provide a positive number for this value."}else{if(h>e){l="Please enter a value equal to or less than the chosen maximum value of  "+e+"."}else{if((e-d)%h!=0){l="The step value must equally divide into the chosen range."}else{l="The value "+h+" is not a valid step value."}}}appVar.displayAlert_(l);h=a;$("#fb-pp-input-step").attr("value",h);return}$(b).attr("step",h);a=h;pValidationConfig.set_config_type(b.id,"range",k);f.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);f.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(f))});$("#fb-pp-input-step").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-step")});$("#fb-pp-input-step").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},textareawidth:function(d){var e=$(d).css("width");e=e.substr(0,e.length-2);var a=e;var c=0;this.markup='<label class="label_input">							<span class="primary_left">Width:</span>							<input class="input_right" id="fb-pp-input-textarea-width" type="text" value="'+e+'">						</label>';fb_panel.add(this.markup);function b(){if(isNaN(c)){appVar.displayAlert_("You must provide a positive number for this value.");$("#fb-pp-input-textarea-width").val(a);return}if(c<60){if(c<1){appVar.displayAlert_("You must provide a positive number for this value.")}else{appVar.displayAlert_("This element must have a width value equal to or greater than 60.")}c=a;$("#fb-pp-input-textarea-width").attr("value",c);return}var f=fb_undo.getItemParams($(d).parent()[0]);a=c;$(d).css("width",c);var h=$(d).css("width");h=h.substr(0,h.length-2);if(h<c){appVar.displayAlert_("Based on the width value found in the Form Options tab, this element cannot be wider than "+h+".");c=h;$("#fb-pp-input-textarea-width").attr("value",h)}$(d).css("width",c);f.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)}$("#fb-pp-input-textarea-width").change(function(){c=fb_utils.clearNotNumericChars($("#fb-pp-input-textarea-width").attr("value"));$("#fb-pp-input-textarea-width").attr("value",c);var f=$("#fb-pp-input-textarea-width").attr("value");if((f+"px")!=$(d).css("width")){b()}});$("#fb-pp-input-textarea-width").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-textarea-width")});$("#fb-pp-input-textarea-width").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});$("#fb-pp-input-textarea-width").keyup(function(f){if(f.keyCode!="9"){if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}c=$("#fb-pp-input-textarea-width").attr("value");if(c<60||c>150||fb_utils.hasNotNumericChars(c)){return}b()}})},textareaheight:function(d){var e=$(d).css("height");e=e.substr(0,e.length-2);var b=e;var c=0;this.markup='<label class="label_input">							<span class="primary_left">Height:</span>							<input class="input_right" id="fb-pp-input-textarea-height" type="text" value="'+e+'">						</label>';fb_panel.add(this.markup);function a(){if(isNaN(c)){appVar.displayAlert_("You must provide a positive number for this value.");$("#fb-pp-input-textarea-height").val(b);return}if((c<30)||(c>fb_defaults.get_default_value_type("textarea","max_textarea_height"))){var h="";if(c<30){if(c<1){h="You must provide a positive number for this value."}else{h=("Please enter a value equal to or greater than 30.")}}else{h="Please enter a value equal to or less than "+fb_defaults.get_default_value_type("textarea","max_textarea_height")+"."}appVar.displayAlert_(h);c=b;$("#fb-pp-input-textarea-height").attr("value",c);return}b=c;var f=fb_undo.getItemParams($(d).parent()[0]);$(d).css("height",c);f.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)}$("#fb-pp-input-textarea-height").change(function(){c=fb_utils.clearNotNumericChars($("#fb-pp-input-textarea-height").attr("value"));$("#fb-pp-input-textarea-height").attr("value",c);var f=$("#fb-pp-input-textarea-height").attr("value");if((f+"px")!=$(d).css("height")){a()}});$("#fb-pp-input-textarea-height").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-textarea-height");return});$("#fb-pp-input-textarea-height").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-textarea-height").keyup(function(f){if(f.keyCode!="9"){if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}c=$("#fb-pp-input-textarea-height").attr("value");if(c<30||c>150||fb_utils.hasNotNumericChars(c)){return}a()}})},error:function(c){var f="";var b=false;if($(c.parentNode).hasClass("fb-checkbox")||$(c.parentNode).hasClass("fb-radio")){f=c.firstChild.id;b=true}else{f=c.id}var d=pValidationConfig.get_config_value(f,"messages");(typeof d!="string")?d="":d=fb_utils.replaceString(d,"<br>","\n");var a=false;var e=d;this.markup='<label class="label_input">							<span class="primary_left">Error Message:</span>							<textarea id="fb-pp-input-errormessage" class="textarea_right" type="text" maxlength="125" >'+d+"</textarea>						</label>";fb_panel.add(this.markup);$("#fb-pp-input-errormessage").change(function(){if(a){var g=fb_undo.getItemParams($(c).parent()[0],b);g.validation_object_id=f;g.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(f));$(this).attr("value",$(this).attr("value").replace(/^[ ]+|[ ]+$/g,""));var h=fb_utils.htmlEncode($(this).attr("value"));h=fb_utils.replaceString(h,"\r","");h=fb_utils.replaceString(h,"\n","<br>");pValidationConfig.set_config_type(f,"messages",h);if(e!=h){g.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0],b);g.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(f));appVar.pushUndo_(fb_editor.JSONParser.stringify(g));a=false;e=h}}});$("#fb-pp-input-errormessage").keyup(function(g){if(g.keyCode=="9"){return}a=true;if(g.keyCode=="13"){$("#fb-pp-input-errormessage").trigger("change")}});$("#fb-pp-input-errormessage").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-errormessage")});$("#fb-pp-input-errormessage").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},hint:function(m){var g=m.firstChild.getAttribute("data-hint");g=fb_utils.replaceString(g,"<br>","\n");g=fb_utils.replaceString(g,"<BR>","\n");var c=fb_utils.getouterHtml($(m).parent()[0]);var a=false;this.markup='<label class="label_input">							<span class="primary_left">Friendly Hint:</span>							<textarea id="fb-pp-input-hint" class="textarea_right" type="text" maxlength="512" >'+fb_utils.htmlEncode(g)+"</textarea>						</label>";fb_panel.add(this.markup);$("#fb-pp-input-hint").change(function(){if(a&&(c!=fb_utils.getouterHtml($(m).parent()[0]))){var o=fb_undo.getItemParams(m);$(this).attr("value",$(this).attr("value").replace(/^[ ]+|[ ]+$/g,""));var q=fb_utils.htmlEncode($("#fb-pp-input-hint").attr("value"));o.markup=c;q=fb_utils.replaceString(q,"\n","<br>");if(q){m.firstChild.setAttribute("data-hint",$("#fb-pp-input-hint").attr("value"));if(!m.firstChild.nextSibling){if($("#fb-pp-check-hide-hints").attr("checked")){$(m).append('<div class="fb-hint hidden_hint"></div>')}else{$(m).append('<div class="fb-hint"></div>')}$($(m).children()[1]).css("color",$("#fb-hint-color div").css("background-color"));if($("#fb-pp-input-hint-bold").attr("checked")){$($(m).children()[1]).css("font-weight","bold")}else{$($(m).children()[1]).css("font-weight","normal")}if($("#fb-pp-input-hint-italic").attr("checked")){$($(m).children()[1]).css("font-style","italic")}else{$($(m).children()[1]).css("font-style","normal")}}m.firstChild.nextSibling.innerHTML=q;$($(m).children()[1]).css("display","")}else{if(m.firstChild.nextSibling){m.firstChild.setAttribute("data-hint","");$($(m).children()[1]).remove()}}c=fb_utils.getouterHtml($(m).parent()[0]);o.markupredo=fb_utils.getouterHtml($(m).parent()[0]);var p=fb_editor.JSONParser.stringify(o);appVar.pushUndo_(p);a=false}});$("#fb-pp-input-hint").keyup(function(o){if(o.keyCode=="9"){return}if(o.keyCode!="13"){var p=fb_utils.htmlEncode($("#fb-pp-input-hint").attr("value"));p=fb_utils.replaceString(p,"\n","<br>");a=true;if(p){m.firstChild.setAttribute("data-hint",$("#fb-pp-input-hint").attr("value"));if(!m.firstChild.nextSibling){if($("#fb-pp-check-hide-hints").attr("checked")){$(m).append('<div class="fb-hint hidden_hint"></div>')}else{$(m).append('<div class="fb-hint"></div>')}$($(m).children()[1]).css("color",$("#fb-hint-color div").css("background-color"));if($("#fb-pp-input-hint-bold").attr("checked")){$($(m).children()[1]).css("font-weight","bold")}else{$($(m).children()[1]).css("font-weight","normal")}if($("#fb-pp-input-hint-italic").attr("checked")){$($(m).children()[1]).css("font-style","italic")}else{$($(m).children()[1]).css("font-style","normal")}}m.firstChild.nextSibling.innerHTML=p;$($(m).children()[1]).css("display","");$("#fb-hint-label-color").fadeIn("slow");$("#fb-hint-label-bold").fadeIn("slow");$("#fb-hint-label-italic").fadeIn("slow")}else{if(m.firstChild.nextSibling){m.firstChild.setAttribute("data-hint","");$($(m).children()[1]).remove();$("#fb-hint-label-color").css("display","none");$("#fb-hint-label-bold").css("display","none");$("#fb-hint-label-italic").css("display","none")}}}else{$("#fb-pp-input-hint").trigger("change")}});$("#fb-pp-input-hint").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-hint");c=fb_utils.getouterHtml($(m).parent()[0])});$("#fb-pp-input-hint").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});this.markup='<label id="fb-hint-label-color" class="label_color">							<span class="primary_left">Hint Style:</span>							<div class="color_right fb-color-control" id="fb-hint-color"><div></div></div>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-color").css("display","inline")}else{$("#fb-hint-label-color").css("display","none")}var k;if($(m).get(0).childNodes[1]){k=fb_utils.getHexFromShortHex($($(m).children()[1]).css("color"))}else{$("#docContainer").append('<div id="fb-dummy-color" class="fb-hint"/>');k=fb_utils.getHexFromShortHex($("#fb-dummy-color").css("color"));$("#fb-dummy-color").remove()}var d=k;var f=k;if(/rgb/.test(f)){f=fb_utils.getHexFromRGB(k)}var l;$("#fb-hint-color div").css("background-color",k);$("#fb-hint-color").ColorPicker({color:f,onShow:function(o){l=fb_undo.getItemParams(m);$(o).fadeIn(0);$(o).find("input").focus(function(){fb_panel.inputFocused=this});$(o).find("input").blur(function(){fb_panel.inputFocused=""})},onHide:function(p){$(p).fadeOut(0);if(d!=$("#fb-hint-color div").css("background-color")){l.markupredo=fb_utils.getouterHtml($(m).parent()[0]);var o=fb_editor.JSONParser.stringify(l);appVar.pushUndo_(o);d=$("#fb-hint-color div").css("background-color")}},onChange:function(o,q,p){$("#fb-hint-color div").css("background-color","#"+q);$($(m).children()[1]).css("color","#"+q)}});var n;if($(m).get(0).childNodes[1]){n=$($(m).children()[1]).css("font-weight")}var e=n=="bold"||parseInt(n)>=700?'checked="true"':"";this.markup='<label id="fb-hint-label-bold" class="label_checkbox_bold">							<input id="fb-pp-input-hint-bold" type="checkbox" '+e+' maxlength="125" />							<span class="primary_right">Bold</span>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-bold").css("display","inline")}else{$("#fb-hint-label-bold").css("display","none")}$("#fb-pp-input-hint-bold").change(function(){if($(m).get(0).childNodes[1]){var o=$("#fb-pp-input-hint-bold");var p=fb_undo.getItemParams(m);if(o.attr("checked")){$($(m).children()[1]).css("font-weight","bold")}else{$($(m).children()[1]).css("font-weight","normal")}p.markupredo=fb_utils.getouterHtml($(m).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))}});var h;if($(m).get(0).childNodes[1]){h=$($(m).children()[1]).css("font-style")}var b=h=="italic"?'checked="true"':"";this.markup='<label id = "fb-hint-label-italic" class="label_checkbox_italic">							<input id="fb-pp-input-hint-italic" type="checkbox" '+b+' maxlength="125" />							<span class="primary_right">Italic</span>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-italic").css("display","inline")}else{$("#fb-hint-label-italic").css("display","none")}$("#fb-pp-input-hint-italic").change(function(){if($(m).get(0).childNodes[1]){var o=$("#fb-pp-input-hint-italic");var p=fb_undo.getItemParams(m);if(o.attr("checked")){$($(m).children()[1]).css("font-style","italic")}else{$($(m).children()[1]).css("font-style","normal")}p.markupredo=fb_utils.getouterHtml($(m).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))}})},rangeDate:function(c){var a=pValidationConfig.get_config_subtype(c.id,"date_config","minDate");var e=pValidationConfig.get_config_subtype(c.id,"date_config","maxDate");this.markup='<label class="label_date_from">							<span class="primary_left">Allow Dates:</span>							<input id="fb-pp-input-min-range-date" class="date_min_left">					</label>					<label class="label_date_to">						<span class="primary_middle">to</span>						<input id="fb-pp-input-max-range-date" class="date_max_left">					</label>';fb_panel.add(this.markup);if(a){var b=new Date();b.setTime(a);$("#fb-pp-input-min-range-date").attr("value",b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear());$("#fb-pp-input-min-range-date").datepicker({showAnim:"",showButtonPanel:true})}else{$("#fb-pp-input-min-range-date").datepicker({showAnim:"",showButtonPanel:true})}if(e){var d=new Date();d.setTime(e);$("#fb-pp-input-max-range-date").attr("value",d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear());$("#fb-pp-input-max-range-date").datepicker({showAnim:"",showButtonPanel:true})}else{$("#fb-pp-input-max-range-date").datepicker({showAnim:"",showButtonPanel:true})}$("#fb-pp-input-min-range-date").change(function(){var l=$("#fb-pp-input-min-range-date").datepicker("getDate");var m=$("#fb-pp-input-max-range-date").datepicker("getDate");if(m!=null&&l!=null&&m<l){appVar.displayAlert_("The minimum date "+l.toLocaleDateString()+" is after the maximum date entered "+m.toLocaleDateString()+".");var f=pValidationConfig.get_config_subtype(c.id,"date_config","minDate");if(f){var k=new Date();k.setTime(f);$("#fb-pp-input-min-range-date").attr("value",k.getMonth()+1+"/"+k.getDate()+"/"+k.getFullYear())}else{$("#fb-pp-input-min-range-date").attr("value","")}return}var g=fb_undo.getItemParams($(c).parent()[0]);g.validation_object_id=c.id;g.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));var h=$("#fb-pp-input-min-range-date").val();if(h==""){pValidationConfig.remove_config_subtype(c.id,"date_config","minDate")}else{pValidationConfig.set_config_subtype(c.id,"date_config","minDate",$("#fb-pp-input-min-range-date").datepicker("getDate").getTime())}g.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);g.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(g))});$("#fb-pp-input-max-range-date").change(function(){var l=$("#fb-pp-input-min-range-date").datepicker("getDate");var m=$("#fb-pp-input-max-range-date").datepicker("getDate");if(m!=null&&l!=null&&m<l){appVar.displayAlert_("The maximum date "+m.toLocaleDateString()+" is before the minimum date entered "+l.toLocaleDateString()+".");var f=pValidationConfig.get_config_subtype(c.id,"date_config","maxDate");if(f){var k=new Date();k.setTime(f);$("#fb-pp-input-max-range-date").attr("value",k.getMonth()+1+"/"+k.getDate()+"/"+k.getFullYear())}else{$("#fb-pp-input-max-range-date").attr("value","")}return}var g=fb_undo.getItemParams($(c).parent()[0]);g.validation_object_id=c.id;g.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));var h=$("#fb-pp-input-max-range-date").val();if(h==""){pValidationConfig.remove_config_subtype(c.id,"date_config","maxDate")}else{pValidationConfig.set_config_subtype(c.id,"date_config","maxDate",$("#fb-pp-input-max-range-date").datepicker("getDate").getTime())}g.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);g.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(g))});$("#fb-pp-input-min-range-date").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-min-range-date")});$("#fb-pp-input-min-range-date").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});$("#fb-pp-input-max-range-date").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-max-range-date")});$("#fb-pp-input-max-range-date").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},formatDate:function(b){var c=pValidationConfig.date_formats_RFC[pValidationConfig.get_config_subtype(b.id,"date_config","dateFormat")];this.markup='<label class="label_combo">							<span class="primary_left">Date Format:</span>							<select id="fb-pp-input-date-format" class="combo_right">							</select>					</label>';fb_panel.add(this.markup);var a="";for(format in pValidationConfig.date_formats_RFC){a+='<option value="'+pValidationConfig.date_formats_RFC[format]+'" >'+pValidationConfig.date_formats_RFC[format]+"</option>"}$("#fb-pp-input-date-format").append(a);var d=document.getElementById("fb-pp-input-date-format");fb_utils.setValueToSelected(c,d);$("#fb-pp-input-date-format").change(function(){var e=fb_undo.getItemParams($(b).parent()[0]);e.validation_object_id=b.id;e.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var f=pValidationConfig.get_RFC_from_DateFormat($("#fb-pp-input-date-format").attr("value"));pValidationConfig.set_config_subtype(b.id,"date_config","dateFormat",f);e.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);e.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(e))})},fontFamily:function(o){var k=$(o).css("font-family").replace(/'/g,"");if(k){k=k.split(",")[0]}var h=fb_defaults.get_default_configuration_value("form","font");var n;var b;var l=null;var g="Font:";if($(o).hasClass("fb-checkbox")||$(o).hasClass("fb-radio")){g="Elements:"}this.markup='<label class="label_grouped_main">								<span class="primary_left">'+g+'</span>								<select class="combo_right combo_font" id="fb-pp-input-header-font" ></select> 						</label>';fb_panel.add(this.markup);var d=document.getElementById("fb-pp-input-header-font");for(var e=0;e<document.styleSheets.length;e++){if(document.styleSheets[e].href==$("#theme").get(0).href){l=document.styleSheets[e]}}if(l){var m=l.cssRules?l.cssRules:l.rules;if(m){var c="";if(o.tagName=="H2"){c="#doccontainer .fb-header h2"}else{if(o.tagName=="P"){c="#doccontainer .fb-static-text p"}else{if($(o).hasClass("fb-checkbox")){c="#docContainer .fb-checkbox"}else{if($(o).hasClass("fb-radio")){c="#docContainer .fb-radio"}}}}var a=false;var f=$(o).hasClass("fb-checkbox")||$(o).hasClass("fb-radio");for(var e=m.length-1;e>=0;e--){if((jQuery.trim(m[e].selectorText.toLowerCase())==c)&&m[e].style.fontFamily.length){b=m[e].style.fontFamily;var p=b.split(",")[0];p=p.replace(/'/g,"");n=new Option(p,"");n.title=p;d.add(n);a=true;break}}if(!a){for(var e=m.length-1;e>=0;e--){if((m[e].selectorText=="#docContainer")&&m[e].style.fontFamily.length){b=m[e].style.fontFamily;var p=b.split(",")[0];p=p.replace(/'/g,"");n=new Option(p,"");n.title=p;if(!f||p==k){d.add(n)}break}}}}}for(e in h){if((typeof(h[e])=="string")&&p&&(h[e].toLowerCase()!=p.toLowerCase())){n=new Option(h[e],h[e].toLowerCase());n.title=h[e];d.add(n)}}fb_utils.setValueToSelected(k,d);$("#fb-pp-input-header-font").change(function(){fb_editor.backgroundActive();var q=$("#fb-pp-input-header-font").attr("value");var r=fb_undo.getItemParams(o);$(o).css("font-family",q);r.markupredo=fb_utils.getouterHtml($(o).parent()[0]);var s=fb_editor.JSONParser.stringify(r);appVar.pushUndo_(s)})},fontColor:function(c){this.markup='<label class="label_grouped">							<div class="color_right fb-color-control element_property_actions" id="fb-color"><div></div></div>						</label>';fb_panel.add(this.markup);var e=fb_utils.getHexFromShortHex($(c).css("color"));var d=e;var a=e;if(/rgb/.test(a)){a=fb_utils.getHexFromRGB(e)}var b;$("#fb-color div").css("background-color",e);$("#fb-color").ColorPicker({color:a,onShow:function(f){b=fb_undo.getItemParams($(c).parent()[0]);$(f).fadeIn(0);$(f).find("input").focus(function(){fb_panel.inputFocused=this});$(f).find("input").blur(function(){fb_panel.inputFocused=""})},onHide:function(g){$(g).fadeOut(0);if(d!=$("#fb-color div").css("background-color")){b.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);var f=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(f);d=$("#fb-color div").css("background-color")}},onChange:function(f,k,g){$("#fb-color div").css("background-color","#"+k);$(c).css("color","#"+k);var h=$(c.parentNode.parentNode.childNodes[2]);if((h.length>0)&&(!$(h[0]).hasClass("fb-hint"))){$(c.parentNode.parentNode.childNodes[2].firstChild).css("color","#"+k)}}})},fontWeight:function(b){var c=$(b).css("font-weight");var a=c=="bold"||parseInt(c)>=700?'checked="true"':"";this.markup='<label class="label_checkbox_bold">							<input id="fb-pp-input-bold" type="checkbox" '+a+' maxlength="125" />							<span class="primary_right">Bold</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-bold").change(function(){var d=$("#fb-pp-input-bold");var e=fb_undo.getItemParams($(b).parent()[0]);var g=d.attr("checked")?"bold":"normal";$(b).css("font-weight",g);var f=$(b.parentNode.parentNode.childNodes[2]);if((f.length>0)&&(!$(f[0]).hasClass("fb-hint"))){$(b.parentNode.parentNode.childNodes[2].firstChild).css("font-weight",g)}e.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(e))})},fontItalic:function(b){var c=$(b).css("font-style");var a=c=="italic"?'checked="true"':"";this.markup='<label class="label_checkbox_italic">							<input id="fb-pp-input-italic" type="checkbox" '+a+' maxlength="125" />							<span class="primary_right">Italic</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-italic").change(function(){var d=$("#fb-pp-input-italic");var f=fb_undo.getItemParams($(b).parent()[0]);var e=d.attr("checked")?"italic":"normal";$(b).css("font-style",e);var g=$(b.parentNode.parentNode.childNodes[2]);if((g.length>0)&&(!$(g[0]).hasClass("fb-hint"))){$(b.parentNode.parentNode.childNodes[2].firstChild).css("font-style",e)}f.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},alignment:function(b){function a(){if($(b).hasClass("fb-item-alignment-center")){return"fb-item-alignment-center"}else{if($(b).hasClass("fb-item-alignment-right")){return"fb-item-alignment-right"}else{if($(b).hasClass("fb-item-alignment-justify")){return"fb-item-alignment-justify"}else{return"fb-item-alignment-left"}}}}var c=a(b);this.markup='<label class="label_combo">						<span class="primary_left">Position:</span>							<select id="fb-pp-input-header-alignment" class="combo_right" >								<option value = "fb-item-alignment-left">Left</option>								<option value = "fb-item-alignment-center">Center</option>								<option value = "fb-item-alignment-right">Right</option>								<option value = "fb-item-alignment-justify">Justify</option>							 </select>						</label>';fb_panel.add(this.markup);var d=document.getElementById("fb-pp-input-header-alignment");fb_utils.setValueToSelected(c,d);$("#fb-pp-input-header-alignment").change(function(){var e=$("#fb-pp-input-header-alignment").attr("value");var f=a(b);jsonobj=fb_undo.getItemParams(b);$(b).removeClass(f);$(b).addClass(e);jsonobj.markupredo=fb_utils.getouterHtml($(b).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(jsonobj))})},predefinedList:function(b,c){var a='<span class="object_control_button" id="fb-bt-loadlist">Pl</span>';$("#"+b).append(a);$("#fb-bt-loadlist").click(function(){var d=$(c).parent()[0].id;appVar.getPredefinedList_(d)})},server:function(a){var b=pValidationConfig.get_config_value(a.id,"files");var c=b?'checked="true"':"";this.markup='<span class="label_checkgroup">Field Options:</span>						<label class="label_checkbox">							<input id="fb-pp-input-save" class="check_left" type="checkbox" '+c+' " maxlength=125">							<span class="primary_right">Save to server</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-save").change(function(){var d=fb_undo.getItemParams($(a).parent()[0]);d.validation_object_id=a.id;d.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(a.id));pValidationConfig.set_config_type(a.id,"files",$("#fb-pp-input-save").attr("checked"));d.markupredo=fb_utils.getouterHtml($(a).parent().parent()[0]);d.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(a.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},database:function(b){var c=pValidationConfig.get_config_value(b.id,"database");var a=c?'checked="true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-store" class="check_left"  type="checkbox" '+a+' " maxlength="125" >							<span class="primary_right">Store in database</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-store").change(function(){var e=appVar.canStoreInDataBase();if($("#fb-pp-input-store").attr("checked")&&!e){appVar.displayAlert_('If you would like to store uploaded files in your database, please enable "Save to a MySQL database" in the Saving Data section of the Settings menu.');$("#fb-pp-input-store").attr("checked",false);return}var d=fb_undo.getItemParams($(b).parent()[0]);d.validation_object_id=b.id;d.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));pValidationConfig.set_config_type(b.id,"database",$("#fb-pp-input-store").attr("checked"));d.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);d.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},mail:function(a){var b=pValidationConfig.get_config_value(a.id,"attach");var c=b?'checked="true"':"";this.markup='<label class="label_checkbox">							<input id="fb-pp-input-attach" class="check_left"  type="checkbox" '+c+' " maxlength="125" >							<span class="primary_right">Attach to mail</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-attach").change(function(){var e=appVar.canAttachToMail();if($("#fb-pp-input-attach").attr("checked")&&!e){appVar.displayAlert_('If you would like to attach the uploaded file to your notification message, please enable "Notification message" in the Email Notices section of the Settings menu.');$("#fb-pp-input-attach").attr("checked",false);return}var d=fb_undo.getItemParams($(a).parent()[0]);d.validation_object_id=a.id;d.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(a.id));pValidationConfig.set_config_type(a.id,"attach",$("#fb-pp-input-attach").attr("checked"));d.markupredo=fb_utils.getouterHtml($(a).parent().parent()[0]);d.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(a.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},maxupload:function(d){var b=fb_defaults.get_default_value_validation("file","maxbytes");var a=d.id;var f=pValidationConfig.get_config_value(a,"maxbytes");if(f==undefined||f.length==0){f=b}var e=f;var c=e;this.markup='<label class="label_contextual_stepper_number">							<span class="contextual_left">Max. File Size:</span>							<input id="fb-pp-input-upload" type="text" value="'+e+'"min="1">							<span class="contextual_right">kB</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-upload").change(function(){var l=fb_utils.clearNotNumericChars($("#fb-pp-input-upload").attr("value"));$("#fb-pp-input-upload").attr("value",l);if(l>0&&l<=8192){var g=fb_undo.getItemParams($(d).parent()[0]);g.validation_object_id=d.id;g.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));var h=$("#fb-pp-input-upload").attr("value")*1;pValidationConfig.set_config_type(d.id,"maxbytes",h);g.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);g.validation_object_redo=pValidationConfig.get_config_id(d.id);var k=fb_editor.JSONParser.stringify(g);appVar.pushUndo_(k)}else{var m;if(l<=0){m="Please enter a file size that is greater than 0kB."}else{m="Please enter a file size that is lower or equal to 8192kB."}appVar.displayAlert_(m);$("#fb-pp-input-upload").attr("value",c)}});$("#fb-pp-input-upload").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-upload")});$("#fb-pp-input-upload").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},fontSize:function(b){var d=parseInt($(b).css("font-size"));var e=d;var a=0;this.markup='<label class="label_grouped">						<input id="fb-pp-input-fontsize" class="input_right" type="text" value="'+d+'" maxlength="20">					</label>';fb_panel.add(this.markup);function c(){if(a>0&&a<196&&((a+"px")!=$(b).css("font-size"))){var g=fb_undo.getItemParams(b);e=a;$(b).css("font-size",a);g.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var h=fb_editor.JSONParser.stringify(g);appVar.pushUndo_(h)}else{$("#fb-pp-input-fontsize").attr("value",e);$(b).css("font-size",e);if(a>=196){var f=($(b).attr("tagName")=="H2")?"title/heading":"plain text";appVar.displayAlert_("The maximum size allowed for a "+f+" element is 195.")}}}$("#fb-pp-input-fontsize").change(function(){var f=$("#fb-pp-input-fontsize");a=fb_utils.clearNotNumericChars(f.attr("value"));f.attr("value",a);var g=f.attr("value");if(g+"px"!=$(b).css("font-size")){c()}});$("#fb-pp-input-fontsize").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-fontsize")});$("#fb-pp-input-fontsize").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});$("#fb-pp-input-fontsize").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}a=$("#fb-pp-input-fontsize").attr("value")*1;if(a<10||a>60||fb_utils.hasNotNumericChars(a)){return}c()})},fileExtensions:function(e){this.markup='<label class="label_multiline has_object_controls"><span class="primary_left">Allowed Files:</span><div class="manager_descriptors"><span class="allowed_files_label_type" title="File Type (extension)">Type</span></div></label><div class="manager_wrapper" id ="allowed_files_wrapper_div_id" >';fb_panel.add(this.markup);var f=pValidationConfig.get_config_value(e.id,"accept");var a=f.split("|");var c=document.getElementById("allowed_files_wrapper_div_id");for(var d in a){if(a[d]!=""){var b="";b='<div class="allowed_row"><input type="text" class="allowed_input_attr_type" title="'+a[d]+'" value="'+a[d]+'" title="File Type (extension)"></div>';$("#allowed_files_wrapper_div_id").append(b);fb_panel.initFileExtensionRow(e)}}fb_panel.add('<div class="object_controls" id="allowed_files_object_controls"></div>')},addFileExtension:function(b){var a='<span class="object_control_button" id="fb-bt-addlistitem">&#43;</span>';$("#allowed_files_object_controls").append(a);$("#fb-bt-addlistitem").click(function(){var f=fb_undo.getItemParams($(b).parent()[0]);f.validation_object_id=b.id;f.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var e=fb_toolbox.generateName("ext",fb_utils.existsFileTypeName,b);var c="";c='<div class="allowed_row"><input type="text" class="allowed_input_attr_type" title="'+e+'" value="'+e+'" title="File Type (extension)"></div>';$("#allowed_files_wrapper_div_id").append(c);var h=pValidationConfig.get_config_value(b.id,"accept");if(h!=""){h=h+"|"+e}else{h=e}pValidationConfig.set_config_type(b.id,"accept",h);fb_panel.initFileExtensionRow(b);var d=document.getElementById("allowed_files_wrapper_div_id");$(d.lastChild.childNodes[0]).trigger("dblclick");fb_utils.setScrollAtBottom("allowed_files_wrapper_div_id","allowed_row");f.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);f.validation_object_redo=pValidationConfig.get_config_id(b.id);var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)})},removeFileExtension:function(b){var a='<span class="object_control_button" id="removelistitem">&#8722;</span>';$("#allowed_files_object_controls").append(a);$("#removelistitem").click(function(){var n=fb_undo.getItemParams($(b).parent()[0]);n.validation_object_id=b.id;n.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));var m=false;var c=document.getElementById("allowed_files_wrapper_div_id");var d=c.childNodes;var h="";var l=0;var e=null;for(var k=d.length-1;k>=0;k--){if($(d[k]).hasClass("selected_row")){++l;if(d[k-1]){e=d[k-1]}else{if(d[k+1]){e=d[k+1]}}}}for(var k=d.length-1;k>=0;k--){if($(d[k]).hasClass("selected_row")){$(d[k]).remove();m=true}}for(var f=0;f<d.length;f++){h+=d[f].childNodes[0].value+"|"}h=h.substring(0,h.length-1);pValidationConfig.set_config_type(b.id,"accept",h);if(m){n.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);n.validation_object_redo=pValidationConfig.get_config_id(b.id);appVar.pushUndo_(fb_editor.JSONParser.stringify(n))}if((l==1)&&(e)){$(e).addClass("selected_row")}else{if(l>=2){var g=d.length-1;$(d[g]).addClass("selected_row")}}})},alignmentCheckRadio:function(b){var c="side";switch(a(b)){case"fb-one-column":c="one";break;case"fb-two-column":c="two";break;case"fb-three-column":c="three";break;default:c="side"}this.markup='<label class="label_combo">							<span class="primary_left">Layout:</span>							<select id="fb-pp-input-column-alignment" class="combo_right">								<option value = "side">Side by Side</option>								<option value = "one">One Column</option>								<option value = "two">Two Columns</option>								<option value = "three">Three Columns</option>							</select>						</label>';fb_panel.add(this.markup);var d=document.getElementById("fb-pp-input-column-alignment");fb_utils.setValueToSelected(c,d);function a(e){if($(e).hasClass("fb-one-column")){return"fb-one-column"}else{if($(e).hasClass("fb-two-column")){return"fb-two-column"}else{if($(e).hasClass("fb-three-column")){return"fb-three-column"}else{return"fb-side-by-side"}}}}$("#fb-pp-input-column-alignment").change(function(){var f=fb_undo.getItemParams(b[0].firstChild,true);var e=$("#fb-pp-input-column-alignment").attr("value");var g=a(b);$(b).removeClass(g);if(e=="one"){$(b).addClass("fb-one-column")}else{if(e=="two"){$(b).addClass("fb-two-column")}else{if(e=="three"){$(b).addClass("fb-three-column")}else{if(e=="side"){$(b).addClass("fb-side-by-side")}}}}f.markupredo=fb_utils.getouterHtml(b[0],true);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},itemWidth:function(a){var c="fb-100-item-column";switch(b(a)){case"fb-100-item-column":c="one";break;case"fb-75-item-column":c="two";break;case"fb-66-item-column":c="three";break;case"fb-50-item-column":c="four";break;case"fb-33-item-column":c="five";break;case"fb-25-item-column":c="six";break;case"fb-20-item-column":c="seven"}this.markup='<label class="label_combo">							<span class="primary_left">Width:</span>							<select id="fb-pp-input-item-width" class="combo_right">								<option value = "one">100%</option>								<option value = "two">75%</option>								<option value = "three">66%</option>								<option value = "four">50%</option>								<option value = "five">33%</option>								<option value = "six">25%</option>								<option value = "seven">20%</option>							</select>						</label>';fb_panel.add(this.markup);var d=document.getElementById("fb-pp-input-item-width");fb_utils.setValueToSelected(c,d);function b(e){if($(e).hasClass("fb-100-item-column")){return"fb-100-item-column"}else{if($(e).hasClass("fb-75-item-column")){return"fb-75-item-column"}else{if($(e).hasClass("fb-66-item-column")){return"fb-66-item-column"}else{if($(e).hasClass("fb-50-item-column")){return"fb-50-item-column"}else{if($(e).hasClass("fb-33-item-column")){return"fb-33-item-column"}else{if($(e).hasClass("fb-25-item-column")){return"fb-25-item-column"}else{if($(e).hasClass("fb-20-item-column")){return"fb-20-item-column"}else{return"fb-100-item-column"}}}}}}}}$("#fb-pp-input-item-width").change(function(){var g=fb_undo.getItemParams(a[0].firstChild,true);var f=$("#fb-pp-input-item-width").attr("value");var k=b(a);$(a).removeClass(k);if(f=="one"){$(a).addClass("fb-100-item-column")}else{if(f=="two"){$(a).addClass("fb-75-item-column")}else{if(f=="three"){$(a).addClass("fb-66-item-column")}else{if(f=="four"){$(a).addClass("fb-50-item-column")}else{if(f=="five"){$(a).addClass("fb-33-item-column")}else{if(f=="six"){$(a).addClass("fb-25-item-column")}else{if(f=="seven"){$(a).addClass("fb-20-item-column")}}}}}}}if(a.get(0).childNodes[1]){var e=a.get(0).childNodes[1].firstChild.tagName;if(e=="TEXTAREA"){var h=$(a.get(0).childNodes[1].firstChild).css("width");h=h.substr(0,h.length-2);$("#fb-pp-input-textarea-width").attr("value",h)}}else{if(a.get(0).childNodes[0]&&a.get(0).childNodes[0].firstChild){var e=a.get(0).childNodes[0].firstChild.tagName;if(e=="HR"){var h=$(a.get(0).childNodes[0].firstChild).css("width");h=h.substr(0,h.length-2);$("#fb-pp-input-width").attr("value",h)}}}g.markupredo=fb_utils.getouterHtml(a[0],true);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))})},requiredChecks:function(c){var d=pValidationConfig.get_config_value(c.id,"minlength");var a=d;var b=c.parentNode.parentNode.childNodes.length;this.markup='<label class="label_contextual_stepper">							<span class="contextual_left">Require</span>							<input id="fb-pp-input-requirednumber" type="text" value="'+d+'"min="0" max="'+b+'">							<span class="contextual_right">options to be checked</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-requirednumber").change(function(){if(a==$("#fb-pp-input-requirednumber").attr("value")){return}var e=fb_undo.getItemParams($(c).parent().parent()[0],true);e.validation_object_id=c.id;e.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));fb_panel.updateChecksRequired(c);if(a!=$("#fb-pp-input-requirednumber").attr("value")){e.markupredo=fb_utils.getouterHtml($(c).parent().parent().parent()[0],true);e.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(c.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(e));a=$("#fb-pp-input-requirednumber").attr("value")}});$("#fb-pp-input-requirednumber").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-requirednumber")});$("#fb-pp-input-requirednumber").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},hintRadioCheck:function(m){var g=m.firstChild.firstChild.getAttribute("data-hint");g=fb_utils.replaceString(g,"<br>","\n");g=fb_utils.replaceString(g,"<BR>","\n");this.markup='<label class="label_input">							<span class="primary_left">Friendly Hint:</span>							<textarea id="fb-pp-input-hintex" class="textarea_right" type="text" maxlength="512" >'+fb_utils.htmlEncode(g)+"</textarea>						</label>";fb_panel.add(this.markup);var c=fb_utils.getouterHtml($(m).parent()[0],true);var a=false;$("#fb-pp-input-hintex").change(function(){if(a&&(c!=fb_utils.getouterHtml($(m).parent()[0]),true)){var o=fb_undo.getItemParams(m,true);o.markup=c;$(this).attr("value",$(this).attr("value").replace(/^[ ]+|[ ]+$/g,""));var p=fb_utils.htmlEncode($("#fb-pp-input-hintex").attr("value"));p=fb_utils.replaceString(p,"\n","<br>");if(p){m.firstChild.firstChild.setAttribute("data-hint",$("#fb-pp-input-hintex").attr("value"));if(!m.nextSibling){if($("#fb-pp-check-hide-hints").attr("checked")){$(m).after('<div class="fb-hint hidden_hint"></div>')}else{$(m).after('<div class="fb-hint"></div>')}$(m.nextSibling).css("color",$("#fb-hint-color div").css("background-color"));if($("#fb-pp-input-hint-bold").attr("checked")){$(m.nextSibling).css("font-weight","bold")}else{$(m.nextSibling).css("font-weight","normal")}if($("#fb-pp-input-hint-italic").attr("checked")){$(m.nextSibling).css("font-style","italic")}else{$(m.nextSibling).css("font-style","normal")}}m.nextSibling.innerHTML=p;$(m.nextSibling).css("display","")}else{if(m.nextSibling){m.firstChild.firstChild.setAttribute("data-hint","");$(m.nextSibling).css("display","none")}}c=fb_utils.getouterHtml($(m).parent()[0],true);o.markupredo=fb_utils.getouterHtml($(m).parent()[0],true);appVar.pushUndo_(fb_editor.JSONParser.stringify(o));a=false}});$("#fb-pp-input-hintex").keyup(function(o){if(o.keyCode=="9"){return}a=true;if(o.keyCode=="13"){$("#fb-pp-input-hintex").trigger("change");return}var p=fb_utils.replaceString(fb_utils.htmlEncode($("#fb-pp-input-hintex").attr("value")),"\n","<br>");if(p){m.firstChild.firstChild.setAttribute("data-hint",$("#fb-pp-input-hintex").attr("value"));if(!m.nextSibling){if($("#fb-pp-check-hide-hints").attr("checked")){$(m).after('<div class="fb-hint hidden_hint"></div>')}else{$(m).after('<div class="fb-hint"></div>')}$(m.nextSibling).css("color",$("#fb-hint-color div").css("background-color"));if($("#fb-pp-input-hint-bold").attr("checked")){$(m.nextSibling).css("font-weight","bold")}else{$(m.nextSibling).css("font-weight","normal")}if($("#fb-pp-input-hint-italic").attr("checked")){$(m.nextSibling).css("font-style","italic")}else{$(m.nextSibling).css("font-style","normal")}}m.nextSibling.innerHTML=p;$(m.nextSibling).css("display","");$("#fb-hint-label-color").fadeIn("slow");$("#fb-hint-label-bold").fadeIn("slow");$("#fb-hint-label-italic").fadeIn("slow")}else{if(m.nextSibling){m.firstChild.firstChild.setAttribute("data-hint","");$(m.nextSibling).css("display","none")}$("#fb-hint-label-color").css("display","none");$("#fb-hint-label-bold").css("display","none");$("#fb-hint-label-italic").css("display","none")}});$("#fb-pp-input-hintex").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-hintex");c=fb_utils.getouterHtml($(m).parent()[0],true)});$("#fb-pp-input-hintex").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});this.markup='<label id="fb-hint-label-color" class="label_color">							<span class="primary_left">Hint Style:</span>							<div class="color_right fb-color-control" id="fb-hint-color"><div></div></div>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-color").css("display","inline")}else{$("#fb-hint-label-color").css("display","none")}var k;if($(m.nextSibling).get(0)){k=fb_utils.getHexFromShortHex($(m.nextSibling).css("color"))}else{$("#docContainer").append('<div id="fb-dummy-color" class="fb-hint"/>');k=fb_utils.getHexFromShortHex($("#fb-dummy-color").css("color"));$("#fb-dummy-color").remove()}var d=k;var f=k;if(/rgb/.test(f)){f=fb_utils.getHexFromRGB(k)}var l;$("#fb-hint-color div").css("background-color",k);$("#fb-hint-color").ColorPicker({color:f,onShow:function(o){l=fb_undo.getItemParams(m);$(o).fadeIn(0);$(o).find("input").focus(function(){fb_panel.inputFocused=this});$(o).find("input").blur(function(){fb_panel.inputFocused=""})},onHide:function(p){$(p).fadeOut(0);if(d!=$("#fb-hint-color div").css("background-color")){l.markupredo=fb_utils.getouterHtml($(m).parent()[0]);var o=fb_editor.JSONParser.stringify(l);appVar.pushUndo_(o);d=$("#fb-hint-color div").css("background-color")}},onChange:function(o,q,p){$("#fb-hint-color div").css("background-color","#"+q);$(m.nextSibling).css("color","#"+q)}});var n;if($(m.nextSibling).get(0)){n=$(m.nextSibling).css("font-weight")}var e=n=="bold"||parseInt(n)>=700?'checked="true"':"";this.markup='<label id="fb-hint-label-bold" class="label_checkbox_bold">							<input id="fb-pp-input-hint-bold" type="checkbox" '+e+' maxlength="125" />							<span class="primary_right">Bold</span>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-bold").css("display","inline")}else{$("#fb-hint-label-bold").css("display","none")}$("#fb-pp-input-hint-bold").change(function(){if($(m.nextSibling).get(0)){var o=$("#fb-pp-input-hint-bold");var p=fb_undo.getItemParams(m);if(o.attr("checked")){$(m.nextSibling).css("font-weight","bold")}else{$(m.nextSibling).css("font-weight","normal")}p.markupredo=fb_utils.getouterHtml($(m).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))}});var h;if($(m.nextSibling).get(0)){h=$(m.nextSibling).css("font-style")}var b=h=="italic"?'checked="true"':"";this.markup='<label id ="fb-hint-label-italic" class="label_checkbox_italic">							<input id="fb-pp-input-hint-italic" type="checkbox" '+b+' maxlength="125" />							<span class="primary_right">Italic</span>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-italic").css("display","inline")}else{$("#fb-hint-label-italic").css("display","none")}$("#fb-pp-input-hint-italic").change(function(){if($(m.nextSibling).get(0)){var o=$("#fb-pp-input-hint-italic");var p=fb_undo.getItemParams(m);if(o.attr("checked")){$(m.nextSibling).css("font-style","italic")}else{$(m.nextSibling).css("font-style","normal")}p.markupredo=fb_utils.getouterHtml($(m).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))}})},hintDropList:function(m){var g=m.getAttribute("data-hint");g=fb_utils.replaceString(g,"<br>","\n");g=fb_utils.replaceString(g,"<BR>","\n");var c=fb_utils.getouterHtml($(m).parent().parent()[0]);var a=false;this.markup='<label class="label_input">							<span class="primary_left">Friendly Hint:</span>							<textarea id="fb-pp-input-hintex" class="textarea_right" type="text" maxlength="512" >'+fb_utils.htmlEncode(g)+"</textarea>						</label>";fb_panel.add(this.markup);$("#fb-pp-input-hintex").change(function(){if(a&&(c!=fb_utils.getouterHtml($(m).parent().parent()[0]))){var o=fb_undo.getItemParams($(m).parent()[0]);o.markup=c;$(this).attr("value",$(this).attr("value").replace(/^[ ]+|[ ]+$/g,""));var q=fb_utils.htmlEncode($("#fb-pp-input-hintex").attr("value"));q=fb_utils.replaceString(q,"\n","<br>");if(q){m.setAttribute("data-hint",$("#fb-pp-input-hintex").attr("value"));if(!m.parentElement.nextSibling){if($("#fb-pp-check-hide-hints").attr("checked")){$(m.parentElement).after('<div class="fb-hint hidden_hint"></div>')}else{$(m.parentElement).after('<div class="fb-hint"></div>')}$(m.parentElement.nextSibling).css("color",$("#fb-hint-color div").css("background-color"));if($("#fb-pp-input-hint-bold").attr("checked")){$(m.parentElement.nextSibling).css("font-weight","bold")}else{$(m.parentElement.nextSibling).css("font-weight","normal")}if($("#fb-pp-input-hint-italic").attr("checked")){$(m.parentElement.nextSibling).css("font-style","italic")}else{$(m.parentElement.nextSibling).css("font-style","normal")}}m.parentElement.nextSibling.innerHTML=q;$(m.parentElement.nextSibling).css("display","")}else{if(m.parentElement.nextSibling){m.setAttribute("data-hint","");$(m.parentElement.nextSibling).css("display","none")}}c=fb_utils.getouterHtml($(m).parent().parent()[0]);o.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);var p=fb_editor.JSONParser.stringify(o);appVar.pushUndo_(p);a=false}});$("#fb-pp-input-hintex").keyup(function(o){if(o.keyCode=="9"){return}if(o.keyCode=="13"){a=true;$("#fb-pp-input-hintex").trigger("change");return}var p=fb_utils.htmlEncode($("#fb-pp-input-hintex").attr("value"));p=fb_utils.replaceString(p,"\n","<br>");if(p){m.setAttribute("data-hint",$("#fb-pp-input-hintex").attr("value"));if(!m.parentElement.nextSibling){if($("#fb-pp-check-hide-hints").attr("checked")){$(m.parentElement).after('<div class="fb-hint hidden_hint"></div>')}else{$(m.parentElement).after('<div class="fb-hint"></div>')}$(m.parentElement.nextSibling).css("color",$("#fb-hint-color div").css("background-color"));if($("#fb-pp-input-hint-bold").attr("checked")){$(m.parentElement.nextSibling).css("font-weight","bold")}else{$(m.parentElement.nextSibling).css("font-weight","normal")}if($("#fb-pp-input-hint-italic").attr("checked")){$(m.parentElement.nextSibling).css("font-style","italic")}else{$(m.parentElement.nextSibling).css("font-style","normal")}}m.parentElement.nextSibling.innerHTML=p;$(m.parentElement.nextSibling).css("display","");$("#fb-hint-label-color").fadeIn("slow");$("#fb-hint-label-bold").fadeIn("slow");$("#fb-hint-label-italic").fadeIn("slow")}else{if(m.parentElement.nextSibling){m.setAttribute("data-hint","");$(m.parentElement.nextSibling).css("display","none")}$("#fb-hint-label-color").css("display","none");$("#fb-hint-label-bold").css("display","none");$("#fb-hint-label-italic").css("display","none")}a=true});$("#fb-pp-input-hintex").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-hintex");c=fb_utils.getouterHtml($(m).parent().parent()[0])});$("#fb-pp-input-hintex").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});this.markup='<label id="fb-hint-label-color" class="label_color">							<span class="primary_left">Hint Style:</span>							<div class="color_right fb-color-control" id="fb-hint-color"><div></div></div>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-color").css("display","inline")}else{$("#fb-hint-label-color").css("display","none")}var k;if($(m.parentElement.nextSibling).get(0)){k=fb_utils.getHexFromShortHex($(m.parentElement.nextSibling).css("color"))}else{$("#docContainer").append('<div id="fb-dummy-color" class="fb-hint"/>');k=$("#fb-dummy-color").css("color");$("#fb-dummy-color").remove()}var d=k;var f=k;if(/rgb/.test(f)){f=fb_utils.getHexFromRGB(k)}var l;$("#fb-hint-color div").css("background-color",k);$("#fb-hint-color").ColorPicker({color:f,onShow:function(o){l=fb_undo.getItemParams($(m).parent()[0]);$(o).fadeIn(0);$(o).find("input").focus(function(){fb_panel.inputFocused=this});$(o).find("input").blur(function(){fb_panel.inputFocused=""})},onHide:function(p){$(p).fadeOut(0);if(d!=$("#fb-hint-color div").css("background-color")){l.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);var o=fb_editor.JSONParser.stringify(l);appVar.pushUndo_(o);d=$("#fb-hint-color div").css("background-color")}},onChange:function(o,q,p){$("#fb-hint-color div").css("background-color","#"+q);$(m.parentElement.nextSibling).css("color","#"+q)}});var n;if($(m.parentElement.nextSibling).get(0)){n=$(m.parentElement.nextSibling).css("font-weight")}var e=n=="bold"||parseInt(n)>=700?'checked="true"':"";this.markup='<label id="fb-hint-label-bold" class="label_checkbox_bold">							<input id="fb-pp-input-hint-bold" type="checkbox" '+e+' maxlength="125" />							<span class="primary_right">Bold</span>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-bold").css("display","inline")}else{$("#fb-hint-label-bold").css("display","none")}$("#fb-pp-input-hint-bold").change(function(){if($(m.parentElement.nextSibling).get(0)){var o=$("#fb-pp-input-hint-bold");var p=fb_undo.getItemParams($(m).parent()[0]);if(o.attr("checked")){$(m.parentElement.nextSibling).css("font-weight","bold")}else{$(m.parentElement.nextSibling).css("font-weight","normal")}p.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))}});var h;if($(m.parentElement.nextSibling).get(0)){h=$(m.parentElement.nextSibling).css("font-style")}var b=h=="italic"?'checked="true"':"";this.markup='<label id ="fb-hint-label-italic" class="label_checkbox_italic">							<input id="fb-pp-input-hint-italic" type="checkbox" '+b+' maxlength="125" />							<span class="primary_right">Italic</span>						</label>';fb_panel.add(this.markup);if(g!=""){$("#fb-hint-label-italic").css("display","inline")}else{$("#fb-hint-label-italic").css("display","none")}$("#fb-pp-input-hint-italic").change(function(){if($(m.parentElement.nextSibling).get(0)){var o=$("#fb-pp-input-hint-italic");var p=fb_undo.getItemParams($(m).parent()[0]);if(o.attr("checked")){$(m.parentElement.nextSibling).css("font-style","italic")}else{$(m.parentElement.nextSibling).css("font-style","normal")}p.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(p))}})},checkradiofont:function(h){this.markup='<label class="label_grouped">							<div class="color_right fb-color-control element_property_actions" id="fb-checkradio-color"><div></div></div>						</label>';fb_panel.add(this.markup);var f=fb_utils.getHexFromShortHex($(h).css("color"));var b=f;var d=f;if(/rgb/.test(d)){d=fb_utils.getHexFromRGB(f)}var g;$("#fb-checkradio-color div").css("background-color",f);$("#fb-checkradio-color").ColorPicker({color:d,onShow:function(l){g=fb_undo.getItemParams(h);$(l).fadeIn(0);$(l).find("input").focus(function(){fb_panel.inputFocused=this});$(l).find("input").blur(function(){fb_panel.inputFocused=""})},onHide:function(m){$(m).fadeOut(0);if(b!=$("#fb-checkradio-color div").css("background-color")){g.markupredo=fb_utils.getouterHtml($(h).parent()[0]);var l=fb_editor.JSONParser.stringify(g);appVar.pushUndo_(l);b=$("#fb-checkradio-color div").css("background-color")}},onChange:function(l,n,m){$("#fb-checkradio-color div").css("background-color","#"+n);$(h).css("color","#"+n)}});var k=$(h).css("font-weight");var c=k=="bold"||parseInt(k)>=700?'checked="true"':"";this.markup='<label class="label_checkbox_bold">							<input id="fb-pp-input-checkradio-bold" type="checkbox" '+c+' maxlength="125" />							<span class="primary_right">Bold</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-checkradio-bold").change(function(){var l=$("#fb-pp-input-checkradio-bold");var m=fb_undo.getItemParams(h);if(l.attr("checked")){$(h).css("font-weight","bold")}else{$(h).css("font-weight","normal")}m.markupredo=fb_utils.getouterHtml($(h).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(m))});var e=$(h).css("font-style");var a=e=="italic"?'checked="true"':"";this.markup='<label class="label_checkbox_italic">							<input id="fb-pp-input-checkradio-italic" type="checkbox" '+a+' maxlength="125" />							<span class="primary_right">Italic</span>						</label>';fb_panel.add(this.markup);$("#fb-pp-input-checkradio-italic").change(function(){var l=$("#fb-pp-input-checkradio-italic");var m=fb_undo.getItemParams(h);if(l.attr("checked")){$(h).css("font-style","italic")}else{$(h).css("font-style","normal")}m.markupredo=fb_utils.getouterHtml($(h).parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(m))})},checkboxes:function(d){this.markup='<label class="label_multiline has_object_controls"><span class="primary_left">Options:</span><div class="manager_descriptors"><span class="manager_status">&#10003;</span><span class="manager_label">Value</span></div></label><div class="manager_wrapper" id ="chekboxes_wrapper_div_id" ></div>';fb_panel.add(this.markup);var e=$(d).children();for(var c=0;c<e.length;c++){var b="";var a="";var f="";if(pPaymentsConfig.get_config_value(d.firstChild.firstChild.id,"type")!="none"){a=e[c].childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(d.firstChild.firstChild.id,e[c].childNodes[1].innerText)}else{a=e[c].childNodes[1].innerText}if(e[c].childNodes[0].checked){f="checked = 'true' ";$(e[c].childNodes[0]).attr("checked","true");e[c].childNodes[0].setAttribute("checked",true)}else{$(e[c].childNodes[0]).removeAttr("checked")}b='<div class="checkbox_row"><input type="checkbox" class="checkbox_attr_checked"'+f+'><input  class="checkbox_attr_label" type=text title="'+fb_utils.htmlEncode(a)+'" value="'+fb_utils.htmlEncode(a)+'"></div>';$("#chekboxes_wrapper_div_id").append(b);fb_panel.initCheckRow(e[c])}fb_toolbox.generateIds($(d).parent()[0]);fb_panel.add('<div class="object_controls" id="properties_object_panel"></div>')},addCheckbox:function(b){var a='<span class="object_control_button" id="addcheckitem">&#43;</span>';$("#properties_object_panel").append(a);$("#addcheckitem").click(function(){var d=b.firstChild.firstChild.id;var f=fb_undo.getItemParams(b);f.validation_object_id=d;f.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));var c=document.getElementById("chekboxes_wrapper_div_id");var e=fb_toolbox.generateName("Check ",fb_utils.existsCheckRadioName,b);fb_panel.addCheck(b,e);fb_utils.setScrollAtBottom("chekboxes_wrapper_div_id","checkbox_row");fb_toolbox.generateIds($(b).parent()[0]);$("#fb-pp-input-requirednumber").attr("max",c.childNodes.length);f.markupredo=fb_utils.getouterHtml($(b).parent()[0]);f.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},removeCheckbox:function(b){var a='<span class="object_control_button" id="removecheckitem">&#8722;</span>';$("#properties_object_panel").append(a);$("#removecheckitem").click(function(){var o=fb_undo.getItemParams(b);o.validation_object_id=b.childNodes[0].firstChild.id;o.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.childNodes[0].firstChild.id));o.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(b.childNodes[0].firstChild.id));var l=document.getElementById("chekboxes_wrapper_div_id");var c=l.childNodes;var m=0;var d=null;var n=false;for(var h=c.length-1;h>=0;h--){if($(c[h]).hasClass("selected_row")){m+=1;if(c[h-1]){d=c[h-1]}else{if(c[h+1]){d=c[h+1]}}}}var k="";if($(c[0]).hasClass("selected_row")){if($($(b).children()[0].childNodes[0]).attr("data-hint")){k=$($(b).children()[0].childNodes[0]).attr("data-hint")}}for(var h=c.length-1;h>=0;h--){if($(c[h]).hasClass("selected_row")&&(c.length>1)){var e=$(b).children()[h].childNodes[0].getAttribute("name");e=e.substr(0,e.length-2);var f=$(b).children()[h].childNodes[0].getAttribute("value");appVar.updateNameInSettings_("["+e+"="+f+"]");pPaymentsConfig.remove_payment_option(b.childNodes[0].firstChild.id,$(b).children()[h].childNodes[1].innerText);$(c[h]).remove();$($(b).children()[h]).remove();n=true}}if((m==1)&&(d)){$(d).addClass("selected_row")}else{if(m>=2){var g=c.length-1;$(c[g]).addClass("selected_row")}}if(n){fb_toolbox.generateIds($(b).parent()[0]);$("#fb-pp-input-requirednumber").attr("max",c.length);fb_panel.updateChecksRequired(b.childNodes[0].firstChild);if(k.length>0){$($(b).children()[0].childNodes[0]).attr("data-hint",k)}o.markupredo=fb_utils.getouterHtml($(b).parent()[0]);o.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.childNodes[0].firstChild.id));o.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(b.childNodes[0].firstChild.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(o))}})},moveUpCheckbox:function(b){var a='<span class="object_control_button" id="moveitemup">&#8593;</span>';$("#properties_object_panel").append(a);$("#moveitemup").click(function(){var p=fb_undo.getItemParams(b);var h=document.getElementById("chekboxes_wrapper_div_id");var c=h.childNodes;for(var d=1;d<c.length;d++){var n=d;if($(c[n]).hasClass("selected_row")){var f=c[n-1].childNodes[1].value;var o=c[n-1].childNodes[0].checked;var l=$(c[n-1]).hasClass("selected_row");c[n-1].childNodes[1].value=c[n].childNodes[1].value;$(c[n-1]).addClass("selected_row");if(!c[n].childNodes[0].checked){c[n-1].childNodes[0].checked=false}else{c[n-1].childNodes[0].checked=true}c[n].childNodes[1].value=f;c[n].childNodes[0].setAttribute("value",f);if(!l){$(c[n]).removeClass("selected_row")}if(!o){c[n].childNodes[0].checked=false}else{c[n].childNodes[0].checked=true}var k=$(b).children();var e=k[n].childNodes[1].innerText;var m=k[n].childNodes[0].value;k[n].childNodes[1].innerText=k[n-1].childNodes[1].innerText;k[n-1].childNodes[1].innerText=e;k[n].childNodes[0].setAttribute("value",k[n-1].childNodes[0].value);k[n-1].childNodes[0].setAttribute("value",m);if(c[n].childNodes[0].checked){$(k[n].childNodes[0]).attr("checked",true);k[n].childNodes[0].setAttribute("checked",true)}else{$(k[n].childNodes[0]).removeAttr("checked");k[n].childNodes[0].removeAttribute("checked")}if(c[n-1].childNodes[0].checked){$(k[n-1].childNodes[0]).attr("checked",true);k[n-1].childNodes[0].setAttribute("checked",true)}else{$(k[n-1].childNodes[0]).removeAttr("checked");k[n-1].childNodes[0].removeAttribute("checked")}}}fb_panel.makeManagerElementVisible("#chekboxes_wrapper_div_id",true);p.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var g=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(g)})},moveDownCheckbox:function(b){var a='<span class="object_control_button" id="moveitemdown">&#8595;</span>';$("#properties_object_panel").append(a);$("#moveitemdown").click(function(){var p=fb_undo.getItemParams(b);var h=document.getElementById("chekboxes_wrapper_div_id");var c=h.childNodes;for(var d=c.length-2;d>=0;d--){var n=d;if($(c[n]).hasClass("selected_row")){var f=c[n+1].childNodes[1].value;var o=c[n+1].childNodes[0].checked;var l=$(c[n+1]).hasClass("selected_row");c[n+1].childNodes[1].value=c[n].childNodes[1].value;$(c[n+1]).addClass("selected_row");if(!c[n].childNodes[0].checked){c[n+1].childNodes[0].checked=false}else{c[n+1].childNodes[0].checked=true}c[n].childNodes[1].value=f;c[n].childNodes[0].setAttribute("value",f);if(!l){$(c[n]).removeClass("selected_row")}if(!o){c[n].childNodes[0].checked=false}else{c[n].childNodes[0].checked=true}var k=$(b).children();var e=k[n].childNodes[1].innerText;var m=k[n].childNodes[0].value;k[n].childNodes[1].innerText=k[n+1].childNodes[1].innerText;k[n+1].childNodes[1].innerText=e;k[n].childNodes[0].setAttribute("value",fb_utils.htmlEncode(k[n+1].childNodes[0].value));k[n+1].childNodes[0].setAttribute("value",fb_utils.htmlEncode(m));if(c[n].childNodes[0].checked){$(k[n].childNodes[0]).attr("checked",true);k[n].childNodes[0].setAttribute("checked",true)}else{$(k[n].childNodes[0]).removeAttr("checked");k[n].childNodes[0].removeAttribute("checked")}if(c[n+1].childNodes[0].checked){$(k[n+1].childNodes[0]).attr("checked",true);k[n+1].childNodes[0].setAttribute("checked",true)}else{$(k[n+1].childNodes[0]).removeAttr("checked");k[n+1].childNodes[0].removeAttribute("checked")}}}fb_panel.makeManagerElementVisible("#chekboxes_wrapper_div_id",false);p.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var g=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(g)})},radiobuttons:function(e){this.markup='<label class="label_multiline has_object_controls"><span class="primary_left">Options:</span><div class="manager_descriptors"><span class="manager_status">&#10003;</span><span class="manager_label">Value</span></div></label><div class="manager_wrapper" id ="radio_wrapper_div_id" ></div>';fb_panel.add(this.markup);var g=pValidationConfig.get_config_value($(e).children()[0].childNodes[0].id,"required");var f=$(e).children();for(var c=0;c<f.length;c++){var b="";var a="";var h="";var d=g?" disabled ":"";if(pPaymentsConfig.get_config_value(e.firstChild.firstChild.id,"type")!="none"){a=f[c].childNodes[1].innerText+":"+pPaymentsConfig.get_payment_option(e.firstChild.firstChild.id,f[c].childNodes[1].innerText)}else{a=f[c].childNodes[1].innerText}if(f[c].childNodes[0].checked&&!g){h="checked = 'true' ";$(f[c].childNodes[0]).attr("checked","true");f[c].childNodes[0].setAttribute("checked",true)}else{$(f[c].childNodes[0]).removeAttr("checked")}b='<div class="radio_row"><input type="checkbox" '+d+' name="radio_manager" class="radio_attr_selected"'+h+'><input  class="radio_attr_label" type="text" title="'+fb_utils.htmlEncode(a)+'" value="'+fb_utils.htmlEncode(a)+'"></div>';$("#radio_wrapper_div_id").append(b);fb_panel.initRadioRow(f[c])}fb_toolbox.generateIds($(e).parent()[0]);fb_panel.add('<div class="object_controls" id="properties_object_panel"></div>')},addRadio:function(b){var a='<span class="object_control_button" id="addradioitem">&#43;</span>';$("#properties_object_panel").append(a);$("#addradioitem").click(function(){var d=b.firstChild.firstChild.id;var f=fb_undo.getItemParams(b);f.validation_object_id=d;f.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));var c=document.getElementById("radio_wrapper_div_id");var e=fb_toolbox.generateName("Radio ",fb_utils.existsCheckRadioName,b);fb_panel.addRadio(b,e);fb_utils.setScrollAtBottom("radio_wrapper_div_id","radio_row");fb_toolbox.generateIds($(b).parent()[0]);f.markupredo=fb_utils.getouterHtml($(b).parent()[0]);f.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},removeRadio:function(b){var a='<span class="object_control_button" id="removeradioitem">&#8722;</span>';$("#properties_object_panel").append(a);$("#removeradioitem").click(function(){var r=fb_undo.getItemParams(b);r.validation_object_id=b.childNodes[0].firstChild.id;r.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(b.childNodes[0].firstChild.id));var l=document.getElementById("radio_wrapper_div_id");var h=l.childNodes;var p=0;var e=null;var q=false;var k=pValidationConfig.get_config_value($(b).children()[0].childNodes[0].id,"required");for(var n=h.length-1;n>=0;n--){if($(h[n]).hasClass("selected_row")){p+=1;if(h[n-1]){e=h[n-1]}else{if(h[n+1]){e=h[n+1]}}}}var o="";if($(h[0]).hasClass("selected_row")){if($($(b).children()[0].childNodes[0]).attr("data-hint")){o=$($(b).children()[0].childNodes[0]).attr("data-hint")}}for(var n=h.length-1;n>=0;n--){if($(h[n]).hasClass("selected_row")&&(h.length>1)){var f=$(b).children()[n].childNodes[0].getAttribute("name");var g=$(b).children()[n].childNodes[0].getAttribute("value");appVar.updateNameInSettings_("["+f+"="+g+"]");pPaymentsConfig.remove_payment_option(b.childNodes[0].firstChild.id,$(b).children()[n].childNodes[1].innerText);$(h[n]).remove();$($(b).children()[n]).remove();q=true}}if((p==1)&&(e)){$(e).addClass("selected_row")}else{if(p>=2){var m=h.length-1;$(h[m]).addClass("selected_row")}}var d=false;var c=0;for(var n=h.length-1;n>=0;n--){if(h[n].childNodes[0].checked){d=true}if($(h[n]).hasClass("selected_row")){c=n}}if(!d&&!k){h[c].childNodes[0].checked=true;$($(b).children()[c].childNodes[0]).attr("checked",true);b.childNodes[c].childNodes[0].setAttribute("checked",true)}if(q){fb_toolbox.generateIds($(b).parent()[0]);if(o.length>0){$($(b).children()[0].childNodes[0]).attr("data-hint",o)}fb_panel.updateRequiredRadio($(b).parent()[0]);r.markupredo=fb_utils.getouterHtml($(b).parent()[0]);r.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(b.childNodes[0].firstChild.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(r))}})},moveUpRadio:function(b){var a='<span class="object_control_button" id="moveitemup">&#8593;</span>';$("#properties_object_panel").append(a);$("#moveitemup").click(function(){var p=fb_undo.getItemParams(b);var d=document.getElementById("radio_wrapper_div_id");var c=d.childNodes;for(var e=1;e<c.length;e++){var n=e;if($(c[n]).hasClass("selected_row")){var g=c[n-1].childNodes[1].value;var o=c[n-1].childNodes[0].checked;var l=$(c[n-1]).hasClass("selected_row");c[n-1].childNodes[1].value=c[n].childNodes[1].value;$(c[n-1]).addClass("selected_row");if(!c[n].childNodes[0].checked){c[n-1].childNodes[0].checked=false}else{c[n-1].childNodes[0].checked=true}c[n].childNodes[1].value=g;c[n].childNodes[0].setAttribute("value",g);if(!l){$(c[n]).removeClass("selected_row")}if(!o){c[n].childNodes[0].checked=false}else{c[n].childNodes[0].checked=true}var k=$(b).children();var f=k[n].childNodes[1].innerText;var m=k[n].childNodes[0].value;k[n].childNodes[1].innerText=k[n-1].childNodes[1].innerText;k[n-1].childNodes[1].innerText=f;k[n].childNodes[0].setAttribute("value",k[n-1].childNodes[0].value);k[n-1].childNodes[0].setAttribute("value",m);if(c[n].childNodes[0].checked){$(k[n].childNodes[0]).attr("checked",true);k[n].childNodes[0].setAttribute("checked",true)}else{$(k[n].childNodes[0]).removeAttr("checked");k[n].childNodes[0].removeAttribute("checked")}if(c[n-1].childNodes[0].checked){$(k[n-1].childNodes[0]).attr("checked",true);k[n-1].childNodes[0].setAttribute("checked",true)}else{$(k[n-1].childNodes[0]).removeAttr("checked");k[n-1].childNodes[0].removeAttribute("checked")}}}fb_panel.makeManagerElementVisible("#radio_wrapper_div_id",true);fb_panel.updateRequiredRadio($(b).parent()[0]);p.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var h=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(h)})},moveDownRadio:function(b){var a='<span class="object_control_button" id="moveitemdown">&#8595;</span>';$("#properties_object_panel").append(a);$("#moveitemdown").click(function(){var p=fb_undo.getItemParams(b);var d=document.getElementById("radio_wrapper_div_id");var c=d.childNodes;for(var e=c.length-2;e>=0;e--){var n=e;if($(c[n]).hasClass("selected_row")){var g=c[n+1].childNodes[1].value;var o=c[n+1].childNodes[0].checked;var l=$(c[n+1]).hasClass("selected_row");c[n+1].childNodes[1].value=c[n].childNodes[1].value;$(c[n+1]).addClass("selected_row");if(!c[n].childNodes[0].checked){c[n+1].childNodes[0].checked=false}else{c[n+1].childNodes[0].checked=true}c[n].childNodes[1].value=g;c[n].childNodes[0].setAttribute("value",g);if(!l){$(c[n]).removeClass("selected_row")}if(!o){c[n].childNodes[0].checked=false}else{c[n].childNodes[0].checked=true}var k=$(b).children();var f=k[n].childNodes[1].innerText;var m=k[n].childNodes[0].value;k[n].childNodes[1].innerText=k[n+1].childNodes[1].innerText;k[n+1].childNodes[1].innerText=f;k[n].childNodes[0].setAttribute("value",fb_utils.htmlEncode(k[n+1].childNodes[0].value));k[n+1].childNodes[0].setAttribute("value",fb_utils.htmlEncode(m));if(c[n].childNodes[0].checked){$(k[n].childNodes[0]).attr("checked",true);k[n].childNodes[0].setAttribute("checked",true)}else{$(k[n].childNodes[0]).removeAttr("checked");k[n].childNodes[0].removeAttribute("checked")}if(c[n+1].childNodes[0].checked){$(k[n+1].childNodes[0]).attr("checked",true);k[n+1].childNodes[0].setAttribute("checked",true)}else{$(k[n+1].childNodes[0]).removeAttr("checked");k[n+1].childNodes[0].removeAttribute("checked")}}}fb_panel.makeManagerElementVisible("#radio_wrapper_div_id",false);fb_panel.updateRequiredRadio($(b).parent()[0]);p.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var h=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(h)})},dropDownListBox:function(e){this.markup='<label class="label_multiline has_object_controls"><span class="primary_left">Options:</span><div class="manager_descriptors"><span class="manager_status">&#10003;</span><span class="manager_label">Value</span></div></label><div class="manager_wrapper" id ="droplist_wrapper_div_id" ></div>';fb_panel.add(this.markup);var f=e.childNodes[0].childNodes;for(var d=0;d<f.length;d++){var c="";var a="";if((pValidationConfig.get_config_value(e.childNodes[0].id,"contactList"))&&$(f[d]).val().length){a=f[d].text+":"+$(f[d]).val()}else{if(pPaymentsConfig.get_config_value(e.childNodes[0].id,"type")!="none"&&$(f[d]).val().length){a=f[d].text+":"+pPaymentsConfig.get_payment_option(e.childNodes[0].id,f[d].text)}else{a=f[d].text}}var b="";if(f[d].selected){b="checked = true";$(f[d]).attr("selected",true);f[d].setAttribute("selected",true)}else{f[d].removeAttribute("selected","")}c='<div class="droplist_row"><input type="checkbox" class="droplist_attr_selected "'+b+'><input  class="droplist_attr_label" type=text title="'+fb_utils.htmlEncode(a)+'" value="'+fb_utils.htmlEncode(a)+'"></div>';$("#droplist_wrapper_div_id").append(c);fb_panel.initDropRow(f[d])}fb_toolbox.generateIds($(e).parent()[0]);fb_panel.add('<div class="object_controls" id="properties_object_panel"></div>')},addDropList:function(b){var a='<span class="object_control_button" id="add_droplist_item">&#43;</span>';$("#properties_object_panel").append(a);$("#add_droplist_item").click(function(){var d=b.firstChild.id;var f=fb_undo.getItemParams(b);f.validation_object_id=d;f.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));var c=document.getElementById("droplist_wrapper_div_id");var e=fb_toolbox.generateName("Option ",fb_utils.existsDropListBoxName,b);fb_panel.addDropList(b,e);fb_utils.setScrollAtBottom("droplist_wrapper_div_id","droplist_row");fb_toolbox.generateIds($(b).parent()[0]);f.markupredo=fb_utils.getouterHtml($(b).parent()[0]);f.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},removeDropList:function(c,b){var a='<span class="object_control_button" id="removedroplistitem">&#8722;</span>';$("#properties_object_panel").append(a);$("#removedroplistitem").click(function(){var q=document.getElementById("droplist_wrapper_div_id");if($(c.childNodes[0]).attr("required")){var o=$(".selected_row",q).index();if($(c.childNodes[0].childNodes[o]).val()==""){appVar.displayAlert_("Because the drop-down menu is configured to be a required element, you cannot remove this option.");return}}var s=fb_undo.getItemParams(c);s.validation_object_id=c.childNodes[0].id;s.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(c.childNodes[0].id));var n=q.childNodes;var p=0;var g=null;var r=false;for(var m=n.length-1;m>=0;m--){if($(n[m]).hasClass("selected_row")){p+=1;if(n[m-1]){g=n[m-1]}else{if(n[m+1]){g=n[m+1]}}}}var f=c.childNodes[0];for(var m=n.length-1;m>=0;m--){if($(n[m]).hasClass("selected_row")&&(n.length>1)){var h=$(f).get(0).getAttribute("name");h=$(f).attr("multiple")?h.substr(0,h.length-2):h;var k=$(f.childNodes[m]).get(0).getAttribute("value");appVar.updateNameInSettings_("["+h+"="+k+"]");pPaymentsConfig.remove_payment_option(c.childNodes[0].id,$(c).children()[0].childNodes[m].innerText);$(n[m]).remove();$(f.childNodes[m]).remove();r=true}}if((p==1)&&(g)){$(g).addClass("selected_row")}else{if(p>=2){var l=n.length-1;$(n[l]).addClass("selected_row")}}if($(c).hasClass("fb-dropdown")){var e=false;var d=0;for(var m=n.length-1;m>=0;m--){if(n[m].childNodes[0].checked){e=true}if($(n[m]).hasClass("selected_row")){d=m}}if(!e){n[d].childNodes[0].checked=true;$(f.childNodes[d]).attr("selected",true);f.childNodes[d].setAttribute("selected","")}}if(r){fb_toolbox.generateIds($(c).parent()[0]);s.markupredo=fb_utils.getouterHtml($(c).parent()[0]);s.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(c.childNodes[0].id));appVar.pushUndo_(fb_editor.JSONParser.stringify(s))}})},moveUpDropList:function(b){var a='<span class="object_control_button" id="moveitemup">&#8593;</span>';$("#properties_object_panel").append(a);$("#moveitemup").click(function(){var p=fb_undo.getItemParams(b);var k=document.getElementById("droplist_wrapper_div_id");var f=k.childNodes;for(var e=1;e<f.length;e++){var m=e;if($(f[m]).hasClass("selected_row")){var g=f[m-1].childNodes[1].value;var n=f[m-1].childNodes[0].checked;var l=$(f[m-1]).hasClass("selected_row");f[m-1].childNodes[1].value=f[m].childNodes[1].value;$(f[m-1]).addClass("selected_row");if(!f[m].childNodes[0].checked){f[m-1].childNodes[0].checked=false}else{f[m-1].childNodes[0].checked=true}f[m].childNodes[1].value=g;f[m].childNodes[0].setAttribute("value",g);if(!l){$(f[m]).removeClass("selected_row")}if(!n){f[m].childNodes[0].checked=false}else{f[m].childNodes[0].checked=true}var c=b.childNodes[0];var o=c.childNodes[m].innerText;var d=c.childNodes[m].value;c.childNodes[m].innerText=c.childNodes[m-1].innerText;c.childNodes[m-1].innerText=o;c.childNodes[m].setAttribute("value",c.childNodes[m-1].value);c.childNodes[m-1].setAttribute("value",d);if(f[m].childNodes[0].checked){$(c.childNodes[m]).attr("selected",true);c.childNodes[m].setAttribute("selected",true)}else{$(c.childNodes[m]).removeAttr("selected");c.childNodes[m].removeAttribute("selected")}if(f[m-1].childNodes[0].checked){$(c.childNodes[m-1]).attr("selected",true);c.childNodes[m-1].setAttribute("selected",true)}else{$(c.childNodes[m-1]).removeAttr("selected");c.childNodes[m-1].removeAttribute("selected")}}}fb_panel.makeManagerElementVisible("#droplist_wrapper_div_id",true);p.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var h=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(h)})},moveDownDropList:function(b){var a='<span class="object_control_button" id="moveitemdown">&#8595;</span>';$("#properties_object_panel").append(a);$("#moveitemdown").click(function(){var p=fb_undo.getItemParams(b);var k=document.getElementById("droplist_wrapper_div_id");var f=k.childNodes;for(var e=f.length-2;e>=0;e--){var m=e;if($(f[m]).hasClass("selected_row")){var g=f[m+1].childNodes[1].value;var n=f[m+1].childNodes[0].checked;var l=$(f[m+1]).hasClass("selected_row");f[m+1].childNodes[1].value=f[m].childNodes[1].value;$(f[m+1]).addClass("selected_row");if(!f[m].childNodes[0].checked){f[m+1].childNodes[0].checked=false}else{f[m+1].childNodes[0].checked=true}f[m].childNodes[1].value=g;f[m].childNodes[0].setAttribute("value",g);if(!l){$(f[m]).removeClass("selected_row")}if(!n){f[m].childNodes[0].checked=false}else{f[m].childNodes[0].checked=true}var c=b.childNodes[0];var o=c.childNodes[m].innerText;var d=c.childNodes[m].value;c.childNodes[m].innerText=c.childNodes[m+1].innerText;c.childNodes[m+1].innerText=o;c.childNodes[m].setAttribute("value",c.childNodes[m+1].value);c.childNodes[m+1].setAttribute("value",d);if(f[m].childNodes[0].checked){$(c.childNodes[m]).attr("selected",true);c.childNodes[m].setAttribute("selected",true)}else{$(c.childNodes[m]).removeAttr("selected");c.childNodes[m].removeAttribute("selected")}if(f[m+1].childNodes[0].checked){$(c.childNodes[m+1]).attr("selected",true);c.childNodes[m+1].setAttribute("selected",true)}else{$(c.childNodes[m+1]).removeAttr("selected");c.childNodes[m+1].removeAttribute("selected")}}}fb_panel.makeManagerElementVisible("#droplist_wrapper_div_id",false);p.markupredo=fb_utils.getouterHtml($(b).parent()[0]);var h=fb_editor.JSONParser.stringify(p);appVar.pushUndo_(h)})},height_border:function(c){var d=$(c).css("border-top-width");d=d.substr(0,d.length-2);var a=d;var b=0;this.markup='<label class="label_input">							<span class="primary_left">Height:</span>							<input id="fb-pp-input-height" class="input_right" type="text" value="'+d+'"min="1" max="100">						</label>';fb_panel.add(this.markup);function e(){if((b>0)&&(b<=$("#fb-pp-input-height").attr("max"))&&((b+"px")!=$(c).css("border-top-width"))){var f=fb_undo.getItemParams(c);a=b;$(c).css("border-top-width",b);if(appVar==window.external){$(c).attr("size",b)}f.markupredo=fb_utils.getouterHtml($(c).parent()[0]);var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)}else{$("#fb-pp-input-height").attr("value",a);$(c).css("border-top-width",a);if(b>$("#fb-pp-input-height").attr("max")){appVar.displayAlert_("The maximum height allowed is "+$("#fb-pp-input-height").attr("max")+".")}}}$("#fb-pp-input-height").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-height").attr("value"));$("#fb-pp-input-height").attr("value",b);var f=$("#fb-pp-input-height").attr("value");if((f+"px")!=$(c).css("border-top-width")){e()}});$("#fb-pp-input-height").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-height");return});$("#fb-pp-input-height").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-height").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-height").attr("value")*1;if(b<2||b>60||fb_utils.hasNotNumericChars($("#fb-pp-input-height").attr("value"))){return}e()})},height:function(c){var d=parseInt($(c).css("height"));var a=d;var b=0;this.markup='<label class="label_input">							<span class="primary_left">Height:</span>							<input id="fb-pp-input-height" class="input_right" type="text" value="'+d+'">						</label>';fb_panel.add(this.markup);function e(){var f=parseInt($(c).css("height"));var h=parseInt($(c).css("min-height"));if(isNaN(h)){h=0}if(b!=f&&b!=0&&b>=h){var g=fb_undo.getItemParams(c[0].firstChild);a=parseInt(b);$(c).css("height",b);$(c).resize();g.markupredo=fb_utils.getouterHtml(c[0]);var k=fb_editor.JSONParser.stringify(g);appVar.pushUndo_(k)}else{$("#fb-pp-input-height").attr("value",a);$(c).css("height",a);if((b=="")||b==0){appVar.displayAlert_("Please enter a value equal to or greater than 0.")}else{if(b<h){appVar.displayAlert_("Pleaser enter a value equal to or greater than the minimum height of "+$(c).css("min-height"))}}}}$("#fb-pp-input-height").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-height").attr("value"));var f=parseInt($(c).css("height"));$("#fb-pp-input-height").attr("value",b);var g=$("#fb-pp-input-height").attr("value");if(g!=f){e()}});$("#fb-pp-input-height").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-height");return});$("#fb-pp-input-height").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-height").keyup(function(g){if(g.keyCode=="9"){return}if(!(g.keyCode>=48&&g.keyCode<=57)&&!(g.keyCode>=96&&g.keyCode<=105)){return}b=$("#fb-pp-input-height").attr("value")*1;var f=parseInt($(c).css("min-height"));if(b<15||b>60||fb_utils.hasNotNumericChars($("#fb-pp-input-height").attr("value"))||b<f){return}e()})},width:function(c){var d=$(c).css("width");d=d.substr(0,d.length-2);var a=d;var b=0;this.markup='<label class="label_input">						<span class="primary_left">Width:</span>						<input id="fb-pp-input-width" class="input_right" type="text" value="'+d+'"min="1" max="960">					</label>';fb_panel.add(this.markup);function e(){if((b>0)&&((b+"px")!=$(c).css("width"))&&(b<=$("#fb-pp-input-width").attr("max"))){var f=fb_undo.getItemParams($(c).parent()[0]);a=b;$(c).css("width",b);f.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-width").attr("value",a);$(c).css("width",a);if(b>$("#fb-pp-input-width").attr("max")){appVar.displayAlert_("The maximum width allowed is "+$("#fb-pp-input-width").attr("max")+".")}}}$("#fb-pp-input-width").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-width").attr("value"));$("#fb-pp-input-width").attr("value",b);var f=$("#fb-pp-input-width").attr("value");if(f+"px"!=$(c).css("width")){e()}});$("#fb-pp-input-width").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-width");return});$("#fb-pp-input-width").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-width").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-width").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-input-width").attr("value"))){return}e()})},paddingTop:function(d){var e=$(d).css("padding-top");e=e.substr(0,e.length-2);var a=e;var b=0;this.markup='<label class="label_input_grouped">						<span class="primary_left">Padding:</span>						<input id="fb-pp-input-item-padding-top" class="input_right" type="text" value="'+e+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function c(){if((b>=0)&&((b+"px")!=$(d).css("padding-top"))&&(b<=$("#fb-pp-input-item-padding-top").attr("max"))){var f=fb_undo.getItemParams(d[0].firstChild);a=b;$(d).css("padding-top",b);f.markupredo=fb_utils.getouterHtml(d[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-item-padding-top").attr("value",a);$(d).css("padding-top",a);if(b>$("#fb-pp-input-item-padding-top").attr("max")){appVar.displayAlert_("The maximum padding top allowed is "+$("#fb-pp-input-item-padding-top").attr("max")+".")}}}$("#fb-pp-input-item-padding-top").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-item-padding-top").attr("value"));$("#fb-pp-input-item-padding-top").attr("value",b);var f=$("#fb-pp-input-item-padding-top").attr("value");if(f+"px"!=$(d).css("padding-top")){c()}});$("#fb-pp-input-item-padding-top").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-item-padding-top");return});$("#fb-pp-input-item-padding-top").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-item-padding-top").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-item-padding-top").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-input-item-padding-top").attr("value"))){return}c()})},paddingBottom:function(d){var e=$(d).css("padding-bottom");e=e.substr(0,e.length-2);var b=e;var c=0;this.markup='<label class="label_input_grouped">						<input id="fb-pp-input-item-padding-bottom" class="input_right" type="text" value="'+e+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function a(){if((c>=0)&&((c+"px")!=$(d).css("padding-bottom"))&&(c<=$("#fb-pp-input-item-padding-bottom").attr("max"))){var f=fb_undo.getItemParams(d[0].firstChild);b=c;$(d).css("padding-bottom",c);f.markupredo=fb_utils.getouterHtml(d[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-item-padding-bottom").attr("value",b);$(d).css("padding-bottom",b);if(c>$("#fb-pp-input-item-padding-bottom").attr("max")){appVar.displayAlert_("The maximum padding bottom allowed is "+$("#fb-pp-input-item-padding-bottom").attr("max")+".")}}}$("#fb-pp-input-item-padding-bottom").change(function(){c=fb_utils.clearNotNumericChars($("#fb-pp-input-item-padding-bottom").attr("value"));$("#fb-pp-input-item-padding-bottom").attr("value",c);var f=$("#fb-pp-input-item-padding-bottom").attr("value");if(f+"px"!=$(d).css("padding-bottom")){a()}});$("#fb-pp-input-item-padding-bottom").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-item-padding-bottom");return});$("#fb-pp-input-item-padding-bottom").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-item-padding-bottom").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}c=$("#fb-pp-input-item-padding-bottom").attr("value")*1;if(c<10||c>570||fb_utils.hasNotNumericChars($("#fb-pp-input-item-padding-bottom").attr("value"))){return}a()})},paddingLeft:function(d){var e=$(d).css("padding-left");e=e.substr(0,e.length-2);var a=e;var b=0;this.markup='<label class="label_input_grouped">						<input id="fb-pp-input-item-padding-left" class="input_right" type="text" value="'+e+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function c(){if((b>=0)&&((b+"px")!=$(d).css("padding-left"))&&(b<=$("#fb-pp-input-item-padding-left").attr("max"))){var f=fb_undo.getItemParams(d[0].firstChild);a=b;$(d).css("padding-left",b);f.markupredo=fb_utils.getouterHtml(d[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-item-padding-left").attr("value",a);$(d).css("padding-left",a);if(b>$("#fb-pp-input-item-padding-left").attr("max")){appVar.displayAlert_("The maximum padding left allowed is "+$("#fb-pp-input-item-padding-left").attr("max")+".")}}}$("#fb-pp-input-item-padding-left").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-item-padding-left").attr("value"));$("#fb-pp-input-item-padding-left").attr("value",b);var f=$("#fb-pp-input-item-padding-left").attr("value");if(f+"px"!=$(d).css("padding-left")){c()}});$("#fb-pp-input-item-padding-left").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-item-padding-left");return});$("#fb-pp-input-item-padding-left").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-item-padding-left").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-item-padding-left").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-input-item-padding-left").attr("value"))){return}c()})},paddingRight:function(c){var d=$(c).css("padding-right");d=d.substr(0,d.length-2);var a=d;var b=0;this.markup='<label class="label_input_grouped">						<input id="fb-pp-input-item-padding-right" class="input_right" type="text" value="'+d+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function e(){if((b>=0)&&((b+"px")!=$(c).css("padding-right"))&&(b<=$("#fb-pp-input-item-padding-right").attr("max"))){var f=fb_undo.getItemParams(c[0].firstChild);a=b;$(c).css("padding-right",b);f.markupredo=fb_utils.getouterHtml(c[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-item-padding-right").attr("value",a);$(c).css("padding-right",a);if(b>$("#fb-pp-input-item-padding-right").attr("max")){appVar.displayAlert_("The maximum padding right allowed is "+$("#fb-pp-input-item-padding-right").attr("max")+".")}}}$("#fb-pp-input-item-padding-right").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-item-padding-right").attr("value"));$("#fb-pp-input-item-padding-right").attr("value",b);var f=$("#fb-pp-input-item-padding-right").attr("value");if(f+"px"!=$(c).css("padding-right")){e()}});$("#fb-pp-input-item-padding-right").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-item-padding-right");return});$("#fb-pp-input-item-padding-right").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-item-padding-right").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-item-padding-right").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-input-item-padding-right").attr("value"))){return}e()})},bordercolor:function(b){var e=fb_utils.getHexFromShortHex($(b).css("border-top-color"));var c=e;this.markup='<label class="label_input">							<span class="primary_left">Color:</span>							<div id="fb-color" class="color_right fb-color-control"><div class="inner_color"></div></div>						</label>';fb_panel.add(this.markup);$("#fb-color div").css("background-color",e);var a;var d=e;if(/rgb/.test(d)){d=fb_utils.getHexFromRGB(e)}$("#fb-color").ColorPicker({color:d,onShow:function(f){a=fb_undo.getItemParams($(b).parent()[0]);$(f).fadeIn(0);$(f).find("input").focus(function(){fb_panel.inputFocused=this});$(f).find("input").blur(function(){fb_panel.inputFocused=""});return false},onHide:function(g){$(g).fadeOut(0);if(c!=$("#fb-color div").css("background-color")){a.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);var f=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(f);c=$("#fb-color div").css("background-color")}return false},onChange:function(f,h,g){$("#fb-color div").css("background-color","#"+h);$(b).css("border-top-color","#"+h)}})},borderstyle:function(c){var e=$(c).css("border-top-style");this.markup='<label class="label_combo">						<span class="primary_left">Style:</span>							<select id="fb-pp-input-sectionbreak-style" class="combo_right"></select>						</label>';fb_panel.add(this.markup);var b=fb_defaults.get_default_configuration_value("hr","style");var a=document.getElementById("fb-pp-input-sectionbreak-style");for(i in b){if(typeof(b[i])=="string"){var d=new Option(b[i],b[i].toLowerCase());d.title=b[i];a.add(d)}}fb_utils.setValueToSelected(e,a);$("#fb-pp-input-sectionbreak-style").change(function(){var g=fb_undo.getItemParams($(c).parent()[0]);var f=$("#fb-pp-input-sectionbreak-style").attr("value");$(c).css("border-top-style",f);g.markupredo=fb_utils.getouterHtml($(c).parent().parent()[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(g))})},labelAlignment:function(){var a=b();var c="";if(a=="fb-leftlabel"){c="left"}else{if(a=="fb-rightlabel"){c="right"}else{c="top"}}this.markup='<label class="label_combo">						<span class="primary_left">Label Position:</span>							<select id="fb-pp-input-label-alignment" class="combo_right" >								<option value = "left">Left</option>								<option value = "top">Top</option>								<option value = "right">Right</option>							 </select>						</label>';fb_panel.addToFormProperties(this.markup);var d=document.getElementById("fb-pp-input-label-alignment");fb_utils.setValueToSelected(c,d);function b(){if($("#docContainer").hasClass("fb-leftlabel")){return"fb-leftlabel"}else{if($("#docContainer").hasClass("fb-rightlabel")){return"fb-rightlabel"}else{return"fb-toplabel"}}}$("#fb-pp-input-label-alignment").change(function(){fb_editor.backgroundActive();var g=document.getElementById("docContainer");var f=fb_undo.getFormParams(g);var e=$("#fb-pp-input-label-alignment").attr("value");var h=b();$("#docContainer").removeClass(h);if(e=="top"){$("#docContainer").addClass("fb-toplabel")}else{if(e=="left"){$("#docContainer").addClass("fb-leftlabel")}else{if(e=="right"){$("#docContainer").addClass("fb-rightlabel")}}}f.markupredo=fb_utils.getouterHtml(g);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},itemFormWidth:function(){var a="fb-100-item-column";switch(b()){case"fb-100-item-column":a="one";break;case"fb-75-item-column":a="two";break;case"fb-66-item-column":a="three";break;case"fb-50-item-column":a="four";break;case"fb-33-item-column":a="five";break;case"fb-25-item-column":a="six";break;case"fb-20-item-column":a="seven"}this.markup='<label class="label_combo">								<span class="primary_left">Item Width:</span>								<select id="fb-pp-input-form-item-width" class="combo_right">									<option value = "one">100%</option>									<option value = "two">75%</option>									<option value = "three">66%</option>									<option value = "four">50%</option>									<option value = "five">33%</option>									<option value = "six">25%</option>									<option value = "seven">20%</option>								</select>							</label>';fb_panel.addToFormProperties(this.markup);var c=document.getElementById("fb-pp-input-form-item-width");fb_utils.setValueToSelected(a,c);function b(){if($("#docContainer").hasClass("fb-100-item-column")){return"fb-100-item-column"}else{if($("#docContainer").hasClass("fb-75-item-column")){return"fb-75-item-column"}else{if($("#docContainer").hasClass("fb-66-item-column")){return"fb-66-item-column"}else{if($("#docContainer").hasClass("fb-50-item-column")){return"fb-50-item-column"}else{if($("#docContainer").hasClass("fb-33-item-column")){return"fb-33-item-column"}else{if($("#docContainer").hasClass("fb-25-item-column")){return"fb-25-item-column"}else{if($("#docContainer").hasClass("fb-20-item-column")){return"fb-20-item-column"}else{return"fb-100-item-column"}}}}}}}}$("#fb-pp-input-form-item-width").change(function(){fb_editor.backgroundActive();var f=document.getElementById("docContainer");var e=fb_undo.getFormParams(f);var d=$("#fb-pp-input-form-item-width").attr("value");var g=b();$("#docContainer").removeClass(g);if(d=="one"){$("#docContainer").addClass("fb-100-item-column")}else{if(d=="two"){$("#docContainer").addClass("fb-75-item-column")}else{if(d=="three"){$("#docContainer").addClass("fb-66-item-column")}else{if(d=="four"){$("#docContainer").addClass("fb-50-item-column")}else{if(d=="five"){$("#docContainer").addClass("fb-33-item-column")}else{if(d=="six"){$("#docContainer").addClass("fb-25-item-column")}else{if(d=="seven"){$("#docContainer").addClass("fb-20-item-column")}}}}}}}e.markupredo=fb_utils.getouterHtml(f);appVar.pushUndo_(fb_editor.JSONParser.stringify(e))})},formFontColor:function(){var e=fb_utils.getHexFromShortHex($("#docContainer").css("color"));this.markup='<label class="label_grouped">							<div class="color_right fb-color-control" id="fb-color-form"><div></div></div>						</label>';fb_panel.addToFormProperties(this.markup);$("#fb-color-form div").css("background-color",e);var a=e;if(/rgb/.test(a)){a=fb_utils.getHexFromRGB(e)}var c=document.getElementById("docContainer");var d=e;var b={};$("#fb-color-form").ColorPicker({color:a,onShow:function(f){b=fb_undo.getFormParams(c);$(f).fadeIn(0);$(f).find("input").focus(function(){fb_panel.inputFocused=this});$(f).find("input").blur(function(){fb_panel.inputFocused=""});return false},onHide:function(g){$(g).fadeOut(0);fb_editor.backgroundActive();if(d!=$("#docContainer").css("color")){b.markupredo=fb_utils.getouterHtml(c);var f=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(f);d=$("#docContainer").css("color")}return false},onChange:function(f,h,g){$("#fb-color-form div").css("background-color","#"+h);$("#docContainer").css("color","#"+h)}})},formFontSize:function(){var d=$("#docContainer").children().css("font-size");d=d.substr(0,d.length-2);this.markup='<label class="label_grouped">						<input id="fb-pp-input-form-fontsize" class="input_right" type="text" value="'+d+'" maxlength="50">					</label>';fb_panel.addToFormProperties(this.markup);var c=d;var b=0;function a(){fb_editor.backgroundActive();if(b>0&&((b+"px")!=$("#docContainer").css("font-size"))){var f=document.getElementById("docContainer");var e=fb_undo.getFormParams(f);c=b;$("#docContainer").css("font-size",b);e.markupredo=fb_utils.getouterHtml(f);var g=fb_editor.JSONParser.stringify(e);appVar.pushUndo_(g)}else{$("#fb-pp-input-form-fontsize").attr("value",c);$("#docContainer").css("font-size",c)}}$("#fb-pp-input-form-fontsize").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-form-fontsize").attr("value"));$("#fb-pp-input-form-fontsize").attr("value",b);var e=$("#fb-pp-input-form-fontsize").attr("value");if(e+"px"!=$("#docContainer").css("font-size")){a()}});$("#fb-pp-input-form-fontsize").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-form-fontsize")});$("#fb-pp-input-form-fontsize").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});$("#fb-pp-input-form-fontsize").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-form-fontsize").attr("value")*1;if(b<10||b>60||fb_utils.hasNotNumericChars($("#fb-pp-input-form-fontsize").attr("value"))){return}a()})},formFontFamily:function(){var e=$("#docContainer").css("font-family").replace(/'/g,"");this.markup='<label class="label_grouped_main">								<span class="primary_left">Font:</span>								<select class="combo_right combo_font" id="fb-pp-input-font" ></select> 						</label>';fb_panel.addToFormProperties(this.markup);var d=fb_defaults.get_default_configuration_value("form","font");var b=document.getElementById("fb-pp-input-font");var h;var a;var f=null;for(var c=0;c<document.styleSheets.length;c++){if(document.styleSheets[c].href==$("#theme").get(0).href){f=document.styleSheets[c]}}if(f){var g=f.cssRules?f.cssRules:f.rules;if(g){for(var c=g.length-1;c>=0;c--){if((jQuery.trim(g[c].selectorText)=="#docContainer")&&g[c].style.fontFamily.length){a=g[c].style.fontFamily;var k=a.split(",")[0];k=k.replace(/'/g,"");h=new Option(k,"");h.title=k;b.add(h);break}}}}for(c in d){if((typeof(d[c])=="string")&&k&&(d[c].toLowerCase()!=k.toLowerCase())){h=new Option(d[c],d[c].toLowerCase());h.title=d[c];b.add(h)}}fb_utils.setValueToSelected(e,b);$("#fb-pp-input-font").change(function(){fb_editor.backgroundActive();var l=$("#fb-pp-input-font").attr("value");var n=document.getElementById("docContainer");var m=fb_undo.getFormParams(n);$("#docContainer").css("font-family",l);m.markupredo=fb_utils.getouterHtml(n);appVar.pushUndo_(fb_editor.JSONParser.stringify(m))})},formWidth:function(){var c=$("#docContainer").get(0);var d=$(c).css("width");d=d.substr(0,d.length-2);this.markup='<label class="label_input">						<span class="primary_left">Form Width:</span>						<input id="fb-pp-input-form-width" class="input_right" type="text" value="'+d+'"min="200" max="960">					</label>';fb_panel.addToFormProperties(this.markup);var a=d;var b=0;function e(){if(isNaN(b)){appVar.displayAlert_("You must provide a positive number for this value.");$("#fb-pp-input-form-width").val(a);return}if((b>0)&&((b+"px")!=$(c).css("width"))&&b<=$("#fb-pp-input-form-width").attr("max")&&b>=$("#fb-pp-input-form-width").attr("min")){var g=document.getElementById("docContainer");var f=fb_undo.getFormParams(g);a=b;$(c).css("width",b);$(c).removeClass("fb-small");$(c).removeClass("fb-large");if(b<=400){$(c).addClass("fb-small")}else{if(b>700){$(c).addClass("fb-large")}}f.markupredo=fb_utils.getouterHtml(g);var h=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(h)}else{if(b>$("#fb-pp-input-form-width").attr("max")){appVar.displayAlert_("The maximum width allowed is "+$("#fb-pp-input-form-width").attr("max")+".");$("#fb-pp-input-form-width").attr("value",$("#fb-pp-input-form-width").attr("max"));$(c).css("width",$("#fb-pp-input-form-width").attr("max"))}else{if(b<$("#fb-pp-input-form-width").attr("min")){appVar.displayAlert_("The minimum width allowed is "+$("#fb-pp-input-form-width").attr("min")+".");$("#fb-pp-input-form-width").attr("value",$("#fb-pp-input-form-width").attr("min"));$(c).css("width",$("#fb-pp-input-form-width").attr("min"))}}}}$("#fb-pp-input-form-width").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-input-form-width").attr("value"));$("#fb-pp-input-form-width").attr("value",b);var f=$("#fb-pp-input-form-width").attr("value");if(f+"px"!=$(c).css("width")){e()}});$("#fb-pp-input-form-width").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-form-width");return});$("#fb-pp-input-form-width").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-form-width").keyup(function(f){if(f.keyCode!="9"){if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-input-form-width").attr("value")*1;if(b<$("#fb-pp-input-form-width").attr("min")||b>$("#fb-pp-input-form-width").attr("max")||fb_utils.hasNotNumericChars($("#fb-pp-input-form-width").attr("value"))){return}e()}})},formBorderStyle:function(){var d=$("#docContainer").css("border-top-style");this.markup='<label class="label_grouped_main">								<span class="primary_left">Border:</span>								<select class="combo_right" id="fb-pp-form-border-style" ></select> 						</label>';fb_panel.addToFormProperties(this.markup);var b=document.getElementById("fb-pp-form-border-style");var c;var a=fb_defaults.get_default_configuration_value("form","border");for(i in a){c=new Option(a[i],a[i]);c.title=a[i];b.add(c)}fb_utils.setValueToSelected(d,b);$("#fb-pp-form-border-style").change(function(){var e=$("#fb-pp-form-border-style").attr("value");var g=document.getElementById("docContainer");var f=fb_undo.getFormParams(g);$("#docContainer").css("border-style",e);f.markupredo=fb_utils.getouterHtml(g);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},formBorderSize:function(e,c){var e=$("#docContainer").css("border-top-width");e=e==""?e="0":e=e.substr(0,e.length-2);var b=e;var a=0;this.markup='<label class="label_grouped">						<input id="fb-pp-input-form-bordersize" class="input_right" type="text" value="'+e+'" maxlength="50">					</label>';fb_panel.addToFormProperties(this.markup);function d(){if(a>=0&&((a+"px")!=$("#docContainer").css("border-top-width"))){var g=document.getElementById("docContainer");var f=fb_undo.getFormParams(g);b=a;$("#docContainer").css("border-width",a);f.markupredo=fb_utils.getouterHtml(g);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-form-bordersize").attr("value",b);$("#docContainer").css("border-width",b)}}$("#fb-pp-input-form-bordersize").change(function(){a=fb_utils.clearNotNumericChars($("#fb-pp-input-form-bordersize").attr("value"));$("#fb-pp-input-form-bordersize").attr("value",a);var f=$("#fb-pp-input-form-bordersize").attr("value");if((f+"px")!=$("#docContainer").css("border-top-width")){d()}});$("#fb-pp-input-form-bordersize").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-form-bordersize");return});$("#fb-pp-input-form-bordersize").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-form-bordersize").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}a=$("#fb-pp-input-form-bordersize").attr("value")*1;if(a<2||a>60||fb_utils.hasNotNumericChars($("#fb-pp-input-form-bordersize").attr("value"))){return}d()})},formBorderColor:function(){var e=fb_utils.getHexFromShortHex($("#docContainer").css("border-top-color"));if(e==""){curBorderColor="rgb(0 ,0 ,0)"}this.markup='<label class="label_grouped">							<div class="color_right fb-color-control" id="fb-border-color-form"><div></div></div>						</label>';fb_panel.addToFormProperties(this.markup);$("#fb-border-color-form div").css("background-color",e);var a=e;if(/rgb/.test(a)){a=fb_utils.getHexFromRGB(e)}var d=e;var c=document.getElementById("docContainer");var b={};$("#fb-border-color-form").ColorPicker({color:a,onShow:function(f){b=fb_undo.getFormParams(c);$(f).fadeIn(0);$(f).find("input").focus(function(){fb_panel.inputFocused=this});$(f).find("input").blur(function(){fb_panel.inputFocused=""});return false},onHide:function(g){$(g).fadeOut(0);if(d!=$("#docContainer").css("border-top-color")){b.markupredo=fb_utils.getouterHtml(c);var f=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(f);d=$("#docContainer").css("border-top-color")}return false},onChange:function(f,h,g){$("#fb-border-color-form div").css("background-color","#"+h);$("#docContainer").css("border-color","#"+h)}})},formMargins:function(){var l=$("#docContainer").attr("data-margin")=="custom"?true:false;var d=l?"checked = true":"";var n=parseInt($("#docContainer").css("margin-top"));var a=parseInt($("#docContainer").css("margin-right"));var k=parseInt($("#docContainer").css("margin-bottom"));var p=parseInt($("#docContainer").css("margin-left"));var e=n;var o=a;var h=k;var c=p;var g=0;var q=0;var f=0;var m=0;this.markup='<label class="label_checkbox">								<input id="fb-pp-check-custom-margins" class="check_left" type="checkbox"'+d+'">							<span class="primary_right">Customize margins</span>						</label>						<div id="margin-container">		 					<label class="label_input_grouped">								<span class="primary_left"></span>								<input id="fb-pp-input-margin-top" class="input_right" type="text" value="'+n+'"min="0" max="1000">							</label>							<label class="label_input_grouped">								<input id="fb-pp-input-margin-right" class="input_right" type="text" value="'+a+'"min="0" max="1000">							</label>							<label class="label_input_grouped">								<input id="fb-pp-input-margin-bottom" class="input_right" type="text" value="'+k+'"min="0" max="1000">							</label>							<label class="label_input_grouped">								<input id="fb-pp-input-margin-left" class="input_right" type="text" value="'+p+'"min="0" max="1000">							</label>							<span id="fb-pp-span-margin-top">Top</span>							<span id="fb-pp-span-margin-right">Right</span>							<span id="fb-pp-span-margin-bottom">Bottom</span>							<span id="fb-pp-span-margin-left">Left</span>						</div>';fb_panel.addToFormProperties(this.markup);if(l){$("#margin-container").css("display","block")}else{$("#margin-container").css("display","none")}$("#fb-pp-check-custom-margins").change(function(){fb_editor.backgroundActive();var s=document.getElementById("docContainer");var r=fb_undo.getFormParams(s);if($("#fb-pp-check-custom-margins").attr("checked")){$("#docContainer").attr("data-margin","custom");$("#docContainer").css("margin-top","5px");$("#docContainer").css("margin-right","5px");$("#docContainer").css("margin-bottom","5px");$("#docContainer").css("margin-left","5px");$("#fb-pp-input-margin-top").val("5");$("#fb-pp-input-margin-right").val("5");$("#fb-pp-input-margin-bottom").val("5");$("#fb-pp-input-margin-left").val("5");$("#margin-container").fadeIn("fast")}else{$("#docContainer").removeAttr("data-margin");$("#docContainer").css("margin-top","");$("#docContainer").css("margin-right","");$("#docContainer").css("margin-bottom","");$("#docContainer").css("margin-left","");$("#margin-container").fadeOut("fast")}r.markupredo=fb_utils.getouterHtml(s);appVar.pushUndo_(fb_editor.JSONParser.stringify(r))});function b(r){var u="#fb-pp-input-margin-"+r;var x="margin-"+r;var t=0;var s=0;if(r=="top"){t=g;s=e}else{if(r=="right"){t=q;s=o}else{if(r=="bottom"){t=f;s=h}else{if(r=="left"){t=m;s=c}}}}if((t>=0)&&((t+"px")!=$("#docContainer").css(x))){var w=document.getElementById("docContainer");var v=fb_undo.getFormParams(w);s=t;$("#docContainer").css(x,t);v.markupredo=fb_utils.getouterHtml(w);appVar.pushUndo_(fb_editor.JSONParser.stringify(v))}else{$(u).attr("value",s);$("#docContainer").css(x,s)}if(r=="top"){g=t;e=s}else{if(r=="right"){q=t;o=s}else{if(r=="bottom"){f=t;h=s}else{if(r=="left"){m=t;c=s}}}}}$("#fb-pp-input-margin-top").change(function(){g=fb_utils.clearNotNumericChars($(this).attr("value"));$(this).attr("value",g);var r=$(this).attr("value");if(r+"px"!=$("#docContainer").css("margin-top")){b("top")}}).focus(function(){fb_panel.inputFocused=this;return}).blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return}).keyup(function(r){if(r.keyCode=="9"){return}if(!(r.keyCode>=48&&r.keyCode<=57)&&!(r.keyCode>=96&&r.keyCode<=105)){return}g=$(this).attr("value")*1;if(g<10||g>570||fb_utils.hasNotNumericChars($(this).attr("value"))){return}b("top")});$("#fb-pp-input-margin-right").change(function(){q=fb_utils.clearNotNumericChars($(this).attr("value"));$(this).attr("value",q);var r=$(this).attr("value");if(r+"px"!=$("#docContainer").css("margin-right")){b("right")}}).focus(function(){fb_panel.inputFocused=this;return}).blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return}).keyup(function(r){if(r.keyCode=="9"){return}if(!(r.keyCode>=48&&r.keyCode<=57)&&!(r.keyCode>=96&&r.keyCode<=105)){return}q=$(this).attr("value")*1;if(q<10||q>570||fb_utils.hasNotNumericChars($(this).attr("value"))){return}b("right")});$("#fb-pp-input-margin-bottom").change(function(){f=fb_utils.clearNotNumericChars($(this).attr("value"));$(this).attr("value",f);var r=$(this).attr("value");if(r+"px"!=$("#docContainer").css("margin-bottom")){b("bottom")}}).focus(function(){fb_panel.inputFocused=this;return}).blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return}).keyup(function(r){if(r.keyCode=="9"){return}if(!(r.keyCode>=48&&r.keyCode<=57)&&!(r.keyCode>=96&&r.keyCode<=105)){return}f=$(this).attr("value")*1;if(f<10||f>570||fb_utils.hasNotNumericChars($(this).attr("value"))){return}b("bottom")});$("#fb-pp-input-margin-left").change(function(){m=fb_utils.clearNotNumericChars($(this).attr("value"));$(this).attr("value",m);var r=$(this).attr("value");if(r+"px"!=$("#docContainer").css("margin-left")){b("left")}}).focus(function(){fb_panel.inputFocused=this;return}).blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return}).keyup(function(r){if(r.keyCode=="9"){return}if(!(r.keyCode>=48&&r.keyCode<=57)&&!(r.keyCode>=96&&r.keyCode<=105)){return}m=$(this).attr("value")*1;if(m<10||m>570||fb_utils.hasNotNumericChars($(this).attr("value"))){return}b("left")})},autofocus:function(){this.markup='<label class="label_input">								<span class="primary_left">Autofocus:</span>								<select class="combo_right" id="fb-pp-input-autofocus" ></select> 						</label>';fb_panel.addToFormProperties(this.markup);fb_panel.refreshAutofocus();$("#fb-pp-input-autofocus").change(function(){var b=$("#fb-pp-input-autofocus").attr("value");var e=document.getElementById("docContainer");var d=fb_undo.getFormParams(e);var a;var h=document.forms[0].getElementsByTagName("INPUT");var c=document.forms[0].getElementsByTagName("TEXTAREA");for(var f=0;f<h.length;f++){h[f].removeAttribute("autofocus")}for(var f=0;f<c.length;f++){c[f].removeAttribute("autofocus")}var g=document.getElementsByName(b);if(($("#fb-pp-input-autofocus")[0].selectedIndex!=0)){if(g.length>0){g[0].setAttribute("autofocus",true)}}d.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},captcha:function(){var a=pValidationConfig.get_config_value("reCaptcha","captcha_status");var g=pValidationConfig.get_config_value("reCaptcha","theme");var c=pValidationConfig.get_config_value("reCaptcha","public_key");var f=pValidationConfig.get_config_value("reCaptcha","private_key");a=a?a:"none";var d=!(a=="none"||a=="automatic"||a=="");this.markup='<label class="label_input">							<span class="primary_left">Captcha:</span>							<select class="combo_right" id="fb-pp-input-captcha" >								<option title="None" value="none">None</option>								<option title="Automatic (S-Drive only)" value="automatic">Automatic (S-Drive only)</option>								<option title="Manual" value="manual">Manual</option>							</select> 							<div class="object_controls" id="properties_object_panel"><span class="object_control_button" id="fb-help-captcha">?</span></div>						</label>						<label class="label_input_right">							<span class="primary_right">Public Key:</span>							<input id="fb-pp-input-publickey-text" class="input_small" type="text" value="'+c+'" maxlength="254">						</label>						<label class="label_input_right">							<span class="primary_right">Private Key:</span>							<input id="fb-pp-input-privatekey-text" class="input_small" type="text" value="'+f+'" maxlength="254">						</label>						<label class="label_input_right">							<span class="primary_right">Theme:</span>							<select class="combo_right" id="fb-recaptcha-theme">								<option value="clean">Clean</option>								<option value="white">White</option>								<option value="red">Red</option>								<option value="blackglass">Blackglass</option>							</select>						</label>';fb_panel.addToFormProperties(this.markup);fb_utils.setValueToSelected(a,document.getElementById("fb-pp-input-captcha"));fb_utils.setValueToSelected(g,document.getElementById("fb-recaptcha-theme"));if(!d){$("#fb-pp-input-publickey-text").parent().css("display","none");$("#fb-pp-input-privatekey-text").parent().css("display","none")}else{$("#fb-pp-input-publickey-text").parent().css("display","block");$("#fb-pp-input-privatekey-text").parent().css("display","block")}if(a=="none"){$("#fb-recaptcha-theme").parent().css("display","none")}else{$("#fb-recaptcha-theme").parent().css("display","block")}$("#fb-pp-input-captcha").change(function(){fb_editor.backgroundActive();var h=$(this).attr("value");var l=document.getElementById("docContainer");var k=fb_undo.getFormParams(l);k.validation_object_id="reCaptcha";k.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));pValidationConfig.set_config_type("reCaptcha","captcha_status",h);if(h=="automatic"||h=="manual"){$("#fb-captcha_control").css("display","block")}else{$("#fb-captcha_control").css("display","none")}if(h=="manual"){$("#fb-pp-input-publickey-text").parent().css("display","block");$("#fb-pp-input-privatekey-text").parent().css("display","block")}else{$("#fb-pp-input-publickey-text").parent().css("display","none");$("#fb-pp-input-privatekey-text").parent().css("display","none")}if(h=="none"){$("#fb-recaptcha-theme").parent().css("display","none")}else{$("#fb-recaptcha-theme").parent().css("display","block")}k.markupredo=fb_utils.getouterHtml(l);k.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));var m=fb_editor.JSONParser.stringify(k);appVar.pushUndo_(m)});$("#fb-help-captcha").click(function(){appVar.displayAlert_('Captcha tests require form submitters to prove that they\'re human by re-typing a pair of words shown on the screen.\n\nChoose "Automatic" if you use S-Drive\'s automated form processing.\n\nChoose "Manual" if you export manually. You can get the keys for your domain at the reCAPTCHA website: www.recaptcha.org|#|http://www.coffeecup.com/help/articles/907')});var b=c;$("#fb-pp-input-publickey-text").change(function(n){if(b!=$("#fb-pp-input-publickey-text").attr("value")){var l=$("#fb-pp-input-publickey-text").attr("value").trim();var k=document.getElementById("docContainer");var h=fb_undo.getFormParams(k);h.validation_object_id="reCaptcha";h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));pValidationConfig.set_config_type("reCaptcha","public_key",l);h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));h.markupredo=fb_utils.getouterHtml(k);var m=fb_editor.JSONParser.stringify(h);appVar.pushUndo_(m);b=l;$("#fb-pp-input-publickey-text").attr("value",l)}});$("#fb-pp-input-publickey-text").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-publickey-text");return});$("#fb-pp-input-publickey-text").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});var e=f;$("#fb-pp-input-privatekey-text").change(function(n){if(e!=$("#fb-pp-input-privatekey-text").attr("value")){var l=$("#fb-pp-input-privatekey-text").attr("value").trim();var k=document.getElementById("docContainer");var h=fb_undo.getFormParams(k);h.validation_object_id="reCaptcha";h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));pValidationConfig.set_config_type("reCaptcha","private_key",l);h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));h.markupredo=fb_utils.getouterHtml(k);var m=fb_editor.JSONParser.stringify(h);appVar.pushUndo_(m);e=l;$("#fb-pp-input-privatekey-text").attr("value",l)}});$("#fb-pp-input-privatekey-text").focus(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=document.getElementById("fb-pp-input-privatekey-text");return});$("#fb-pp-input-privatekey-text").blur(function(){fb_panel.inputFocused="";return});$("#fb-recaptcha-theme").change(function(m){var n=$("#fb-recaptcha-theme").attr("value");var k=document.getElementById("docContainer");var h=fb_undo.getFormParams(k);h.validation_object_id="reCaptcha";h.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));pValidationConfig.set_config_type("reCaptcha","theme",n);$("#fb-captcha_control img").attr("src","editordata/images/recaptcha"+n+".png");h.markupredo=fb_utils.getouterHtml(document.getElementById("docContainer"));h.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id("reCaptcha"));h.markupredo=fb_utils.getouterHtml(k);var l=fb_editor.JSONParser.stringify(h);appVar.pushUndo_(l)})},maxNumErrors:function(){var b=pValidationConfig.get_config_value("_special","maxnumerrors");if(typeof b!="number"){b=""}var a=false;var c=b;this.markup='<label class="label_input">							<span class="primary_left">Max. Errors:</span>							<input id="fb-pp-input-maxnumerrors" class="input_right" type="text" maxlength="125" value="'+b+'"/>						</label>';fb_panel.addToFormProperties(this.markup);$("#fb-pp-input-maxnumerrors").change(function(){if(a){var d=fb_undo.getFormParams(document.getElementById("docContainer"));d.validation_object_id="_special";d.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id("_special"));var e=$("#fb-pp-input-maxnumerrors").attr("value");if(e!=""){e=fb_utils.clearNotNumericChars(e)}if(isNaN(e)){appVar.displayAlert_("You must provide a positive number for this value.");$("#fb-pp-input-maxnumerrors").val(c);return}if(e==0){appVar.displayAlert_("Please allow at least 1 error to be displayed.");e=1}$("#fb-pp-input-maxnumerrors").attr("value",e);pValidationConfig.set_config_type("_special","maxnumerrors",e);if(c!=e){d.markupredo=fb_utils.getouterHtml(document.getElementById("docContainer"));d.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id("_special"));appVar.pushUndo_(fb_editor.JSONParser.stringify(d));a=false;c=e}}});$("#fb-pp-input-maxnumerrors").keyup(function(d){if(d.keyCode=="9"){return}a=true;if(d.keyCode=="13"){$("#fb-pp-input-maxnumerrors").trigger("change")}});$("#fb-pp-input-maxnumerrors").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-maxnumerrors")});$("#fb-pp-input-maxnumerrors").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},showHints:function(){var b=$("#docContainer").hasClass("hidehints")?true:false;var a=b?"checked = true":"";this.markup='<label class="label_checkbox">								<input id="fb-pp-check-hide-hints" class="check_left" type="checkbox"'+a+'">							<span class="primary_right">Hide Hints</span>						</label>';fb_panel.addToFormProperties(this.markup);$("#fb-pp-check-hide-hints").change(function(){fb_editor.backgroundActive();var d=document.getElementById("docContainer");var c=fb_undo.getFormParams(d);if($("#fb-pp-check-hide-hints").attr("checked")){$(".fb-hint").addClass("hidden_hint");$("#docContainer").addClass("hidehints")}else{$(".fb-hint").removeClass("hidden_hint");$("#docContainer").removeClass("hidehints")}c.markupredo=fb_utils.getouterHtml(d);appVar.pushUndo_(fb_editor.JSONParser.stringify(c))})},submitValue:function(){var c=$("#fb-submit-button").attr("value");var a=document.getElementById("fb-submit-button-div");this.markup='<label class="label_input">								<span class="primary_left">Label:</span>								<input class="input_right" id="fb-pp-input-submit-label" maxlength="125">						</label>';fb_panel.add(this.markup);$("#fb-pp-input-submit-label").attr("value",c);var b=fb_utils.getouterHtml(a);var d=$("#fb-pp-input-submit-label").attr("value");$("#fb-pp-input-submit-label").change(function(){if(b!=fb_utils.getouterHtml(a)){var e=fb_utils.replaceString($("#fb-pp-input-submit-label").attr("value"),'"',"");if(e==""){e=" "}var f=fb_undo.getSubmitParams(a);f.markup=b;$("#fb-submit-button").attr("value",e);$("#fb-pp-input-submit-label").attr("value",e);d=e;b=fb_utils.getouterHtml(a);f.markupredo=fb_utils.getouterHtml(a);var g=fb_editor.JSONParser.stringify(f);appVar.pushUndo_(g)}});$("#fb-pp-input-submit-label").keyup(function(f){if(f.keyCode=="9"||f.keyCode=="192"){return}$("#fb-submit-button").attr("value",$("#fb-pp-input-submit-label").attr("value"))});$("#fb-pp-input-submit-label").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-submit-label");b=fb_utils.getouterHtml(a)});$("#fb-pp-input-submit-label").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""})},imagesAlign:function(c){var a=c[0].id;var b=f(a);var d="";if(b=="fb-item-alignment-center"){d="center"}else{if(b=="fb-item-alignment-right"){d="right"}else{d="left"}}this.markup='<label class="label_combo">						<span class="primary_left">Position:</span>							<select id="fb-pp-input-submit-alignment" class="combo_right" >								<option value = "left">Left</option>								<option value = "center">Center</option>								<option value = "right">Right</option>							 </select>						</label>';fb_panel.add(this.markup);function f(g){if($("#"+g).hasClass("fb-item-alignment-center")){return"fb-item-alignment-center"}else{if($("#"+g).hasClass("fb-item-alignment-right")){return"fb-item-alignment-right"}else{return"fb-item-alignment-left"}}}var e=document.getElementById("fb-pp-input-submit-alignment");fb_utils.setValueToSelected(d,e);$("#fb-pp-input-submit-alignment").change(function(){var h=fb_undo.getItemParams(c[0].firstChild);var g=$("#fb-pp-input-submit-alignment").attr("value");var k=f(a);$("#"+a).removeClass(k);if(g=="center"){$("#"+a).addClass("fb-item-alignment-center")}else{if(g=="left"){$("#"+a).addClass("fb-item-alignment-left")}else{if(g=="right"){$("#"+a).addClass("fb-item-alignment-right")}}}h.markupredo=fb_utils.getouterHtml(c[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(h))})},imagesVerticalAlign:function(b){var a=b[0].id;var c=$(b).children(0).attr("data-valign");if(c!="top"&&c!="middle"&&c!="bottom"){c="top"}this.markup='<label class="label_combo">						<span class="primary_left"></span>							<select id="fb-pp-input-vertical-alignment" class="combo_right" >								<option value = "top">Top</option>								<option value = "middle">Middle</option>								<option value = "bottom">Bottom</option>							 </select>						</label>';fb_panel.add(this.markup);var d=document.getElementById("fb-pp-input-vertical-alignment");fb_utils.setValueToSelected(c,d);$("#fb-pp-input-vertical-alignment").change(function(){var f=fb_undo.getItemParams(b[0].firstChild);var e=$("#fb-pp-input-vertical-alignment").attr("value");if(e=="top"){$(b).children(0).attr("data-valign","top");$(b).children(0).css("margin-top","")}else{if(e=="middle"){$(b).children(0).attr("data-valign","middle")}else{if(e=="bottom"){$(b).children(0).attr("data-valign","bottom")}}}$(b).resize();f.markupredo=fb_utils.getouterHtml(b[0]);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))})},submitFontFamily:function(){var e=$("#fb-submit-button").css("font-family").replace(/'/g,"");this.markup='<label class="label_grouped_main">								<span class="primary_left">Font:</span>								<select class="combo_right" id="fb-pp-input-font-submit" ></select> 						</label>';fb_panel.add(this.markup);var d=fb_defaults.get_default_configuration_value("submit","font");var b=document.getElementById("fb-pp-input-font-submit");var h;var a;var f=null;for(var c=0;c<document.styleSheets.length;c++){if(document.styleSheets[c].href==$("#theme").get(0).href){f=document.styleSheets[c]}}if(f){var g=f.cssRules?f.cssRules:f.rules;if(g){for(var c=g.length-1;c>=0;c--){if((jQuery.trim(g[c].selectorText)=="#fb-submit-button")&&g[c].style.fontFamily.length){a=g[c].style.fontFamily;var k=a.split(",")[0];k=k.replace(/'/g,"");h=new Option(k,"");h.title=k;b.add(h);break}}}}for(c in d){if((typeof(d[c])=="string")&&k&&(d[c].toLowerCase()!=k.toLowerCase())){h=new Option(d[c],d[c].toLowerCase());h.title=d[c];b.add(h)}}fb_utils.setValueToSelected(e,b);$("#fb-pp-input-font-submit").change(function(){var m=$("#fb-pp-input-font-submit").attr("value");var l=document.getElementById("fb-submit-button-div");var n=fb_undo.getSubmitParams(l);fb_utils.setNonStandardClass();$("#fb-submit-button").css("font-family",m);fb_panel.updateProperties();n.markupredo=fb_utils.getouterHtml(l);var o=fb_editor.JSONParser.stringify(n);appVar.pushUndo_(o)})},submitFontSize:function(){var c=$("#fb-submit-button").css("font-size");c=c.substr(0,c.length-2);var b=c;var a=0;this.markup='<label class="label_grouped">						<input id="fb-pp-input-submit-fontsize" class="input_right" type="text" value="'+c+'" maxlength="50">					</label>';fb_panel.add(this.markup);function d(){if(a>0&&((a+"px")!=$("#fb-submit-button").css("font-size"))){var e=document.getElementById("fb-submit-button-div");var f=fb_undo.getSubmitParams(e);fb_utils.setNonStandardClass();b=a;$("#fb-submit-button").css("font-size",a);fb_panel.updateProperties();f.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-submit-fontsize").attr("value",b);$("#fb-submit-button").css("font-size",b)}}$("#fb-pp-input-submit-fontsize").change(function(){a=fb_utils.clearNotNumericChars($("#fb-pp-input-submit-fontsize").attr("value"));$("#fb-pp-input-submit-fontsize").attr("value",a);var e=$("#fb-pp-input-submit-fontsize").attr("value");if(e+"px"!=$("#fb-submit-button").css("font-size")){d()}});$("#fb-pp-input-submit-fontsize").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-submit-fontsize");return});$("#fb-pp-input-submit-fontsize").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-submit-fontsize").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}a=$("#fb-pp-input-submit-fontsize").attr("value")*1;if(a<10||a>60||fb_utils.hasNotNumericChars($("#fb-pp-input-submit-fontsize").attr("value"))){return}d()})},submitPadding:function(){var d=$("#fb-submit-button").css("padding-top");d=d!=""?d.substr(0,d.length-2):"0";var b=d;var a=0;this.markup='<label class="label_input">						<span class="primary_left">Padding:</span>						<input id="fb-pp-input-submit-padding" class="input_right" type="text" value="'+d+'" maxlength="50">					</label>';fb_panel.add(this.markup);function c(){if(a>=0&&((a+"px")!=$("#fb-submit-button").css("padding-top"))){var e=document.getElementById("fb-submit-button-div");var f=fb_undo.getSubmitParams(e);fb_utils.setNonStandardClass();b=a;$("#fb-submit-button").css("padding",a);fb_panel.updateProperties();f.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-input-submit-padding").attr("value",b);$("#fb-submit-button").css("padding",b)}}$("#fb-pp-input-submit-padding").change(function(){a=fb_utils.clearNotNumericChars($("#fb-pp-input-submit-padding").attr("value"));$("#fb-pp-input-submit-padding").attr("value",a);var e=$("#fb-pp-input-submit-padding").attr("value");if(e+"px"!=$("#fb-submit-button").css("padding-top")){c()}});$("#fb-pp-input-submit-padding").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-submit-padding");return});$("#fb-pp-input-submit-padding").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-submit-padding").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}a=$("#fb-pp-input-submit-padding").attr("value")*1;if(a<2||a>60||fb_utils.hasNotNumericChars($("#fb-pp-input-submit-padding").attr("value"))){return}c()})},submitFontColor:function(){var e=fb_utils.getHexFromShortHex($("#fb-submit-button").css("color"));this.markup='<label class="label_grouped">							<div class="color_right fb-color-control" id="fb-font-color-submit"><div></div></div>						</label>';fb_panel.add(this.markup);$("#fb-font-color-submit div").css("background-color",e);var a=e;if(/rgb/.test(a)){a=fb_utils.getHexFromRGB(e)}var d=e;var c=document.getElementById("fb-submit-button-div");var b={};$("#fb-font-color-submit").ColorPicker({color:a,onShow:function(f){b=fb_undo.getSubmitParams(c);$(f).fadeIn(0);$(f).find("input").focus(function(){fb_panel.inputFocused=this});$(f).find("input").blur(function(){fb_panel.inputFocused=""});return false},onHide:function(g){$(g).fadeOut(0);if(d!=$("#fb-submit-button").css("color")){fb_panel.updateProperties();b.markupredo=fb_utils.getouterHtml(c);var f=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(f);d=$("#fb-submit-button").css("color")}return false},onChange:function(f,h,g){fb_utils.setNonStandardClass();$("#fb-font-color-submit div").css("background-color","#"+h);$("#fb-submit-button").css("color","#"+h)}})},submitBackgroundColor:function(){var e=fb_utils.getHexFromShortHex($("#fb-submit-button").css("background-color"));this.markup='<label class="label_color">							<span class="primary_left">Button Color:</span>							<div class="color_right fb-color-control" id="fb-background-color-submit"><div></div></div>						</label>';fb_panel.add(this.markup);$("#fb-background-color-submit div").css("background-color",e);var a=e;if(/rgb/.test(a)){a=fb_utils.getHexFromRGB(e)}var d=e;var c=document.getElementById("fb-submit-button-div");var b={};$("#fb-background-color-submit").ColorPicker({color:a,onShow:function(f){b=fb_undo.getSubmitParams(c);$(f).fadeIn(0);$(f).find("input").focus(function(){fb_panel.inputFocused=this});$(f).find("input").blur(function(){fb_panel.inputFocused=""});return false},onHide:function(g){$(g).fadeOut(0);if(d!=$("#fb-submit-button").css("background-color")){fb_panel.updateProperties();b.markupredo=fb_utils.getouterHtml(c);var f=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(f);d=$("#fb-submit-button").css("background-color");if($("#fb-submit-button").css("border-width")==""){fb_panel.updateProperties()}}return false},onChange:function(f,h,g){fb_utils.setNonStandardClass();$("#fb-background-color-submit div").css("background-color","#"+h);$("#fb-submit-button").css("background-color","#"+h)}})},submitReset:function(){this.markup='<input type="button" style="display:none" class="action_tool"  id="fb-submit-reset-button" value="Reset">';fb_panel.add(this.markup);$("#fb-submit-reset-button").click(function(){var b=document.getElementById("fb-submit-button-div");jsonobj=fb_undo.getSubmitParams(b);var a=document.getElementById("fb-submit-button");fb_toolbox.assignDefaultValues(a,"submit");fb_views.submit_button();jsonobj.markupredo=fb_utils.getouterHtml(b);appVar.pushUndo_(fb_editor.JSONParser.stringify(jsonobj))})},submitStandard:function(){this.markup='<div class="element_property_actions">				 			<hr class="tool_group_divider">							<a class="action_tool" id="fb-submit-standard-button">Reset Styles</a>						</div>';fb_panel.add(this.markup);$("#fb-submit-standard-button").click(function(){var a=document.getElementById("fb-submit-button-div");jsonobj=fb_undo.getSubmitParams(a);jsonobj.validation_object_id="fb-submit-button";jsonobj.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id("fb-submit-button"));fb_editor.resetSubmitStyles();jsonobj.markupredo=fb_utils.getouterHtml(a);jsonobj.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id("fb-submit-button"));var b=fb_editor.JSONParser.stringify(jsonobj);appVar.pushUndo_(b)})},submitPaddingTop:function(){var d=$("#fb-submit-button").css("padding-top");d=d.substr(0,d.length-2);var a=d;var b=0;this.markup='<label class="label_input_grouped">						<span class="primary_left">Padding:</span>						<input id="fb-pp-submit-padding-top" class="input_right" type="text" value="'+d+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function c(){if((b>=0)&&((b+"px")!=$("#fb-submit-button").css("padding-top"))&&(b<=$("#fb-pp-submit-padding-top").attr("max"))){var e=document.getElementById("fb-submit-button-div");var f=fb_undo.getSubmitParams(e);fb_utils.setNonStandardClass();a=b;$("#fb-submit-button").css("padding-top",b);fb_panel.updateProperties();f.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-submit-padding-top").attr("value",a);$("#fb-submit-button").css("padding-top",a);if(b>$("#fb-pp-submit-padding-top").attr("max")){appVar.displayAlert_("The maximum padding top allowed is "+$("#fb-pp-submit-padding-top").attr("max")+".")}}}$("#fb-pp-submit-padding-top").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-submit-padding-top").attr("value"));$("#fb-pp-submit-padding-top").attr("value",b);var e=$("#fb-pp-submit-padding-top").attr("value");if(e+"px"!=$("#fb-submit-button").css("padding-top")){c()}});$("#fb-pp-submit-padding-top").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-submit-padding-top");return});$("#fb-pp-submit-padding-top").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-submit-padding-top").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-submit-padding-top").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-submit-padding-top").attr("value"))){return}c()})},submitPaddingBottom:function(){var d=$("#fb-submit-button").css("padding-bottom");d=d.substr(0,d.length-2);var b=d;var c=0;this.markup='<label class="label_input_grouped">						<input id="fb-pp-submit-padding-bottom" class="input_right" type="text" value="'+d+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function a(){if((c>=0)&&((c+"px")!=$("#fb-submit-button").css("padding-bottom"))&&(c<=$("#fb-pp-submit-padding-bottom").attr("max"))){var e=document.getElementById("fb-submit-button-div");var f=fb_undo.getSubmitParams(e);fb_utils.setNonStandardClass();b=c;$("#fb-submit-button").css("padding-bottom",c);fb_panel.updateProperties();f.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-submit-padding-bottom").attr("value",b);$("#fb-submit-button").css("padding-bottom",b);if(c>$("#fb-pp-submit-padding-bottom").attr("max")){appVar.displayAlert_("The maximum padding bottom allowed is "+$("#fb-pp-submit-padding-bottom").attr("max")+".")}}}$("#fb-pp-submit-padding-bottom").change(function(){c=fb_utils.clearNotNumericChars($("#fb-pp-submit-padding-bottom").attr("value"));$("#fb-pp-submit-padding-bottom").attr("value",c);var e=$("#fb-pp-submit-padding-bottom").attr("value");if(e+"px"!=$("#fb-submit-button").css("padding-bottom")){a()}});$("#fb-pp-submit-padding-bottom").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-submit-padding-bottom");return});$("#fb-pp-submit-padding-bottom").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-input-submit-bottom").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}c=$("#fb-pp-submit-padding-bottom").attr("value")*1;if(c<10||c>570||fb_utils.hasNotNumericChars($("#fb-pp-submit-padding-bottom").attr("value"))){return}a()})},submitPaddingLeft:function(){var d=$("#fb-submit-button").css("padding-left");d=d.substr(0,d.length-2);var a=d;var b=0;this.markup='<label class="label_input_grouped">						<input id="fb-pp-submit-padding-left" class="input_right" type="text" value="'+d+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function c(){if((b>=0)&&((b+"px")!=$("#fb-submit-button").css("padding-left"))&&(b<=$("#fb-pp-submit-padding-left").attr("max"))){var e=document.getElementById("fb-submit-button-div");var f=fb_undo.getSubmitParams(e);fb_utils.setNonStandardClass();a=b;$("#fb-submit-button").css("padding-left",b);fb_panel.updateProperties();f.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-submit-padding-left").attr("value",a);$("#fb-submit-button").css("padding-left",a);if(b>$("#fb-pp-submit-padding-left").attr("max")){appVar.displayAlert_("The maximum padding left allowed is "+$("#fb-pp-submit-padding-left").attr("max")+".")}}}$("#fb-pp-submit-padding-left").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-submit-padding-left").attr("value"));$("#fb-pp-submit-padding-left").attr("value",b);var e=$("#fb-pp-submit-padding-left").attr("value");if(e+"px"!=$("#fb-submit-button").css("padding-left")){c()}});$("#fb-pp-submit-padding-left").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-submit-padding-left");return});$("#fb-pp-submit-padding-left").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-submit-padding-left").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-submit-padding-left").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-submit-padding-left").attr("value"))){return}c()})},submitPaddingRight:function(){var c=$("#fb-submit-button").css("padding-right");c=c.substr(0,c.length-2);var a=c;var b=0;this.markup='<label class="label_input_grouped">						<input id="fb-pp-submit-padding-right" class="input_right" type="text" value="'+c+'"min="0" max="1000">					</label>';fb_panel.add(this.markup);function d(){if((b>=0)&&((b+"px")!=$("#fb-submit-button").css("padding-right"))&&(b<=$("#fb-pp-submit-padding-right").attr("max"))){var e=document.getElementById("fb-submit-button-div");var f=fb_undo.getSubmitParams(e);fb_utils.setNonStandardClass();a=b;$("#fb-submit-button").css("padding-right",b);fb_panel.updateProperties();f.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(f))}else{$("#fb-pp-submit-padding-right").attr("value",a);$("#fb-submit-button").css("padding-right",a);if(b>$("#fb-pp-submit-padding-right").attr("max")){appVar.displayAlert_("The maximum padding right allowed is "+$("#fb-pp-submit-padding-right").attr("max")+".")}}}$("#fb-pp-submit-padding-right").change(function(){b=fb_utils.clearNotNumericChars($("#fb-pp-submit-padding-right").attr("value"));$("#fb-pp-submit-padding-right").attr("value",b);var e=$("#fb-pp-submit-padding-right").attr("value");if(e+"px"!=$("#fb-submit-button").css("padding-right")){d()}});$("#fb-pp-submit-padding-right").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-submit-padding-right");return});$("#fb-pp-submit-padding-right").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-pp-submit-padding-right").keyup(function(f){if(f.keyCode=="9"){return}if(!(f.keyCode>=48&&f.keyCode<=57)&&!(f.keyCode>=96&&f.keyCode<=105)){return}b=$("#fb-pp-submit-padding-right").attr("value")*1;if(b<10||b>570||fb_utils.hasNotNumericChars($("#fb-pp-submit-padding-right").attr("value"))){return}d()})},footerReset:function(){this.markup='<div class="element_property_actions" style="display: inline-block;">							<hr class="tool_group_divider">							<a class="action_tool" id="fb-reset-footer-styles">Reset Styles</a>						</div>';fb_panel.add(this.markup);$("#fb-reset-footer-styles").click(function(){var d=document.getElementById("fb-submit-button-div");var b=fb_undo.getSubmitParams(d);var a=$("#fb-submit-button-div").css("min-height");$("#fb-submit-button-div").removeAttr("style");$("#fb-submit-button-div").css("min-height",a);b.markupredo=fb_utils.getouterHtml(d);var c=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(c);$("#objectproperties").trigger("click")})},headerReset:function(){this.markup='<div class="element_property_actions" style="display: inline-block;">							<hr class="tool_group_divider">							<a class="action_tool" id="fb-reset-header-styles">Reset Styles</a>						</div>';fb_panel.add(this.markup);$("#fb-reset-header-styles").click(function(){var d=document.getElementById("fb-form-header1");var b=fb_undo.getLogoAndHeaderParams(d);var a=$("#fb-form-header1").css("min-height");$("#fb-form-header1").removeAttr("style");$("#fb-form-header1").removeClass("fb-item-alignment-center");$("#fb-form-header1").removeClass("fb-item-alignment-left");$("#fb-form-header1").removeClass("fb-item-alignment-right");$("#fb-form-header1").css("min-height",a);b.markupredo=fb_utils.getouterHtml(d);var c=fb_editor.JSONParser.stringify(b);appVar.pushUndo_(c);$("#objectproperties").trigger("click")})},formReset:function(){this.markup='<div class="element_property_actions">							<hr class="tool_group_divider">							<a class="action_tool" id="fb-reset-form-styles">Reset Styles</a>						</div>';fb_panel.addToFormProperties(this.markup);$("#fb-reset-form-styles").click(function(){var b=document.getElementById("docContainer");var a=fb_undo.getFormParams(b);$("#docContainer").removeAttr("style");$("#docContainer").removeAttr("data-margin");$("#docContainer").removeClass("fb-small");$("#docContainer").removeClass("fb-large");$("#docContainer").removeClass("fb-item-alignment-center");$("#docContainer").removeClass("fb-item-alignment-left");$("#docContainer").removeClass("fb-item-alignment-right");$("#docContainer .fb-one-column").removeClass("fb-one-column").addClass("fb-two-column");$("#docContainer .fb-three-column").removeClass("fb-three-column").addClass("fb-two-column");$("#docContainer").removeClass("fb-toplabel");$("#docContainer").removeClass("fb-leftlabel");$("#docContainer").removeClass("fb-rightlabel");a.markupredo=fb_utils.getouterHtml(b);var c=fb_editor.JSONParser.stringify(a);appVar.pushUndo_(c);fb_views.form()})},itemReset:function(a){this.markup='<div class="element_property_actions">							<hr class="tool_group_divider">							<a class="action_tool" id="fb-reset-item-styles">Reset Styles</a>						</div>';fb_panel.add(this.markup);$("#fb-reset-item-styles").click(function(){var e,b;if($(a[0].firstChild).hasClass("fb-image")){e=$(a).css("width");b=$(a).css("height")}var c=fb_undo.getItemParams(a[0].firstChild);$("#"+a[0].id+", #"+a[0].id+" *").removeAttr("style");$("#"+a[0].id+", #"+a[0].id+" *").removeClass("fb-item-alignment-left");$("#"+a[0].id+", #"+a[0].id+" *").removeClass("fb-item-alignment-center");$("#"+a[0].id+", #"+a[0].id+" *").removeClass("fb-item-alignment-right");if($(a[0].firstChild).hasClass("fb-image")){$(a).css("width",e);$(a).css("height",b)}c.markupredo=fb_utils.getouterHtml(a[0]);var d=fb_editor.JSONParser.stringify(c);appVar.pushUndo_(d);$("#objectproperties").trigger("click")})},hiddenFields:function(){this.markup='<label class="label_multiline has_object_controls"><span class="primary_left">Hidden Fields:</span><div class="manager_descriptors"><span class="manager_name">Name</span><span class="manager_value">Value</span></div></label><div class="manager_wrapper" id ="wrapper_div_id" ></div>';fb_panel.addToFormProperties(this.markup);var b=$("input[type=hidden]");for(var c=0;c<b.length;c++){var a="";a='<div class="hidden_row"><input type="text" class="hidden_input_attr_name" title="'+b[c].name+'" value="'+b[c].name+'"><input type="text" class="hidden_input_attr_value" title="'+fb_utils.htmlEncode(b[c].value)+'" value="'+fb_utils.htmlEncode(b[c].value)+'"></div>';$("#wrapper_div_id").append(a);fb_panel.initHiddenRow()}fb_panel.addToFormProperties('<div class="object_controls" id="hidden_object_controls"></div>')},addHidden:function(){var a='<span class="object_control_button" id="addhiddenitem">&#43;</span>';$("#hidden_object_controls").append(a);$("#addhiddenitem").click(function(){fb_editor.backgroundActive();var e=document.getElementById("docContainer");var d=fb_undo.getFormParams(e);var c=fb_toolbox.generateName("Name",fb_utils.existsHiddenFieldName);var g='<input type="hidden" name="'+c+'" value="Value">';var b='<div class="hidden_row"><input type="text" class="hidden_input_attr_name" title="'+c+'" value="'+c+'"><input type="text" class="hidden_input_attr_value" title="Value" value="Value"></div>';$("#docContainer").append(g);$("#wrapper_div_id").append(b);fb_panel.initHiddenRow();var f=document.getElementById("wrapper_div_id");$(f.lastChild.childNodes[0]).trigger("dblclick");fb_utils.setScrollAtBottom("wrapper_div_id","hidden_row");d.markupredo=fb_utils.getouterHtml(e);appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},removeHidden:function(){var a='<span class="object_control_button" id="removehiddenitem">&#8722;</span>';$("#hidden_object_controls").append(a);$("#removehiddenitem").click(function(){var k=document.getElementById("docContainer");var l=fb_undo.getFormParams(k);var b=$("input[type=hidden]");var m=document.getElementById("wrapper_div_id");var d=m.childNodes;var h=0;var c=null;for(var f=d.length-1;f>=0;f--){if($(d[f]).hasClass("selected_row")){h+=1;if(d[f-1]){c=d[f-1]}else{if(d[f+1]){c=d[f+1]}}}}for(var f=d.length-1;f>=0;f--){if($(d[f]).hasClass("selected_row")){var g="["+d[f].firstChild.value+"]";appVar.updateNameInSettings_(g);$(d[f]).remove();$(b[f]).remove()}}if((h==1)&&(c)){$(c).addClass("selected_row")}else{if(h>=2){var e=d.length-1;$(d[e]).addClass("selected_row")}}l.markupredo=fb_utils.getouterHtml(k);appVar.pushUndo_(fb_editor.JSONParser.stringify(l))})},phone:function(b){var c=pValidationConfig.get_config_value(b.id,"phone");this.markup='<label class="label_grouped_main">								<span class="primary_left">Format:</span>								<select class="combo_right combo_phone" id="fb-pp-phone" >									<option value="phoneUS">Phone US</option>									<option value="phoneUK">Phone UK</option>									<option value="mobileUK">Mobile UK</option>									<option value="international">International</option>								</select>						</label>';fb_panel.add(this.markup);var a=document.getElementById("fb-pp-phone");fb_utils.setValueToSelected(c,a);$("#fb-pp-phone").change(function(){var d=fb_undo.getItemParams($(b).parent()[0]);d.validation_object_id=b.id;d.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));pValidationConfig.set_config_type(b.id,"phone",$("#fb-pp-phone").attr("value"));d.markupredo=fb_utils.getouterHtml($(b).parent().parent()[0]);d.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(b.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(d))})},regex:function(d){var a=pValidationConfig.get_config_value(d.id,"regex_config");this.markup='<label class="label_grouped_main">								<span class="primary_left">RegEx:</span>								<select class="combo_right combo_regex" id="fb-pp-regex-opts" >								</select>						</label>						<div class="object_controls" id="properties_object_panel"><span class="object_control_button" id="fb-help-regex">?</span></div>';this.markup+='<label class="label_input">							<span class="primary_left"></span>							<textarea id="fb-pp-regex-value" class="textarea_right"  value="'+a.value+'" >'+a.value+"</textarea>						</label>";fb_panel.add(this.markup);var c="";for(format in pValidationConfig.reg_exp_defaults){c+='<option title="'+format+'" value="'+format+'" >'+format+"</option>"}$("#fb-pp-regex-opts").append(c);var b=document.getElementById("fb-pp-regex-opts");fb_utils.setValueToSelected(a.option,b);if(a.option=="Custom"){$("#fb-pp-regex-value").attr("disabled","").css("color","rgb(0,0,0)").css("background-color","")}else{$("#fb-pp-regex-value").attr("disabled","disabled").css("color","rgb(128,128,128)").css("background-color","rgb(229,229,229)")}$("#fb-pp-regex-opts").change(function(){var e=fb_undo.getItemParams($(d).parent()[0]);e.validation_object_id=d.id;e.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));var f=$("#fb-pp-regex-opts").attr("value");if(f!="Custom"){$("#fb-pp-regex-value").attr("value",pValidationConfig.reg_exp_defaults[f]);$("#fb-pp-regex-value").attr("disabled","disabled").css("color","rgb(128,128,128)").css("background-color","rgb(229,229,229)");pValidationConfig.set_config_type(d.id,"regex_config",{option:f,value:pValidationConfig.reg_exp_defaults[f]})}else{$("#fb-pp-regex-value").attr("disabled","").css("color","rgb(0,0,0)").css("background-color","");pValidationConfig.set_config_type(d.id,"regex_config",{option:"Custom",value:$("#fb-pp-regex-value").attr("value")})}e.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);e.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(e))});$("#fb-pp-regex-value").blur(function(){var l=$("#fb-pp-regex-value").attr("value").trim();$("#fb-pp-regex-value").attr("value",l);if(l==pValidationConfig.get_config_value(d.id,"regex_config").value){return}if(l==""){$("#fb-pp-regex-value").attr("value",pValidationConfig.get_config_value(d.id,"regex_config").value);appVar.displayAlert_("An empty regular expression is not allowed.");return}try{var k=/^(\W)([^\1]+)\1(.*)$/.exec(l);var g=new RegExp(k[2],k[3]);if(g==undefined){appVar.displayAlert_('The regular expression "'+l+'" is invalid. Please check for proper syntax');var e=pValidationConfig.get_config_value(d.id,"regex_config").value;$("#fb-pp-regex-value").attr("value",e);fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return}}catch(h){appVar.displayAlert_('The regular expression "'+l+'" is invalid. Please check for proper syntax.');var e=pValidationConfig.get_config_value(d.id,"regex_config").value;$("#fb-pp-regex-value").attr("value",e);fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return}var f=fb_undo.getItemParams($(d).parent()[0]);f.validation_object_id=d.id;f.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));pValidationConfig.set_config_type(d.id,"regex_config",{option:"Custom",value:l});f.markupredo=fb_utils.getouterHtml($(d).parent().parent()[0]);f.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d.id));appVar.pushUndo_(fb_editor.JSONParser.stringify(f));fb_panel.resetCursorPosition(this);fb_panel.inputFocused=""});$("#fb-pp-regex-value").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-regex-value");return});$("#fb-help-regex").click(function(){appVar.displayAlert_("Regular expressions restrict fields to a certain format or set of characters. You can use a preset or define your own custom expression.|#|http://www.coffeecup.com/help/articles/940")})},fieldPayments:function(m){var d=m.id;var l=true;if(m.tagName.toLowerCase()=="label"){d=m.firstChild.id;if($(m.parentNode).hasClass("fb-checkbox")){l=false}}else{if($(m.parentNode).hasClass("fb-listbox")){l=false}}var b=pPaymentsConfig.get_config_value(d,"type");if(!b){b="none"}var f=pPaymentsConfig.get_config_value(d,"use_invoice")?' checked = "true" ':"";var a=pPaymentsConfig.get_config_value(d,"invoice_label");var k=pPaymentsConfig.get_config_value(d,"price");if(!k){k="0.01"}this.markup='<label class="label_input" id="payment_combo_container">							<span class="primary_left">Payments:</span>							<select class="combo_right" id="fb-pp-input-payments" >								<option title="None" value="none">None</option>								<option title="Amount" value="amount">Price Input</option>';if(l){this.markup+='<option title="Quantity" value="quantity">Price Multiplier</option>								 <option title="Total Multiplier" value="cart_multiplier">Form Total Multiplier</option>'}this.markup+='</select>							<div class="object_controls" id="properties_object_panel"><span class="object_control_button" id="fb-help-fieldpayment">?</span></div>						</label>';this.markup+='<label class="label_input_right" id="label_input_price">							<span class="primary_right">Price:</span>							<input id="fb-pp-input-price" class="input_small" type="text" value="'+k+'" maxlength="254">						</label>';this.markup+='<label class="label_checkbox" id="label_input_invoice">								<input id="fb-pp-input-use-invoice-label" type="checkbox"'+f+'>								<span class="primary_right">Add text to invoice </span>						</label>';this.markup+='<label class="label_input_right" id="label_input_invoice_label" >										<input id="fb-pp-input-invoice-label" class="input_small" type="text" value="'+a+'" maxlength="254">							</label>';fb_panel.add(this.markup);function e(n){if(n=="quantity"){$("#label_input_price").css("display","block");$("#label_input_invoice").css("display","block");if($("#fb-pp-input-use-invoice-label").attr("checked")){$("#label_input_invoice_label").css("display","block")}else{$("#label_input_invoice_label").css("display","none")}$("#fb-pp-input-decimals").removeAttr("disabled").prev().css("color","rgb(0,0,0)")}else{if(n=="amount"){$("#label_input_price").css("display","none");$("#label_input_invoice").css("display","block");if($("#fb-pp-input-use-invoice-label").attr("checked")){$("#label_input_invoice_label").css("display","block")}else{$("#label_input_invoice_label").css("display","none")}$("#fb-pp-input-decimals").attr("disabled","disabled").prev().css("color","rgb(128,128,128)")}else{$("#label_input_price").css("display","none");$("#label_input_invoice").css("display","none");$("#label_input_invoice_label").css("display","none");$("#fb-pp-input-decimals").removeAttr("disabled").prev().css("color","rgb(0,0,0)")}}}var c=document.getElementById("fb-pp-input-payments");fb_utils.setValueToSelected(b,c);if(f){$("#label_input_invoice_label").css("display","block")}else{$("#label_input_invoice_label").css("display","none")}if(b=="none"){e("none")}else{if(b=="quantity"){e("quantity")}else{if(b=="amount"){e("amount")}else{e("cart_multiplier")}}}$("#fb-pp-input-payments").mousedown(function(){var o=appVar.canEnablePayments();if(!o){appVar.displayAlertEnablePayments();return false}var n=pValidationConfig.get_config_value(d,"contactList");if(n==true){appVar.displayAlert_("You need to disable Contact List in order to use this functionality.");return false}});$("#fb-pp-input-payments").change(function(){var q=fb_undo.getItemParams($(m).parent()[0]);q.validation_object_id=d;q.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d));q.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));if($("#fb-pp-input-payments").val()=="none"){e("none")}else{if($("#fb-pp-input-payments").val()=="quantity"){e("quantity");if(!pPaymentsConfig.get_config_value(d,"price")){pPaymentsConfig.set_config_type(d,"price",k)}}else{if($("#fb-pp-input-payments").val()=="amount"){e("amount");if($("#fb-pp-input-decimals").length){$("#fb-pp-input-decimals").attr("value","2");pValidationConfig.set_config_type(d,"decimals",2);fb_utils.updateDecimals(m,2)}}else{var u=pPaymentsConfig.is_multiplier_defined();if(u){e(b);this.value=b;appVar.displayAlert_('This element cannot be selected as the form total multiplier because the element "'+u+'" is already handling this property.');return}e("cart_multiplier")}}}if($("#fb-pp-input-payments").val()=="quantity"||$("#fb-pp-input-payments").val()=="cart_multiplier"||$("#fb-pp-input-payments").val()=="amount"){if(m.tagName.toLowerCase()=="label"||m.tagName.toLowerCase()=="select"){if(m.tagName.toLowerCase()=="label"){var n="#"+m.parentNode.parentNode.id+" ."+m.parentNode.className+" label";var p=$(n);for(var s=0;s<p.length;s++){var r=p[s].childNodes[1].innerHTML.split(":");p[s].childNodes[1].innerHTML=r[0];p[s].childNodes[0].setAttribute("value",r[0])}n=n+" input";pPaymentsConfig.generate_payment_options(d,$(n))}else{var n="#"+m.parentNode.parentNode.id+" option";var o=$(n);for(var s=0;s<o.length;s++){if(o[s].getAttribute("value").length<=0){continue}var r=o[s].innerHTML.split(":");o[s].innerHTML=r[0];o[s].setAttribute("value",r[0])}pPaymentsConfig.generate_payment_options(d,$(n))}}}pPaymentsConfig.set_config_type(d,"type",$("#fb-pp-input-payments").val());q.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);q.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));q.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d));var t=fb_editor.JSONParser.stringify(q);appVar.pushUndo_(t);$(m.parentNode).trigger("mousedown")});$("#fb-pp-input-use-invoice-label").change(function(){var n=fb_undo.getItemParams($(m).parent()[0]);n.validation_object_id=d;n.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d));n.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));if($("#fb-pp-input-use-invoice-label").attr("checked")){$("#label_input_invoice_label").css("display","block");pPaymentsConfig.set_config_type(d,"use_invoice",true)}else{$("#label_input_invoice_label").css("display","none");pPaymentsConfig.set_config_type(d,"use_invoice",false)}n.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);n.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));n.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d));var o=fb_editor.JSONParser.stringify(n);appVar.pushUndo_(o)});var h=a;$("#fb-pp-input-invoice-label").change(function(p){var q=fb_utils.htmlEncode($(this).attr("value"));if(q!=h){var n=fb_undo.getItemParams($(m).parent()[0]);n.validation_object_id=d;n.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d));n.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));pPaymentsConfig.set_config_type(d,"invoice_label",q);n.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);n.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));n.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d));var o=fb_editor.JSONParser.stringify(n);appVar.pushUndo_(o);h=q}});$("#fb-pp-input-invoice-label").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-invoice-label");return});$("#fb-pp-input-invoice-label").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});var g=k;$("#fb-pp-input-price").change(function(q){$("#fb-pp-input-price").attr("value",parseFloat($("#fb-pp-input-price").attr("value")).toFixed(2));var n=parseFloat($("#fb-pp-input-price").attr("value")).toFixed(2);var o=fb_undo.getItemParams($(m).parent()[0]);o.validation_object_id=d;o.validation_object=fb_utils.cloneObject(pValidationConfig.get_config_id(d));o.payments_object=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));if((n<=0)||(g==n)||isNaN(n)){var r="";if(n<=0||isNaN(n)){r="You must provide a positive price for this value.";appVar.displayAlert_(r)}n=g;$("#fb-pp-input-price").attr("value",n);return}else{pPaymentsConfig.set_config_type(d,"price",n);$("#fb-pp-input-price").attr("value",n);o.markupredo=fb_utils.getouterHtml($(m).parent().parent()[0]);o.payments_object_redo=fb_utils.cloneObject(pPaymentsConfig.get_config_id(d));o.validation_object_redo=fb_utils.cloneObject(pValidationConfig.get_config_id(d));var p=fb_editor.JSONParser.stringify(o);appVar.pushUndo_(p);g=n}});$("#fb-pp-input-price").focus(function(){fb_panel.inputFocused=document.getElementById("fb-pp-input-price");return});$("#fb-pp-input-price").blur(function(){fb_panel.resetCursorPosition(this);fb_panel.inputFocused="";return});$("#fb-help-fieldpayment").click(function(n){appVar.displayAlert_("Configure this form element to have a price value and/or multiplier. A multiplier is basically the quantity of an item.|#|http://www.coffeecup.com/help/articles/957/")})}};